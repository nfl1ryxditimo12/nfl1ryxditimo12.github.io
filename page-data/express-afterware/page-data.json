{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/express-afterware/",
    "result": {"data":{"cur":{"id":"0d46e7d8-88c4-58d6-8b77-a2753cfb0a17","html":"<p>Expressì—” Middleware ê°œë…ì´ ìˆê³  ì‹¤ì œë¡œ ì§€ì›ì´ ë˜ì–´ ê°œë°œì— ë„ì›€ì„ ì¤€ë‹¤.<br/>\nì˜¤ëŠ˜ì€ ìƒì†Œí•˜ê³  ì˜ ì‚¬ìš© ì•ˆí•˜ëŠ” Afterware ê°œë…ì„ ë„ì…í•´ ì½”ë“œ ì§œê³ ì í•œë‹¤.<br/></p>","excerpt":"Expressì—” Middleware ê°œë…ì´ ìˆê³  ì‹¤ì œë¡œ ì§€ì›ì´ ë˜ì–´ ê°œë°œì— ë„ì›€ì„ ì¤€ë‹¤.\nì˜¤ëŠ˜ì€ ìƒì†Œí•˜ê³  ì˜ ì‚¬ìš© ì•ˆí•˜ëŠ” Afterware ê°œë…ì„ ë„ì…í•´ ì½”ë“œ ì§œê³ ì í•œë‹¤.","frontmatter":{"date":"January 07, 2022","title":"Express Afterware ë„ì…","categories":"Node.js Express","author":"seongsu","emoji":"8ï¸âƒ£"},"fields":{"slug":"/express-afterware/"}},"next":{"id":"47e00f98-5c31-5401-aee9-8d62f9339cf0","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtUlEQVQoz61RQQ6CMBDk/x9CQMTgAYO3YjCYIIInoNCCDxjTTUqIAe2Bw2S7293pdNbquw5bwponHedTNMF8ZpFQN0ghMEhJuej7CUu9fxUqsqoscc8yqrVNg6auCbxtJxgRqsb3OOISxzhHEY5BAM91sbNtOu89D47j4OD7eBYFPf7zy1rhI89xTRIwxnAKQ4qqdktTJIzR3auqyAZjD8dhIKghFbWv87qRh5tveY14bQnfCj/fJZ+k6bwZBQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"express.png\"\n        title=\"express.png\"\n        src=\"/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/37523/express.png\"\n        srcset=\"/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/e9ff0/express.png 180w,\n/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/f21e7/express.png 360w,\n/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/37523/express.png 720w,\n/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/302a4/express.png 1080w,\n/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/78797/express.png 1125w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\n<h2 id=\"ï¸-custom-error\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-custom-error\" aria-label=\"ï¸ custom error permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>â›”ï¸ Custom Error</h2>\n<br/>\n<p>ê°œë°œì„ í•˜ë‹¤ ë³´ë©´ ìì²´ ì—¬ëŸ¬ í´ë˜ìŠ¤ê°€ í•„ìš”í•œ ê²½ìš°ê°€ ì¢…ì¢… ìƒê¸´ë‹¤.<br/>\në„¤íŠ¸ì›Œí¬ ê´€ë ¨ ì‘ì—… ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤ë©´ <code class=\"language-text\">HttpError</code>,<br/>\në°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ì‘ì—… ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤ë©´ <code class=\"language-text\">DbError</code>,<br/>\nê²€ìƒ‰ ê´€ë ¨ ì‘ì—… ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤ë©´ <code class=\"language-text\">NotFoundError</code><br/>\në“±ë“± ì§ì ‘ ì—°ê´€ëœ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ëŠ”ê²Œ ì§ê´€ì ì´ê¸° ë•Œë¬¸ì´ë‹¤.<br/></p>\n<br/>\n<p>ë‚˜ëŠ” API ì„œë²„ë¥¼ ì œì‘ ì¤‘ì´ì—¬ì„œ <code class=\"language-text\">HttpResponseError</code> ìœ„ì£¼ë¡œ ì‘ì„± í–ˆë‹¤.<br/>\nì§ì ‘ ì—ëŸ¬ í´ë˜ìŠ¤ë¥¼ ë§Œë“  ê²½ìš°, ì´ ì—ëŸ¬ë“¤ì€ <code class=\"language-text\">statusCode</code>, <code class=\"language-text\">message</code>, <code class=\"language-text\">stack</code>ì²˜ëŸ¼ ì—¬ëŸ¬ í”„ë¡œí¼í‹°ë¥¼ ì§€ì›í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.<br/></p>\n<blockquote>\n<p>ë¬¼ë¡  ì´ì™¸ì˜ í”„ë¡œí¼í‹°ë„ ì§€ì› í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</p>\n</blockquote>\n<br/>\n<p><code class=\"language-text\">JavaScript</code>ì—ì„œ <code class=\"language-text\">throw</code>ì˜ ì¸ìˆ˜ì— ì•„ë¬´ëŸ° ì œì•½ì´ ì—†ê¸° ë•Œë¬¸ì— ì»¤ìŠ¤í…€ ì—ëŸ¬ í´ë˜ìŠ¤ëŠ” ë°˜ë“œì‹œ <code class=\"language-text\">Error</code>ë¥¼ ìƒì†í•  í•„ìš”ê°€ ì—†ë‹¤.<br/>\ní•˜ì§€ë§Œ <code class=\"language-text\">Error</code>ë¥¼ ìƒì†ë°›ì•„ ì»¤ìŠ¤í…€ ì—ëŸ¬ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê²Œ ë˜ë©´ <code class=\"language-text\">obj instanceof Error</code>ë¥¼ ì‚¬ìš©í•´ ì—¬ëŸ¬ ê°ì²´ë¥¼ ì‹ë³„ í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.</p>\n<blockquote>\n<p>ê·¸ë˜ì„œ Errorë¥¼ ìƒì†í•´ì„œ ì»¤ìŠ¤í…€ Error í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì</p>\n</blockquote>\n<br/>\n<h3 id=\"-custom-error-ì œì‘\" style=\"position:relative;\"><a href=\"#-custom-error-%EC%A0%9C%EC%9E%91\" aria-label=\" custom error ì œì‘ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ›  Custom Error ì œì‘</h3>\n<br/>\n<p><code class=\"language-text\">modules/apiError.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ApiError</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Error</span> <span class=\"token punctuation\">{</span>\n    statusCode<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n    isFatal<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>statusCode<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> option<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> stack<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> isFatal<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>statuscode <span class=\"token operator\">=</span> statusCode<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>option<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isFatal <span class=\"token operator\">=</span> option<span class=\"token punctuation\">.</span>isFatal <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token boolean\">false</span> <span class=\"token operator\">:</span> option<span class=\"token punctuation\">.</span>isFatal<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>option<span class=\"token punctuation\">.</span>stack<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>stack <span class=\"token operator\">=</span> option<span class=\"token punctuation\">.</span>stack<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                Error<span class=\"token punctuation\">.</span><span class=\"token function\">captureStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isFatal <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n            Error<span class=\"token punctuation\">.</span><span class=\"token function\">captureStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>Api ì„œë²„ì—ì„œ ì‚¬ìš©í•˜ëŠ” Api Custom Errorì´ë‹¤</p>\n</blockquote>\n<br/>\n<p>ì¸ìë¡œ <code class=\"language-text\">statusCode</code>, <code class=\"language-text\">message</code>ë¥¼ ë°›ì•„ì˜¤ê³  ì˜µì…˜ìœ¼ë¡œ <code class=\"language-text\">stack</code>, <code class=\"language-text\">isFatal</code>ì„ ë°›ì•„ì˜¨ë‹¤<br/></p>\n<blockquote>\n<p>stackì€ stackTraceì˜ ë°˜í™˜ê°’ì´ê³  isFatalì€ ì‹¬ê°í•œ ì˜¤ë¥˜ì¼ ê²½ìš° ë¡œê¹… &#x26; ìŠ¬ë™ ì•Œë¦¼ì„ ìœ„í•´ ë„£ì—ˆë‹¤</p>\n</blockquote>\n<br/>\n<p><code class=\"language-text\">message</code>í”„ë¡œí¼í‹°ê°€ ë¶€ëª¨ ìƒì„±ìì—ì„œ ì„¤ì •ë˜ê²Œ í•˜ê¸° ìœ„í•´ <code class=\"language-text\">super</code>ë¥¼ í˜¸ì¶œí•´ì¤€ë‹¤<br/>\nê·¸ë¦¬ê³  <code class=\"language-text\">statusCode</code> ë˜í•œ ë¶€ëª¨ ìƒì„±ìì— ì„¤ì •í•´ì¤€ë‹¤.<br/>\nê·¸ ë’¤ í•„ìš”ì— ì˜í•´ <code class=\"language-text\">option</code>ê°’ì´ ë“¤ì–´ì˜¤ë©´ ê·¸ ê°’ì— ëŒ€í•´ì„œë„ ë¶€ëª¨ ìƒì„±ìì— ì„¤ì •í•´ì¤€ë‹¤.<br/></p>\n<br/>\n<br/>\n<h2 id=\"-error-middleware\" style=\"position:relative;\"><a href=\"#-error-middleware\" aria-label=\" error middleware permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸš« Error Middleware</h2>\n<br/>\n<p><code class=\"language-text\">Express</code>ë¡œ ê°œë°œì„ í•˜ë‹¤ <strong><code class=\"language-text\">ë§Œì•½ ì‹¤ ì„œë¹„ìŠ¤ì—ì„œ ìƒê°ì§€ ëª»í•œ ì˜¤ë¥˜ë¡œ ì„œë²„ê°€ ì¢…ë£Œë˜ë©´ ì–´ë–¡í•˜ì§€?</code></strong> ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆë˜ ì  ìˆì„ê²ƒ ì´ë‹¤.<br/></p>\n<br/>\n<p>ì´ëŸ° ê±±ì •ì„ í•  ìˆ˜ ë°–ì— ì—†ëŠ” ì´ìœ ê°€ <code class=\"language-text\">Node.js</code> ìì²´ê°€ ë‹¨ì¼ ìŠ¤ë ˆë“œ í”Œë«í¼ì´ë‹¤ ë³´ë‹ˆ ì˜¤ë¥˜ê°€ ë‚  ê²½ìš° ì„œë¹„ìŠ¤ê°€ ê·¸ëŒ€ë¡œ ì£½ì–´ë²„ë¦¬ëŠ” ë¬¸ì œê°€ ìˆë‹¤.<br/>\nê·¸ë ‡ë‹¤ê³  ëª¨ë“  ì˜¤ë¥˜ì— ê´€í•´ <code class=\"language-text\">try ... catch</code>ë¬¸ìœ¼ë¡œ ë§‰ìœ¼ë©´ ì½”ë“œê°€ ë³´ê¸° ì¢‹ì§€ ì•Šì„ ë¿ë”ëŸ¬ ë‹¨ìœ„/í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ë¹¡ì„¸ê²Œ í•œë‹¤í•´ë„ í•œê³„ê°€ ìˆê¸° ë•Œë¬¸ì´ë‹¤.<br/></p>\n<blockquote>\n<p>ì‚¬ì‹¤ Node.jsëŠ” ì‹œìŠ¤í…œì ìœ¼ë¡œ non-blocking I/Oë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” í˜¸ì¶œì´ ìˆëŠ” ê²½ìš°, ì´ë¥¼ ë¹„ë™ê¸° ì²˜ë¦¬ í•˜ê¸° ìœ„í•´ ë‚´ë¶€ì˜ Thread pool(libio)ì„ ë³„ë„ë¡œ ì´ìš©í•´ ì²˜ë¦¬í•œë‹¤ê³  í•´ì„œ ì •í™•íˆ ë§í•˜ë©´ ì‹±ê¸€ ìŠ¤ë ˆë“œëŠ” ì•„ë‹ˆë‹¤.</p>\n</blockquote>\n<br/>\n<h3 id=\"-ê·¸ë˜ì„œ-ì–´ë–»ê²Œ-í•´ì•¼í•˜ë‚˜\" style=\"position:relative;\"><a href=\"#-%EA%B7%B8%EB%9E%98%EC%84%9C-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EC%95%BC%ED%95%98%EB%82%98\" aria-label=\" ê·¸ë˜ì„œ ì–´ë–»ê²Œ í•´ì•¼í•˜ë‚˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>â“ ê·¸ë˜ì„œ ì–´ë–»ê²Œ í•´ì•¼í•˜ë‚˜</h3>\n<br/>\n<p>ì„œë¹„ìŠ¤ ìƒ ì–´ë””ì„œ ë°œìƒí•  ì§€ ëª¨ë¥´ëŠ” ì—ëŸ¬ë¥¼ ì¼ì¼íˆ ë§‰ëŠ”ë‹¤ëŠ” ê²ƒì€ ë§¤ìš° ë¹„íš¨ìœ¨ì ì´ë©° ë³´ê¸°ì—ë„ ë³„ë¡œ ì¢‹ì§€ ì•Šê³  ê·¸ë ‡ê²Œ í•  í•„ìš”ë„ ì—†ë‹¤.<br/>\nì™œëƒí•˜ë©´ ì˜¤ë¥˜ê°€ ë‚œ ìƒí™©ì—ì„œ <code class=\"language-text\">Express</code> ë¯¸ë“¤ì›¨ì–´ë¥¼ ì´ìš©í•˜ë©´ ì†ì‰½ê²Œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.<br/></p>\n<h4 id=\"span-stylecolor-redmiddleware-ë€span\" style=\"position:relative;\"><a href=\"#span-stylecolor-redmiddleware-%EB%9E%80span\" aria-label=\"span stylecolor redmiddleware ë€span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"color: red;\">Middleware ë€?</span></h4>\n<p><code class=\"language-text\">Client</code>ì—ê²Œ ìš”ì²­ì´ ì˜¤ê³  ê·¸ ìš”ì²­ì— ê´€í•œ ì‘ë‹µì„ ë³´ë‚´ëŠ” ì¤‘ê°„ì— ê±°ì³ê°€ëŠ” í•¨ìˆ˜ì´ë‹¤.<br/>\n<code class=\"language-text\">Middleware</code> í•¨ìˆ˜ëŠ” req(ìš”ì²­)ê³¼ res(ì‘ë‹µ), ê·¸ë¦¬ê³  ì–´í”Œë¦¬ì¼€ì´ì…˜ ìš”ì²­-ì‘ë‹µ ì‚¬ì´í´ ì¤‘ê°„ì—ì„œ í•„ìš”í•œ ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ëœ»í•œë‹¤.<br/>\nëª¨ë“  ë¡œì§ì´ ëë‚œ í›„ <code class=\"language-text\">next</code>ë¥¼ í˜¸ì¶œí•˜ë©° ë¯¸ë“¤ì›¨ì–´ê°€ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ë©° ëª¨ë“  ë¯¸ë“¤ì›¨ì–´ê°€ ì²˜ë¦¬ë˜ì—ˆë‹¤ë©´ ì‘ë‹µ ë¡œì§ìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤.<br/></p>\n<br/>\n<h3 id=\"-error-middleware-ì‘ì„±\" style=\"position:relative;\"><a href=\"#-error-middleware-%EC%9E%91%EC%84%B1\" aria-label=\" error middleware ì‘ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸš§ Error Middleware ì‘ì„±</h3>\n<br/>\n<p><code class=\"language-text\">modules/error.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">errorConverter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>err<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> res<span class=\"token operator\">:</span> Response<span class=\"token punctuation\">,</span> next<span class=\"token operator\">:</span> NextFunction<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> error <span class=\"token operator\">=</span> err<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>err <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">ApiError</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> statusCode <span class=\"token operator\">=</span> error<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">||</span> httpStatus<span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> message <span class=\"token operator\">=</span> error<span class=\"token punctuation\">.</span>message <span class=\"token operator\">||</span> httpStatus<span class=\"token punctuation\">[</span>statusCode<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        error <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApiError</span><span class=\"token punctuation\">(</span>statusCode<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">.</span>stack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>ì˜¤ë¥˜ê°€ ë‚¬ì„ ë•Œ Custom Errorë¡œ ë³€í™˜ì‹œì¼œì£¼ëŠ” Middleware</p>\n</blockquote>\n<br/>\n<p>ì¼ë‹¨ ì˜¤ë¥˜ê°€ ë‚¬ë‹¤ê³  ê°€ì •í•˜ë©´ ìœ„ <code class=\"language-text\">errorConverter</code> ë¯¸ë“¤ì›¨ì–´ê°€ ì‹¤í–‰ì´ ë  ê²ƒì´ë‹¤.<br/>\nì´ ë¯¸ë“¤ì›¨ì–´ëŠ” ìœ„ì— ì‘ì„±í•œ ì¼ë°˜ <code class=\"language-text\">Error</code>ë¥¼ <code class=\"language-text\">Custom Error</code>ë¡œ ë³€í™˜ì‹œí‚¤ëŠ” ì‘ì—…ì„ í•´ì¤€ë‹¤.<br/>\nê·¸ ë’¤ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ <code class=\"language-text\">error</code> ê°ì²´ë¥¼ ë„˜ê²¨ì¤€ë‹¤.<br/></p>\n<br/>\n<p><code class=\"language-text\">modules/error.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">errorHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>err<span class=\"token operator\">:</span> ApiError<span class=\"token punctuation\">,</span> req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> res<span class=\"token operator\">:</span> Response<span class=\"token punctuation\">,</span> next<span class=\"token operator\">:</span> NextFunction<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> statusCode<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> stack <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> err<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> response<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> code<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> stack<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        code<span class=\"token operator\">:</span> statusCode<span class=\"token punctuation\">,</span>\n        message<span class=\"token punctuation\">,</span>\n        stack<span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>env<span class=\"token punctuation\">.</span>nodeEnv <span class=\"token operator\">!==</span> <span class=\"token string\">\"production\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        response<span class=\"token punctuation\">.</span>stack <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>statusCode <span class=\"token operator\">===</span> httpStatus<span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">slack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> log<span class=\"token operator\">:</span> logger<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>stack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> statusCode<span class=\"token punctuation\">,</span> stack<span class=\"token punctuation\">,</span> message <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        logger<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span>stack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span>statusCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>Custom Errorë¡œ ë³€í™˜ëœ Errorë¥¼ Clientì— ì‘ë‹µí•´ ì£¼ëŠ” ë¯¸ë“¤ì›¨ì–´</p>\n</blockquote>\n<br/>\n<p>ì¼ë‹¨ <code class=\"language-text\">ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜</code> / <code class=\"language-text\">ì˜ˆìƒí•œ ì˜¤ë¥˜</code>ë¡œ ë‚˜ëˆ  ì—ëŸ¬ í•¸ë“¤ë§ì„ í•˜ì˜€ê³ <br/>\nì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ <code class=\"language-text\">INTERNAL SERVER ERROR</code>ì¸ ê²½ìš° ì œì¼ ë†’ì€ ë‹¨ê³„ë¡œ <code class=\"language-text\">logging</code>ì„ í•œ ë’¤ <code class=\"language-text\">Slack Web Hook</code>ì„ í†µí•´ <code class=\"language-text\">Slack</code>ìœ¼ë¡œ ì˜¤ë¥˜ë¥¼ ì „ë‹¬í•´ ì£¼ëŠ” ë¡œì§ì„ ì§œê²Œ ë˜ì—ˆë‹¤.<br/></p>\n<blockquote>\n<p>ì‹¬ê°í•œ ì˜¤ë¥˜ê°€ ëœ¨ë©´ í—ë ˆë²Œë–¡ ì»´í“¨í„°ë¥¼ ì¼œì•¼í•œë‹¤</p>\n</blockquote>\n<p>ê·¸ ë’¤ ì˜ˆìƒí•œ ì˜¤ë¥˜ë“¤ì€ ëª¨ë‘ 400ë²ˆëŒ€ <code class=\"language-text\">Https Status Code</code>ë¥¼ ê°–ê³  ìˆì–´ ë¡œê¹…ë§Œ í•´ì¤€ë‹¤.<br/>\në³´í†µ <code class=\"language-text\">Client</code>ì—ì„œ ì˜ëª»ëœ ì •ë³´ê°€ ì˜¨ ê²½ìš°ì´ë‹¤.<br/>\në§ˆì§€ë§‰ìœ¼ë¡œ í˜„ì¬ <code class=\"language-text\">statusCode</code>, <code class=\"language-text\">message</code>, <code class=\"language-text\">stack</code>ë¥¼ ì‘ë‹µí•´ ì¤€ë‹¤.</p>\n<br/>\n<h3 id=\"-error-middleware-ì ìš©\" style=\"position:relative;\"><a href=\"#-error-middleware-%EC%A0%81%EC%9A%A9\" aria-label=\" error middleware ì ìš© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ›¤ Error Middleware ì ìš©</h3>\n<br/>\n<p>ìœ„ì²˜ëŸ¼ <code class=\"language-text\">Middleware</code>ë¥¼ ì‘ì„± í–ˆë‹¤ê³  ì˜¤ë¥˜ê°€ ë‚¬ì„ ë•Œ ë¯¸ë“¤ì›¨ì–´ê°€ ì‘ë™ë˜ì§€ ì•ŠëŠ”ë‹¤.<br/></p>\n<blockquote>\n<p>ë‹¹ì—°í•œ ì†Œë¦¬ì§€ë§Œ ì—°ê²° í•´ì¤˜ì•¼ì§€ ğŸ¤£</p>\n</blockquote>\n<br/>\n<p><code class=\"language-text\">app.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> apiRouter <span class=\"token keyword\">from</span> <span class=\"token string\">\"@routes/index\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> errorConverter<span class=\"token punctuation\">,</span> errorHandler <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@modules/error\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token comment\">// Api Router</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>apiRouter<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">,</span> apiRouter<span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Error Middleware</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>errorConverter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>errorHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>ê²½ë¡œì˜ ì‹œì‘ì´â€™@â€™ ì¸ ì´ìœ ëŠ” ì ˆëŒ€ê²½ë¡œë¥¼ ì§€ì •í–ˆê³  <a href=\"https://seongsu.me/nodejs-typescript/\">TypeScript ì„¤ì •</a>ì„ ì°¸ì¡°í•˜ì</p>\n</blockquote>\n<br/>\n<p>ì¼ë‹¨ <code class=\"language-text\">app.ts</code>íŒŒì¼ì— <code class=\"language-text\">Error Middleware</code>ë¥¼ ì ìš©ì‹œì¼œì¤€ë‹¤.<br/>\nì´ ë•Œ ë¬´ì¡°ê±´ <code class=\"language-text\">Api Router</code> ë°‘ì— ì‘ì„±í•´ ì¤˜ì•¼ ì •ìƒì ìœ¼ë¡œ ì‘ë™ í•œë‹¤.<br/></p>\n<blockquote>\n<p>ì´ëŸ°ë‹¤ê³  ë¯¸ë“¤ì›¨ì–´ê°€ ì‘ë™í•˜ë‚˜??? ì•„ë‹ˆë‹¤ ë˜ ì„¤ì • í•´ì¤˜ì•¼ í•œë‹¤.</p>\n</blockquote>\n<br/>\n<p><code class=\"language-text\">modules/error.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">catchError</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>fn<span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> res<span class=\"token operator\">:</span> Response<span class=\"token punctuation\">,</span> next<span class=\"token operator\">:</span> NextFunction<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">Promise</span><span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>íŠ¹ì • ì½”ë“œì—ì„œ ì˜¤ë¥˜ê°€ ë‚¬ì„ë•Œ <code class=\"language-text\">try ... catch</code>ë°©ì‹ìœ¼ë¡œ ì˜¤ë¥˜ë¥¼ ì¡ì•„ <code class=\"language-text\">Error Middleware</code>ë¡œ ë„˜ê²¨ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤.</p>\n<br/>\n<p><code class=\"language-text\">routes/index.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getInfo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@controllers/index.ts\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">Router</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> getInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>ë°‘ì˜ <code class=\"language-text\">controllers/index.ts</code>íŒŒì¼ì´ ì–´ë–»ê²Œ ë¶ˆëŸ¬ì™€ì§€ëŠ”ì§€ ì´í•´ë¥¼ ë•ëŠ” ì½”ë“œ</p>\n</blockquote>\n<br/>\n<p><code class=\"language-text\">controllers/index.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Request<span class=\"token punctuation\">,</span> Response<span class=\"token punctuation\">,</span> NextFunction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> catchError <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@modules/error\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ApiError <span class=\"token keyword\">from</span> <span class=\"token string\">\"@modules/apiError\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> httpStatus <span class=\"token keyword\">from</span> <span class=\"token string\">\"http-status\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> getInfo <span class=\"token operator\">=</span> <span class=\"token function\">catchError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> res<span class=\"token operator\">:</span> Response<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'1'</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì´ê²Œ ë§ëƒ?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApiError</span><span class=\"token punctuation\">(</span>httpStatus<span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"í‹€ë ¸ë‹¤\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>ìœ„ ì²˜ëŸ¼ ë³€ìˆ˜ë¥¼ ë°›ì•„ì˜¤ëŠ” ê³³ì— <code class=\"language-text\">catchError</code>í•¨ìˆ˜ë¡œ ê°ì‹¸ì¤€ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  <code class=\"language-text\">http://localhost:${port}/</code> URLì— <code class=\"language-text\">GET</code> ìš”ì²­ì„ ë‚ ë ¤ë³´ì.<br/>\nì´ ë•Œ ë¬¸ìì—´ â€˜1â€™ì€ ìˆ«ì 1ì´ ì•„ë‹ˆë¯€ë¡œ <code class=\"language-text\">new ApiError</code>ì´ <code class=\"language-text\">throw</code>ë  ê²ƒ ì´ë‹¤.<br/></p>\n<br/>\n<p>ê·¸ë•Œ ì¼ë°˜ì ì¸ ìƒí™©ì—ì„œ ë”°ë¡œ <code class=\"language-text\">try ... catch</code>ê°™ì€ ì—ëŸ¬ í•¸ë“¤ë§ì„ í•´ì£¼ì§€ ì•Šì•˜ë‹¤ë©´ ì„œë²„ëŠ” ì¦‰ì‹œ ì¢…ë£Œ ë  ê²ƒì´ë‹¤.<br/>\ní•˜ì§€ë§Œ í˜„ì¬ <code class=\"language-text\">Error Middleware</code>ë¥¼ ì ìš©í•œ ê²½ìš° <code class=\"language-text\">Error</code>ê°ì²´ê°€ <code class=\"language-text\">throw</code>ëœë‹¤ í•´ë„ ì„œë²„ê°€ ì¢…ë£Œë˜ì§€ ì•Šê³  ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ë„˜ì–´ê°€ ì˜¤ë¥˜ê°€ ì‘ë‹µë˜ê¸° ë•Œë¬¸ì— ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ë¼ë„ ê±±ì •í•˜ì§€ ì•Šê³  ì½”ë“œë¥¼ ì§¤ ìˆ˜ ìˆê²Œ ëœë‹¤.<br/></p>\n<br/>\n<p>ì´ëŸ° ë°©ì‹ìœ¼ë¡œ <code class=\"language-text\">controller</code>ë‹¨ì— ë¯¸ë“¤ì›¨ì–´ë¥¼ ë†”ì¤€ë‹¤ë©´ ì‹¬ê°í•œ ì˜¤ë¥˜ë¥¼ ë§‰ì„ ìˆ˜ ìˆê³  ìœ ì§€ë³´ìˆ˜ì—ë„ ë„ì›€ì´ ë§ì´ ëœë‹¤.<br/></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-custom-error\">â›”ï¸ Custom Error</a></p>\n<ul>\n<li><a href=\"#-custom-error-%EC%A0%9C%EC%9E%91\">ğŸ›  Custom Error ì œì‘</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-error-middleware\">ğŸš« Error Middleware</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EA%B7%B8%EB%9E%98%EC%84%9C-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EC%95%BC%ED%95%98%EB%82%98\">â“ ê·¸ë˜ì„œ ì–´ë–»ê²Œ í•´ì•¼í•˜ë‚˜</a></p>\n<ul>\n<li><a href=\"#span-stylecolor-redmiddleware-%EB%9E%80span\"><span style=\"color: red;\">Middleware ë€?</span></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-error-middleware-%EC%9E%91%EC%84%B1\">ğŸš§ Error Middleware ì‘ì„±</a></p>\n</li>\n<li>\n<p><a href=\"#-error-middleware-%EC%A0%81%EC%9A%A9\">ğŸ›¤ Error Middleware ì ìš©</a></p>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n<br/>\n<br/>","frontmatter":{"date":"January 06, 2022","title":"Express error middleware & Custom error module","categories":"Node.js Express","author":"seongsu","emoji":"7ï¸âƒ£"},"fields":{"slug":"/express-error-middleware/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://seongsu.me","comments":{"utterances":{"repo":"nfl1ryxditimo12/nfl1ryxditimo12.github.io"}}}}},"pageContext":{"slug":"/express-afterware/","nextSlug":"/express-error-middleware/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}