{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/skill/slack-monitering/",
    "result": {"data":{"cur":{"id":"94f7adbc-6e01-5de4-9ab6-ec5ad4add288","html":"","excerpt":"","frontmatter":{"date":"October 09, 2022","title":"Slack을 서버 오류 알림으로 사용해 보자","categories":"Node.js 기타","author":"seongsu","emoji":"1️⃣5️⃣"},"fields":{"slug":"/skill/slack-monitering/"}},"next":{"id":"98902d3c-e3ed-5e39-b45b-d44536d6e2b1","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 710px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB24rCw4Ff/8QAGBABAQEBAQAAAAAAAAAAAAAAAQARAiH/2gAIAQEAAQUC7bXZNg9v/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFRABAQAAAAAAAAAAAAAAAAAAECH/2gAIAQEABj8Ca//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhMUH/2gAIAQEAAT8hQoIH67xwQoWQNq3j/9oADAMBAAIAAwAAABAbz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABYRAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAgEBPxA1n//EAB0QAQEAAQQDAAAAAAAAAAAAAAERIQAQMUFhkfD/2gAIAQEAAT8QrkLVVkD496xlVRDtLBOguycicj3oaOTC+Djb/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"network\"\n        title=\"network\"\n        src=\"/static/408ba28e91466c8a84f92f994d4d1866/67e9d/network.jpg\"\n        srcset=\"/static/408ba28e91466c8a84f92f994d4d1866/4ec73/network.jpg 180w,\n/static/408ba28e91466c8a84f92f994d4d1866/158ba/network.jpg 360w,\n/static/408ba28e91466c8a84f92f994d4d1866/67e9d/network.jpg 710w\"\n        sizes=\"(max-width: 710px) 100vw, 710px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"-개요\" style=\"position:relative;\"><a href=\"#-%EA%B0%9C%EC%9A%94\" aria-label=\" 개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐽 개요</h2>\n<br>\n<p>프랑스에서 3초마다 데이터를 받아와 Slack으로 최신 데이터를 제공해주는 서비스를 운영중인데, 평균 2-3초의 <code class=\"language-text\">Latency</code>가 있었다.<br></p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">프랑스 API 서버 -> AWS Seoul Region -> 데이터 가공 -> Slack</code></pre></div>\n<br>\n<p>위와 같은 Flow로 데이터가 이동하였는데 아무리 프랑스에서 데이터가 전송된다 해도, 말이 평균이지 최소 2초의 지연시간은 발생하였다.<br></p>\n<blockquote>\n<p>10초가 넘어가는 경우도 가끔 있었다.</p>\n</blockquote>\n<p>이렇게 불안정한 환경으로 서버를 운영하는 것은 서비스 질적으로 최악이라 판단해서 서버 운영 1주년을 기념해 <code class=\"language-text\">서버 최적화</code>를 기획하게 되었다.<br></p>\n<br>\n<h2 id=\"-최적화-방법을-떠올려-보자\" style=\"position:relative;\"><a href=\"#-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%B0%A9%EB%B2%95%EC%9D%84-%EB%96%A0%EC%98%AC%EB%A0%A4-%EB%B3%B4%EC%9E%90\" aria-label=\" 최적화 방법을 떠올려 보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎨 최적화 방법을 떠올려 보자</h2>\n<br>\n<p>일단 데이터 Flow를 기준으로 <code class=\"language-text\">프랑스에서 데이터를 받아오는 부분</code>, <code class=\"language-text\">데이터 가공하는 부분</code>, <code class=\"language-text\">데이터를 Slack으로 전송하는 부분</code> 총 3가지를 트랜잭션으로 묶었고, 로깅을 진행했다.<br></p>\n<br>\n<h3 id=\"-범인은-api-응답이-늦어서-였다\" style=\"position:relative;\"><a href=\"#-%EB%B2%94%EC%9D%B8%EC%9D%80-api-%EC%9D%91%EB%8B%B5%EC%9D%B4-%EB%8A%A6%EC%96%B4%EC%84%9C-%EC%98%80%EB%8B%A4\" aria-label=\" 범인은 api 응답이 늦어서 였다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📄 범인은 API 응답이 늦어서 였다.</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA9ElEQVQoz5WRR47EMAwE/RvnAOec4/8fxEUR0AIz8GUOAt2kukha1jAM0nWdjOMo0zQJuigKqapK0jRVvSyL1o7jkG3b5DxP9VzXpTVy+Ou6Fqvve2nbVo0k0d/AeZ61tu+7rOuqEQ9ggORogMfiIoIJOOiyLLVblmWqMQAFAIxJAd73rTU0918nfFsZmFkZCNCmabQBa6Opw/l5ZQBMBZAGBohPJ3x7FLPy96MwkZkKABFNQ7T+QwMhaYwAmSDPc83zitSe51EIkXtEfoFhMJTl+75wgiCQMAw1Oo4jruuKbdsf+TiO/w+eJEkkiiL99jxPzx8mZQ/Vb8tf6QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"api log\"\n        title=\"api log\"\n        src=\"/static/7e7252af2f0e9110cc62feb86b188e56/37523/api_log.png\"\n        srcset=\"/static/7e7252af2f0e9110cc62feb86b188e56/e9ff0/api_log.png 180w,\n/static/7e7252af2f0e9110cc62feb86b188e56/f21e7/api_log.png 360w,\n/static/7e7252af2f0e9110cc62feb86b188e56/37523/api_log.png 720w,\n/static/7e7252af2f0e9110cc62feb86b188e56/302a4/api_log.png 1080w,\n/static/7e7252af2f0e9110cc62feb86b188e56/6be49/api_log.png 1160w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>프랑스에서 한국까지 API를 받아오는데 <code class=\"language-text\">평균 1,550ms</code> 정도를 기록했고, 데이터 가공은 <code class=\"language-text\">평균 200ms</code> 미만, slack 전송은 <code class=\"language-text\">평균 300ms</code> 정도였다.<br></p>\n<br>\n<h3 id=\"-latency를-줄이기-위한-방법\" style=\"position:relative;\"><a href=\"#-latency%EB%A5%BC-%EC%A4%84%EC%9D%B4%EA%B8%B0-%EC%9C%84%ED%95%9C-%EB%B0%A9%EB%B2%95\" aria-label=\" latency를 줄이기 위한 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤟🏻 Latency를 줄이기 위한 방법</h3>\n<br>\n<p><code class=\"language-text\">Latency</code>를 줄이겠다고 서버 데이터 가공 로직을 최적화 하는건 한계가 있을 것이다.<br>\n그래서 최적화는 그대로 하되, 데이터를 받아오는 지역 자체를 프랑스로 옮기고, 데이터가 한국으로 전달되는 부분은 Slack의 데이터 전송 기술을 믿으면 더 효율적인 최적화 방법이 될 것 같았다.<br></p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABCElEQVQoz4WSWW6EQAxE5zqITSzN3uyLuP+BPHqOPCGKlHy0ENX2c5Xh1XWd9H0v3ntZlkXKspSqqiTPc9WnaZJhGGRdVz3UtG2rOu/7vss8z6olSSIvioGN46gFwAyIjkYDjcdxyHmeH533+771Di1N0y8gB+C2beKck7qupSgK8X5QR7ihyaDm2AbYEHVokQHS7NzvyObIoMTDNQau61INThRF30BrwuETSKPdAeA8gbgDSG0cx3/v0KLZDgFQh04aIvOkBmNhGP63Q/9jh9w/VwDQvvxnh1gFaL+BAXFINIoZZkBqng7R0ahVh8QD0DSNTsmyTGHsA5cMtDtARDPdNAbCCIJA3g/FMwda6jZKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"paris latency\"\n        title=\"paris latency\"\n        src=\"/static/1c5ce77c191b02a74e3093eec0767f7d/37523/paris_log.png\"\n        srcset=\"/static/1c5ce77c191b02a74e3093eec0767f7d/e9ff0/paris_log.png 180w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/f21e7/paris_log.png 360w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/37523/paris_log.png 720w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/302a4/paris_log.png 1080w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/11b93/paris_log.png 1124w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그러기 위해 일단 <code class=\"language-text\">AWS Region</code>을 Paris로 옮겼는데, 어머나.. <code class=\"language-text\">Latency</code>가 1/10 이상 줄어들었다.<br></p>\n<br>\n<p>사실 이렇게 많이 줄어들 줄 몰랐는데, 프랑스에서 한국까지 데이터가 전송되는데 많은 <code class=\"language-text\">Router</code>를 거치며 지연시간이 늘어났나 보다.<br></p>\n<br>\n<p>여기에 데이터 가공 로직까지 최적화 한다면, 유의미한 결과가 나올 것 같았다.<br>\n원래는 <code class=\"language-text\">Event</code>, <code class=\"language-text\">Exam</code>으로 나눠진 두개의 데이터를 하나의 프로세스에서 비동기로 처리하고 있었다.<br>\n이 두개를 각 프로세스에서 돌릴수 있게 <code class=\"language-text\">Interface 코드</code>를 짜고, 환경변수로 <code class=\"language-text\">Event</code>, <code class=\"language-text\">Exam</code> 프로세스를 분리했다. 그 뒤, Webpack을 이용해 <code class=\"language-text\">Interface 코드</code>를 번들링 하였고 각 프로세스를 실행시켰다.<br></p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 117.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADE0lEQVQ4y42UiY6bSBRF8/+fN6NksrQ7NjZgDJjaNyjOiHK3085MJynpSZbRu/WWe+rDmiK6jzSVxhhPXiClGe89y7IQQiiR5pllybw967rFeo/tfFhfPjaDY99pBmGo2is5ryUhr6/Jt6Q05/LtJr7+dMHKh1fl8xQ4tBN127FrNB8PosTXk0Joz5fvLX99rviyO/LpW8W3auAyObRLxJjIOb9UuEIIHmEirQjMS0bZxKAiwkYmGwkpMQhLiBExjUgpkW6hl4nuanHOlfG8CK5lRnPIWJkYxhEpBMYlnMyofkGOnnHs6SfDZGaU8VxGibP2/ZadXugqz2Ff0Z67crNREaczziaMMWgbMH7G+VhEvQ8Pi7lXuMU2fD9Ipu972vOFYZQMk+LQDPSTZpKO0/nK6Tzyz66makc+P7d8eqrZn3qM9bcKt029qhujqOsjShr6ViOkQttUhHbVhfOgEMpQN2eUCdTdxK7qmIT60fLrj+1sHowO5rjivGeeZ2II5JeB/8m5z9A6h1UJcZkxYmYcryilmIQoW3zrxV/FXTBET87vV/I7oTctr1iRGTtLTOkh+UbCemPsN5c82GZd4NRZDht6k+Z0npiXhbyuLK8I5lxMvywrc8Ev/0f8YYYbevtmou16nmpVkNviuTUoE8uWvzy3PO0bPu9OPJ/GQpQL26MxP1aYUmRUgePgCHFmUoFm9FyE5yI9xgeai0RqS9edy8IuIlD1ju5qsNa+GJybbbYN53kluaVs1llDTAvJrTiRsSoWj27eMyHjfGISmmVO77ds1Uyz9zw9f+fUtDSDRctI0GBkQEqB0O4FvcAkLetPc3xEL0McFfZYc+l7xOZB7dgdO6wPXMbbwjYy9vVI1Yz8/fXE8/FSiHGF65/Q01pxOh4Qk6arFddpqypwbK98259pe8lwVVTHulR7qAe+7s8FvQdjvwrOKWNUIvoFY+zt+Y+x+POtN99a5odf37BcSAkep2dkv2DkDT2tNdP0A72HJ39d/9+HWxWlXWPur+57VPwKwXuFMcb7H3+S8LvX5l/ZDP0FJ5rWpwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"before\"\n        title=\"before\"\n        src=\"/static/8e63bdb493533085b8a512001696184d/37523/before.png\"\n        srcset=\"/static/8e63bdb493533085b8a512001696184d/e9ff0/before.png 180w,\n/static/8e63bdb493533085b8a512001696184d/f21e7/before.png 360w,\n/static/8e63bdb493533085b8a512001696184d/37523/before.png 720w,\n/static/8e63bdb493533085b8a512001696184d/6d2da/before.png 936w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>최적화 전 코드</p>\n</blockquote>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB30lEQVQ4y42SjW7jIBCE8/7Pd1epl9RJ6r/YgAEb22BjviqOWt1Vd9eutCBWaHZ2Zw6r6gjnM6MOiGJF31Z0G/FTILxkeCFRpqfRE9M08XuklPgch3sxVDXLrSHPS17zgq7THE8nrHVUdU1daGQ9c61ans8NUmm2Lf4V9HA/Qn3bQa+vOa0QVFVFKxRCacryhqoi11zwkkuEMsS4/pPl4f4MRUmsauq64ng8cblceckypO6Zipo2Kzidz/x4euZ8uVJVNTH+h+E0TGS55lxbbm3H6VLjnCOlDWIkrYFpnnFuZJpm5tmzbdsO9jl3QOcjz6WjUT1CSLLKUnfznjftkb3nu/Fg6CNPV8upNEilKNqenxfLr+J+G46lZZw82WuL6AaaVuziCSkp5UTRDgyDw3v/UFkaixgW+vmxj9mvGJ8YV5hCYgyJmCLKDoxzYFkW+mHYbeRCQg+BEB71XRSTF2xdhzV6V3n2gU2pPa01WGMYzcZsobdu/3OfREqFEC1xXf70IW4gDRbTa7TRrDGxaUPUGmN7us7gTKTvItY4mqZ5gEq1j38f9V3xxw4dWJ0YNbuZhRCYYWDj+/Fun4P3gb4L9HLFihUpur27kop1WT4+f5UfDO9+21L8svN3bfMG34XtVtxQneAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"after\"\n        title=\"after\"\n        src=\"/static/10cee15dfd59b81b14ed859eeecafe59/37523/after.png\"\n        srcset=\"/static/10cee15dfd59b81b14ed859eeecafe59/e9ff0/after.png 180w,\n/static/10cee15dfd59b81b14ed859eeecafe59/f21e7/after.png 360w,\n/static/10cee15dfd59b81b14ed859eeecafe59/37523/after.png 720w,\n/static/10cee15dfd59b81b14ed859eeecafe59/f3c12/after.png 764w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>최적화 후 코드</p>\n</blockquote>\n<br>\n<p>두 코드를 보았을 때, <code class=\"language-text\">선언형</code>, <code class=\"language-text\">추상화</code>에 초점을 맞춰 리팩토링을 진행하니 확실히 코드의 가독성이 좋아졌다.<br>\nNode.js의 <code class=\"language-text\">모듈 캐싱 전략</code>을 적절히 활용하여 <code class=\"language-text\">DI</code>를 적용한 것도 가독성에 한몫 했다고 보이는 것 같다.<br></p>\n<br>\n<h3 id=\"️-대기업-플랫폼을-이용한-최적화-전략-먹혔나\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EB%8C%80%EA%B8%B0%EC%97%85-%ED%94%8C%EB%9E%AB%ED%8F%BC%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%B5%9C%EC%A0%81%ED%99%94-%EC%A0%84%EB%9E%B5-%EB%A8%B9%ED%98%94%EB%82%98\" aria-label=\"️ 대기업 플랫폼을 이용한 최적화 전략 먹혔나 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>☂️ 대기업 플랫폼을 이용한 최적화 전략.. 먹혔나?</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 576px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA5UlEQVQY022Qy26CUBRF+RUFi0opcrm8H8oj0NZqKIqmjkxHHfQ7OuhPrwbS2EkHKytnsnP2VoT0GQjjDCEDvCDGCxL8MBl9N7/Hsl2slUSdLZhq85v/Q9mUNXnVkGQFQZQRpzlRskF6IdKLMC2Hqn4mXZdj+ETVb6F/LNF0Y7SifXyhxw2HtqOoHqmbLe1rT7oueNru2e078rKmP1/ojmeOpzf604W269m1B67Xd0RcoH9+M8teUKayQDclwvEwTBvTEmPFYQbXj7FsOd5DfdvxcGTAw8rB/f1+mGhhWEycHHUp+AEpW4QxiTsxvgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"paris result\"\n        title=\"paris result\"\n        src=\"/static/19b644c05c508ac558c4bbb1fbeb5ad0/533c1/paris_result.png\"\n        srcset=\"/static/19b644c05c508ac558c4bbb1fbeb5ad0/e9ff0/paris_result.png 180w,\n/static/19b644c05c508ac558c4bbb1fbeb5ad0/f21e7/paris_result.png 360w,\n/static/19b644c05c508ac558c4bbb1fbeb5ad0/533c1/paris_result.png 576w\"\n        sizes=\"(max-width: 576px) 100vw, 576px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>Paris Region 서버 Slack 응답 로그</p>\n</blockquote>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 580px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6klEQVQY023Qy1LCQBSE4byJ4giSoIaEZMhMmNwI4C0lKCVgQIuVGx/Et/6tGnXnohe9+arPcRJtUGmOyacEozGpKRnFiqKc4Qcx3uXQ9kgq+t41HXGB6Lqcnff/jVPNbixYVnOiWFlQJimTrMId+AxDSV7WNoOrgJNO16J/wA/uInoeoufiiHLJYlrTLJ8xecXLtqWe32KyisfVmodmRWoK2v07T+sNu/aNzW7P9vVAVS9oD0ea+wax+sD7/MLpDTVSKvxQEkZje3YstV2t0gyZTAijxC6PpCZRxnals98XFcix5tTXCH3HN7HbhcEayBiqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"seoul result\"\n        title=\"seoul result\"\n        src=\"/static/57a9c0e30110ec54ed9b7f0637abe342/b6272/seoul_result.png\"\n        srcset=\"/static/57a9c0e30110ec54ed9b7f0637abe342/e9ff0/seoul_result.png 180w,\n/static/57a9c0e30110ec54ed9b7f0637abe342/f21e7/seoul_result.png 360w,\n/static/57a9c0e30110ec54ed9b7f0637abe342/b6272/seoul_result.png 580w\"\n        sizes=\"(max-width: 580px) 100vw, 580px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>Seoul Region 서버 Slack 응답 로그</p>\n</blockquote>\n<br>\n<p>결과를 보니 확연한 차이가 있었다. Paris로 Region을 이전한 것, 서버 프로세스 최적화를 진행한 것 이 두개의 효율이 잘 나와 <code class=\"language-text\">700ms의 Latency</code>를 줄이게 되었다.<br></p>\n<br>\n<h2 id=\"-뱀의-머리보단-용의-꼬리가-낫다\" style=\"position:relative;\"><a href=\"#-%EB%B1%80%EC%9D%98-%EB%A8%B8%EB%A6%AC%EB%B3%B4%EB%8B%A8-%EC%9A%A9%EC%9D%98-%EA%BC%AC%EB%A6%AC%EA%B0%80-%EB%82%AB%EB%8B%A4\" aria-label=\" 뱀의 머리보단 용의 꼬리가 낫다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐍 뱀의 머리보단 용의 꼬리가 낫다</h2>\n<br>\n<p>확실히 직접 통신 비용을 줄이려는 노력을 하기보단, 이미 구축되어있는 플랫폼의 기술을 이용하는 것이 좋은 방법인 듯 하다.<br>\n이로써 최종 2,000ms -> 1,300ms로 35%의 통신 비용을 단축할 수 있었다.<br></p>\n<br>\n<p>다만 아쉬운 점은, API 서버가 너무 멀리 있어 아무리 최적화를 해도 800ms 정도 최소한의 통신 비용은 존재하는게 어쩔수 없긴 해도 아쉽긴 하다.<br></p>\n<br>\n<h3 id=\"-그런데-왜-줄이려는-시도를-하는-것인가\" style=\"position:relative;\"><a href=\"#-%EA%B7%B8%EB%9F%B0%EB%8D%B0-%EC%99%9C-%EC%A4%84%EC%9D%B4%EB%A0%A4%EB%8A%94-%EC%8B%9C%EB%8F%84%EB%A5%BC-%ED%95%98%EB%8A%94-%EA%B2%83%EC%9D%B8%EA%B0%80\" aria-label=\" 그런데 왜 줄이려는 시도를 하는 것인가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>❓ 그런데 왜 줄이려는 시도를 하는 것인가?</h3>\n<br>\n<p>제일 중요한게 <code class=\"language-text\">Why?</code> 인데 설명을 안해서 마지막에 하려한다.<br></p>\n<br>\n<p>42 교육과정에서 선착순으로 진행되는 행사의 알림을 실시간으로 해주는 서버를 운영중이라 빠른 알림이 필요했다. 하지만 2,000ms는 너무 느린 속도여서 “**조금이라도 단축할 수 있지 않을까?**라는 생각이 들었고, 이김에 과거에 작성한 쪽팔린(?) 코드를 고치는 것이 목표였다.<br></p>\n<br>\n<p>여튼 기획에 맞게 단축이 되긴 해서 다행이고, 오래전에 짠 더러운 코드를 싹다 고쳐서 묵은 때를 벗기는 느낌이 들어 굉장히 기분이 좋았다.<br></p>\n<br>\n<h2 id=\"-github-주소\" style=\"position:relative;\"><a href=\"#-github-%EC%A3%BC%EC%86%8C\" aria-label=\" github 주소 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📚 Github 주소</h2>\n<ul>\n<li><a href=\"https://github.com/nfl1ryxditimo12/42Notifier\">https://github.com/nfl1ryxditimo12/42Notifier</a></li>\n</ul>\n<br/>\n<br/>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EA%B0%9C%EC%9A%94\">🐽 개요</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%B0%A9%EB%B2%95%EC%9D%84-%EB%96%A0%EC%98%AC%EB%A0%A4-%EB%B3%B4%EC%9E%90\">🎨 최적화 방법을 떠올려 보자</a></p>\n<ul>\n<li><a href=\"#-%EB%B2%94%EC%9D%B8%EC%9D%80-api-%EC%9D%91%EB%8B%B5%EC%9D%B4-%EB%8A%A6%EC%96%B4%EC%84%9C-%EC%98%80%EB%8B%A4\">📄 범인은 API 응답이 늦어서 였다.</a></li>\n<li><a href=\"#-latency%EB%A5%BC-%EC%A4%84%EC%9D%B4%EA%B8%B0-%EC%9C%84%ED%95%9C-%EB%B0%A9%EB%B2%95\">🤟🏻 Latency를 줄이기 위한 방법</a></li>\n<li><a href=\"#%EF%B8%8F-%EB%8C%80%EA%B8%B0%EC%97%85-%ED%94%8C%EB%9E%AB%ED%8F%BC%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%B5%9C%EC%A0%81%ED%99%94-%EC%A0%84%EB%9E%B5-%EB%A8%B9%ED%98%94%EB%82%98\">☂️ 대기업 플랫폼을 이용한 최적화 전략.. 먹혔나?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%B1%80%EC%9D%98-%EB%A8%B8%EB%A6%AC%EB%B3%B4%EB%8B%A8-%EC%9A%A9%EC%9D%98-%EA%BC%AC%EB%A6%AC%EA%B0%80-%EB%82%AB%EB%8B%A4\">🐍 뱀의 머리보단 용의 꼬리가 낫다</a></p>\n<ul>\n<li><a href=\"#-%EA%B7%B8%EB%9F%B0%EB%8D%B0-%EC%99%9C-%EC%A4%84%EC%9D%B4%EB%A0%A4%EB%8A%94-%EC%8B%9C%EB%8F%84%EB%A5%BC-%ED%95%98%EB%8A%94-%EA%B2%83%EC%9D%B8%EA%B0%80\">❓ 그런데 왜 줄이려는 시도를 하는 것인가?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-github-%EC%A3%BC%EC%86%8C\">📚 Github 주소</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 08, 2022","title":"프랑스 - 한국 간 Latency 단축 전략","categories":"네트워크 회고","author":"seongsu","emoji":"1️⃣4️⃣"},"fields":{"slug":"/skill/latency-strategy/"}},"prev":{"id":"59114fc8-1a5f-5a0a-9e9b-bd4dedbe41de","html":"","frontmatter":{"date":"October 16, 2022","title":"한국어 유니코드 분석으로 문장화 해보기","categories":"Node.js","author":"seongsu","emoji":"1️⃣6️⃣"},"fields":{"slug":"/skill/korean-word-textualize/"}},"site":{"siteMetadata":{"siteUrl":"https://seongsu.me","comments":{"utterances":{"repo":"nfl1ryxditimo12/nfl1ryxditimo12.github.io"}}}}},"pageContext":{"slug":"/skill/slack-monitering/","nextSlug":"/skill/latency-strategy/","prevSlug":"/skill/korean-word-textualize/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}