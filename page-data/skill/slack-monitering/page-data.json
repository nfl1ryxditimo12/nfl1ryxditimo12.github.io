{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/skill/slack-monitering/",
    "result": {"data":{"cur":{"id":"94f7adbc-6e01-5de4-9ab6-ec5ad4add288","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+0lEQVQY05WQv06DcBSFeaP6OPVPog7Fh3DupJN9AYuLQ8WJlhRcTCo2GnGSNCgEE4GmlIWBWOD3GUisjXHxG+69yzn33CsJagSrogBR8U1ZlvxGCMFfVNWPTqrNXgs4nrko3gP5Z8F7EKBcKEzuJriuSxiGmKZJv39OnudkWUYURcznMXEcs0yX62VSXW6HT1wrl4wfu7wFL8idI3b3djg43Ke93UaWO/R6Z7S2Wti2je/72M825o2J4zhMp/frCxrDavbB4uQUFgarPEdVVUajIbquM7gaYBjjRqxpGp7nkaZp0y3LasyTJNlIKAT1WCGo+B+bv6sN64RfjVxpHTpdz60AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack api\"\n        title=\"slack api\"\n        src=\"/static/44d3f86e4c5ad7b41d7f00f4edfd1b34/37523/slack_api.png\"\n        srcset=\"/static/44d3f86e4c5ad7b41d7f00f4edfd1b34/e9ff0/slack_api.png 180w,\n/static/44d3f86e4c5ad7b41d7f00f4edfd1b34/f21e7/slack_api.png 360w,\n/static/44d3f86e4c5ad7b41d7f00f4edfd1b34/37523/slack_api.png 720w,\n/static/44d3f86e4c5ad7b41d7f00f4edfd1b34/1d69c/slack_api.png 750w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<p>서버를 운영하다 보면, 예상치 못한 문제에 직면할 때가 많을 것이다.<br>\n서버가 죽는다던지, 특정 로직에서 오류가 발생하는 등 하루종일 서버를 관찰하지 않는 이상 즉각적인 대응은 힘들 것이다.<br>\n이런 <code class=\"language-text\">Critical한 Issue</code>를 대응하기 위해 Slack을 모니터링 알림으로 사용해 보고자 한다.<br></p>\n<blockquote>\n<p>Slack web hook을 이용해야 해서 다음 글을 참고하면 도움이 될 듯 하다.</p>\n</blockquote>\n<ul>\n<li><a href=\"https://jojoldu.tistory.com/552\">Slack Webhook API 생성하기</a></li>\n<li><a href=\"https://api.slack.com/messaging/webhooks\">Sending messages using Incoming Webhooks</a></li>\n</ul>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"에러 발생!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span></code></pre></div>\n<br>\n<p>예시를 위해 일부러 Error를 throw 했는데, 직접 핸들링 하는 Error가 아니라 <code class=\"language-text\">코드 에러</code>, <code class=\"language-text\">DB 에러</code>, <code class=\"language-text\">비동기 에러</code> 등 당장 처리할 수 없는 Error에 대해 모니터링 프로세스를 통해 빠른 대응으로 안정적인 서비스를 운영할 수 있어야 한다.<br></p>\n<br>\n<h2 id=\"️-error-handling\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-error-handling\" aria-label=\"️ error handling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✍️ Error Handling</h2>\n<br>\n<p>모니터링 프로세스를 놓던, 로깅을 하던 일단 에러에 대해 Handling 할 수 있어야 한다.<br>\n<code class=\"language-text\">Framework</code>단에서 지원하는 Filter가 있다면 상관없지만, 싱글 스레드로 동작하는 Node.js에겐 Error Handling이 잘 이루어져야 한다.<br></p>\n<blockquote>\n<p>비동기 로직은 메인 스레드가 아닌 스레드로 돌아가기 때문에 적절한 처리가 안된다면 프로세스가 죽는다.</p>\n</blockquote>\n<br>\n<ul>\n<li><a href=\"https://seongsu.me/skill/express-error-middleware/\">Express로 구현한 비동기 Error Handling</a></li>\n</ul>\n<br>\n<h2 id=\"-슬랙봇을-이용한-error-모니터링\" style=\"position:relative;\"><a href=\"#-%EC%8A%AC%EB%9E%99%EB%B4%87%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-error-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81\" aria-label=\" 슬랙봇을 이용한 error 모니터링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤖 슬랙봇을 이용한 Error 모니터링</h2>\n<br>\n<p>슬랙봇을 통해 모니터링을 하기 위해서, Error 발생 지점(trace), Error Message, Date time 등이 필요할 텐데, 여기에 마크다운을 이용한 디자인 매핑을 하게 되면, 보기 좋은 에러 알림이 될 것이다.<br></p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">Field</span> <span class=\"token punctuation\">{</span>\n  title<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  value<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n  short<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Block</span> <span class=\"token punctuation\">{</span>\n  type<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  text<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SlackTextBuilder</span> <span class=\"token punctuation\">{</span>\n  color<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  pretext<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  fields<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>Field<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  blocks<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>Block<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> color<span class=\"token punctuation\">,</span> pretext <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Partial<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> pretext<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color <span class=\"token operator\">||</span> <span class=\"token string\">\"#2eb886\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pretext <span class=\"token operator\">=</span> pretext <span class=\"token operator\">||</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>blocks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">addField</span><span class=\"token punctuation\">(</span>field<span class=\"token operator\">:</span> Field<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>field<span class=\"token punctuation\">.</span>short <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      field<span class=\"token punctuation\">.</span>short <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>field<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">addBlock</span><span class=\"token punctuation\">(</span>block<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>blocks<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>block<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">toJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      as_user<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      attachments<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          color<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">,</span>\n          pretext<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pretext<span class=\"token punctuation\">,</span>\n          fields<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      blocks<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>blocks<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p><a href=\"https://api.slack.com/messaging/composing/layouts\">여기</a>에서 볼 수 있는데, 위 클래스의 <code class=\"language-text\">toJSON</code> 부분을 이해하는 것이 중요하다!</p>\n</blockquote>\n<br>\n<p>슬랙 포매팅을 위한 클래스를 제작해 주고, 여기에 필요한 데이터를 넣으면 될 듯하다.<br>\n대략 위 코드를 설명하자면 다음과 같다.<br></p>\n<ul>\n<li>Field: 자잘한 정보들이 병렬적으로 들어갈 부분</li>\n<li>Block: Layer 단위로 정보들이 수직적으로 들어갈 부분</li>\n</ul>\n<br>\n<blockquote>\n<p>슬랙 메세지 포맷에 대한 정보는 다음 사이트에서 찾아볼 수 있다.</p>\n</blockquote>\n<ul>\n<li><a href=\"https://api.slack.com/messaging/composing/layouts\">Creating rich message layouts</a></li>\n<li><a href=\"https://api.slack.com/reference/surfaces/formatting\">Formatting text for app surfaces</a></li>\n</ul>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">errorFormat</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> stack<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> builder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SlackTextBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  builder\n    <span class=\"token punctuation\">.</span><span class=\"token function\">addField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      title<span class=\"token operator\">:</span> <span class=\"token string\">\"APP_NAME\"</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\`Monitering test\\`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">addField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      title<span class=\"token operator\">:</span> <span class=\"token string\">\"TIME_STAMP\"</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">addBlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">\"header\"</span><span class=\"token punctuation\">,</span>\n      text<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        type<span class=\"token operator\">:</span> <span class=\"token string\">\"plain_text\"</span><span class=\"token punctuation\">,</span>\n        text<span class=\"token operator\">:</span> message<span class=\"token punctuation\">,</span>\n        emoji<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">addBlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">\"section\"</span><span class=\"token punctuation\">,</span>\n      text<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        type<span class=\"token operator\">:</span> <span class=\"token string\">\"mrkdwn\"</span><span class=\"token punctuation\">,</span>\n        text<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\\`\\`\\`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>stack<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\`\\`\\`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> builder<span class=\"token punctuation\">.</span><span class=\"token function\">toJSON</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">slackError</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>error<span class=\"token operator\">:</span> IError<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> <span class=\"token function\">errorFormat</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>env<span class=\"token punctuation\">.</span>slackConfig<span class=\"token punctuation\">.</span>errorUri<span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>위와 같은 방식으로 <code class=\"language-text\">Slack message formatter</code> 클래스의 인스턴스를 생성한 뒤, JSON 형태로 <code class=\"language-text\">Body</code>에 담아 앞전에 생성한 <code class=\"language-text\">Incoming Webhook url</code>에 전송하면 해당 슬랙 채널에 메세지가 전송되게 된다.<br></p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABwUlEQVQoz42S2W6cQBBF+YvEHjDD2oCh2Zqm2cdjK4qU//+eG1URkC3PQx6uSr2dulXVVlG2WNY7puUN03LDr99/UDUdtrcPKD3CfvHxbF//W1YQpUgyCS8QX+SHCcerH8P1ooeis896uYY7kFxWjUZZd5CVQi4b1K1Gowzv016c5KxIvHIUaQF6eyiMM4ZadKHtBi532d6xbHes2zsa1bMIRucErtv+TCDLlqs4RFAGhlHKD8f5xjAS9dOMK4ZpQ1kryKo93b8WNcpKsVOCHPEEUi/IPg2ARG66fmKg0gOvCUggUlE23BJqEyWhhElWsMvTIZWizQwzLgzrhwVmWDBMKydp2p4BpCyvGCjS/Bzel5ID6qEy6IcZ03xjZ9vtA+O8YV7v0GbiAZGTwxWVTr2k33HAzqEUXrhfqjuIVPLo92+xR1rTo1zuPyHN9jvk7jg/5LgBrMVxMasaRiu0VQnPC/Dj2cXTxcXPyx4vjg/d1ihyyRD6wLT/8GPPtou51xgHg9EYRGHIUM/bI12izKbXKP9Nm8rbE3nfZEnbhUxj5KlAkQrkSYxUxEjiGCKK8GRfYTseMhHBcf3zISV6BPwLioBmYy852OMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"monitering\"\n        title=\"monitering\"\n        src=\"/static/08869197813c78e79d7144c02f008d81/37523/monitering.png\"\n        srcset=\"/static/08869197813c78e79d7144c02f008d81/e9ff0/monitering.png 180w,\n/static/08869197813c78e79d7144c02f008d81/f21e7/monitering.png 360w,\n/static/08869197813c78e79d7144c02f008d81/37523/monitering.png 720w,\n/static/08869197813c78e79d7144c02f008d81/302a4/monitering.png 1080w,\n/static/08869197813c78e79d7144c02f008d81/0d98f/monitering.png 1276w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위와 같은 메세지 포맷을 사용하면 다음과 같이 슬랙에 메세지가 전송될 것이다.<br></p>\n<br>\n<p>이를 통해 Latency 측정, Error 모니터링 등 상황에 맞게 여러 방면으로 실시간 서버 모니터링이 가능하니, 활용만 잘 하면 될 듯 하다.<br></p>\n<br>\n<h2 id=\"-참고-자료\" style=\"position:relative;\"><a href=\"#-%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\" 참고 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📚 참고 자료</h2>\n<blockquote>\n<p>Sending messages using Incoming Webhooks</p>\n</blockquote>\n<ul>\n<li><a href=\"https://api.slack.com/messaging/webhooks\">https://api.slack.com/messaging/webhooks</a></li>\n</ul>\n<br>\n<blockquote>\n<p>Slack Webhook API 생성하기</p>\n</blockquote>\n<ul>\n<li><a href=\"https://jojoldu.tistory.com/552\">https://jojoldu.tistory.com/552</a></li>\n</ul>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EF%B8%8F-error-handling\">✍️ Error Handling</a></li>\n<li><a href=\"#-%EC%8A%AC%EB%9E%99%EB%B4%87%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-error-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81\">🤖 슬랙봇을 이용한 Error 모니터링</a></li>\n<li><a href=\"#-%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\">📚 참고 자료</a></li>\n</ul>\n</div>","excerpt":"서버를 운영하다 보면, 예상치 못한 문제에 직면할 때가 많을 것이다.\n서버가 죽는다던지, 특정 로직에서 오류가 발생하는 등 하루종일 서버를 관찰하지 않는 이상 즉각적인 대응은 힘들 것이다.\n이런 를 대응하기 위해 Slack을 모니터링 알림으로 사용해 보고자 한다. Slack web hook을 이용해야 해서 다음 글을 참고하면 도움이 될 듯 하다. Slack Webhook API 생성하기 Sending messages using Incoming Webhooks 예시를 위해 일부러 Error를 throw 했는데, 직접 핸들링 하는 Error가 아니라 , ,  등 당장 처리할 수 없는 Error에 대해 모니터링 프로세스를 통해 빠른 대응으로 안정적인 서비스를 운영할 수 있어야 한다. ✍️ Error Handling 모니터링 프로세스를 놓던, 로깅을 하던 일단 에러에 대해 Handling 할 수 있어야 한다.\n단에서 지원하는 Filter가 있다면 상관없지만, 싱글 스레드로 동작하는 Node…","frontmatter":{"date":"October 09, 2022","title":"Slack을 서버 오류 알림으로 사용해 보자","categories":"Node.js 기타","author":"seongsu","emoji":"1️⃣6️⃣"},"fields":{"slug":"/skill/slack-monitering/"}},"next":{"id":"98902d3c-e3ed-5e39-b45b-d44536d6e2b1","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 710px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB24rCw4Ff/8QAGBABAQEBAQAAAAAAAAAAAAAAAQARAiH/2gAIAQEAAQUC7bXZNg9v/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFRABAQAAAAAAAAAAAAAAAAAAECH/2gAIAQEABj8Ca//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhMUH/2gAIAQEAAT8hQoIH67xwQoWQNq3j/9oADAMBAAIAAwAAABAbz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABYRAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAgEBPxA1n//EAB0QAQEAAQQDAAAAAAAAAAAAAAERIQAQMUFhkfD/2gAIAQEAAT8QrkLVVkD496xlVRDtLBOguycicj3oaOTC+Djb/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"network\"\n        title=\"network\"\n        src=\"/static/408ba28e91466c8a84f92f994d4d1866/67e9d/network.jpg\"\n        srcset=\"/static/408ba28e91466c8a84f92f994d4d1866/4ec73/network.jpg 180w,\n/static/408ba28e91466c8a84f92f994d4d1866/158ba/network.jpg 360w,\n/static/408ba28e91466c8a84f92f994d4d1866/67e9d/network.jpg 710w\"\n        sizes=\"(max-width: 710px) 100vw, 710px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"-개요\" style=\"position:relative;\"><a href=\"#-%EA%B0%9C%EC%9A%94\" aria-label=\" 개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐽 개요</h2>\n<br>\n<p>프랑스에서 3초마다 데이터를 받아와 Slack으로 최신 데이터를 제공해주는 서비스를 운영중인데, 평균 2-3초의 <code class=\"language-text\">Latency</code>가 있었다.<br></p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">프랑스 API 서버 -> AWS Seoul Region -> 데이터 가공 -> Slack</code></pre></div>\n<br>\n<p>위와 같은 Flow로 데이터가 이동하였는데 아무리 프랑스에서 데이터가 전송된다 해도, 말이 평균이지 최소 2초의 지연시간은 발생하였다.<br></p>\n<blockquote>\n<p>10초가 넘어가는 경우도 가끔 있었다.</p>\n</blockquote>\n<p>이렇게 불안정한 환경으로 서버를 운영하는 것은 서비스 질적으로 최악이라 판단해서 서버 운영 1주년을 기념해 <code class=\"language-text\">서버 최적화</code>를 기획하게 되었다.<br></p>\n<br>\n<h2 id=\"-최적화-방법을-떠올려-보자\" style=\"position:relative;\"><a href=\"#-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%B0%A9%EB%B2%95%EC%9D%84-%EB%96%A0%EC%98%AC%EB%A0%A4-%EB%B3%B4%EC%9E%90\" aria-label=\" 최적화 방법을 떠올려 보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎨 최적화 방법을 떠올려 보자</h2>\n<br>\n<p>일단 데이터 Flow를 기준으로 <code class=\"language-text\">프랑스에서 데이터를 받아오는 부분</code>, <code class=\"language-text\">데이터 가공하는 부분</code>, <code class=\"language-text\">데이터를 Slack으로 전송하는 부분</code> 총 3가지를 트랜잭션으로 묶었고, 로깅을 진행했다.<br></p>\n<br>\n<h3 id=\"-범인은-api-응답이-늦어서-였다\" style=\"position:relative;\"><a href=\"#-%EB%B2%94%EC%9D%B8%EC%9D%80-api-%EC%9D%91%EB%8B%B5%EC%9D%B4-%EB%8A%A6%EC%96%B4%EC%84%9C-%EC%98%80%EB%8B%A4\" aria-label=\" 범인은 api 응답이 늦어서 였다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📄 범인은 API 응답이 늦어서 였다.</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA9ElEQVQoz5WRR47EMAwE/RvnAOec4/8fxEUR0AIz8GUOAt2kukha1jAM0nWdjOMo0zQJuigKqapK0jRVvSyL1o7jkG3b5DxP9VzXpTVy+Ou6Fqvve2nbVo0k0d/AeZ61tu+7rOuqEQ9ggORogMfiIoIJOOiyLLVblmWqMQAFAIxJAd73rTU0918nfFsZmFkZCNCmabQBa6Opw/l5ZQBMBZAGBohPJ3x7FLPy96MwkZkKABFNQ7T+QwMhaYwAmSDPc83zitSe51EIkXtEfoFhMJTl+75wgiCQMAw1Oo4jruuKbdsf+TiO/w+eJEkkiiL99jxPzx8mZQ/Vb8tf6QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"api log\"\n        title=\"api log\"\n        src=\"/static/7e7252af2f0e9110cc62feb86b188e56/37523/api_log.png\"\n        srcset=\"/static/7e7252af2f0e9110cc62feb86b188e56/e9ff0/api_log.png 180w,\n/static/7e7252af2f0e9110cc62feb86b188e56/f21e7/api_log.png 360w,\n/static/7e7252af2f0e9110cc62feb86b188e56/37523/api_log.png 720w,\n/static/7e7252af2f0e9110cc62feb86b188e56/302a4/api_log.png 1080w,\n/static/7e7252af2f0e9110cc62feb86b188e56/6be49/api_log.png 1160w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>프랑스에서 한국까지 API를 받아오는데 <code class=\"language-text\">평균 1,550ms</code> 정도를 기록했고, 데이터 가공은 <code class=\"language-text\">평균 200ms</code> 미만, slack 전송은 <code class=\"language-text\">평균 300ms</code> 정도였다.<br></p>\n<br>\n<h3 id=\"-latency를-줄이기-위한-방법\" style=\"position:relative;\"><a href=\"#-latency%EB%A5%BC-%EC%A4%84%EC%9D%B4%EA%B8%B0-%EC%9C%84%ED%95%9C-%EB%B0%A9%EB%B2%95\" aria-label=\" latency를 줄이기 위한 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤟🏻 Latency를 줄이기 위한 방법</h3>\n<br>\n<p><code class=\"language-text\">Latency</code>를 줄이겠다고 서버 데이터 가공 로직을 최적화 하는건 한계가 있을 것이다.<br>\n그래서 최적화는 그대로 하되, 데이터를 받아오는 지역 자체를 프랑스로 옮기고, 데이터가 한국으로 전달되는 부분은 Slack의 데이터 전송 기술을 믿으면 더 효율적인 최적화 방법이 될 것 같았다.<br></p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABCElEQVQoz4WSWW6EQAxE5zqITSzN3uyLuP+BPHqOPCGKlHy0ENX2c5Xh1XWd9H0v3ntZlkXKspSqqiTPc9WnaZJhGGRdVz3UtG2rOu/7vss8z6olSSIvioGN46gFwAyIjkYDjcdxyHmeH533+771Di1N0y8gB+C2beKck7qupSgK8X5QR7ihyaDm2AbYEHVokQHS7NzvyObIoMTDNQau61INThRF30BrwuETSKPdAeA8gbgDSG0cx3/v0KLZDgFQh04aIvOkBmNhGP63Q/9jh9w/VwDQvvxnh1gFaL+BAXFINIoZZkBqng7R0ahVh8QD0DSNTsmyTGHsA5cMtDtARDPdNAbCCIJA3g/FMwda6jZKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"paris latency\"\n        title=\"paris latency\"\n        src=\"/static/1c5ce77c191b02a74e3093eec0767f7d/37523/paris_log.png\"\n        srcset=\"/static/1c5ce77c191b02a74e3093eec0767f7d/e9ff0/paris_log.png 180w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/f21e7/paris_log.png 360w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/37523/paris_log.png 720w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/302a4/paris_log.png 1080w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/11b93/paris_log.png 1124w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그러기 위해 일단 <code class=\"language-text\">AWS Region</code>을 Paris로 옮겼는데, 어머나.. <code class=\"language-text\">Latency</code>가 1/10 이상 줄어들었다.<br></p>\n<br>\n<p>사실 이렇게 많이 줄어들 줄 몰랐는데, 프랑스에서 한국까지 데이터가 전송되는데 많은 <code class=\"language-text\">Router</code>를 거치며 지연시간이 늘어났나 보다.<br></p>\n<br>\n<p>여기에 데이터 가공 로직까지 최적화 한다면, 유의미한 결과가 나올 것 같았다.<br>\n원래는 <code class=\"language-text\">Event</code>, <code class=\"language-text\">Exam</code>으로 나눠진 두개의 데이터를 하나의 프로세스에서 비동기로 처리하고 있었다.<br>\n이 두개를 각 프로세스에서 돌릴수 있게 <code class=\"language-text\">Interface 코드</code>를 짜고, 환경변수로 <code class=\"language-text\">Event</code>, <code class=\"language-text\">Exam</code> 프로세스를 분리했다. 그 뒤, Webpack을 이용해 <code class=\"language-text\">Interface 코드</code>를 번들링 하였고 각 프로세스를 실행시켰다.<br></p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 117.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADE0lEQVQ4y42UiY6bSBRF8/+fN6NksrQ7NjZgDJjaNyjOiHK3085MJynpSZbRu/WWe+rDmiK6jzSVxhhPXiClGe89y7IQQiiR5pllybw967rFeo/tfFhfPjaDY99pBmGo2is5ryUhr6/Jt6Q05/LtJr7+dMHKh1fl8xQ4tBN127FrNB8PosTXk0Joz5fvLX99rviyO/LpW8W3auAyObRLxJjIOb9UuEIIHmEirQjMS0bZxKAiwkYmGwkpMQhLiBExjUgpkW6hl4nuanHOlfG8CK5lRnPIWJkYxhEpBMYlnMyofkGOnnHs6SfDZGaU8VxGibP2/ZadXugqz2Ff0Z67crNREaczziaMMWgbMH7G+VhEvQ8Pi7lXuMU2fD9Ipu972vOFYZQMk+LQDPSTZpKO0/nK6Tzyz66makc+P7d8eqrZn3qM9bcKt029qhujqOsjShr6ViOkQttUhHbVhfOgEMpQN2eUCdTdxK7qmIT60fLrj+1sHowO5rjivGeeZ2II5JeB/8m5z9A6h1UJcZkxYmYcryilmIQoW3zrxV/FXTBET87vV/I7oTctr1iRGTtLTOkh+UbCemPsN5c82GZd4NRZDht6k+Z0npiXhbyuLK8I5lxMvywrc8Ev/0f8YYYbevtmou16nmpVkNviuTUoE8uWvzy3PO0bPu9OPJ/GQpQL26MxP1aYUmRUgePgCHFmUoFm9FyE5yI9xgeai0RqS9edy8IuIlD1ju5qsNa+GJybbbYN53kluaVs1llDTAvJrTiRsSoWj27eMyHjfGISmmVO77ds1Uyz9zw9f+fUtDSDRctI0GBkQEqB0O4FvcAkLetPc3xEL0McFfZYc+l7xOZB7dgdO6wPXMbbwjYy9vVI1Yz8/fXE8/FSiHGF65/Q01pxOh4Qk6arFddpqypwbK98259pe8lwVVTHulR7qAe+7s8FvQdjvwrOKWNUIvoFY+zt+Y+x+POtN99a5odf37BcSAkep2dkv2DkDT2tNdP0A72HJ39d/9+HWxWlXWPur+57VPwKwXuFMcb7H3+S8LvX5l/ZDP0FJ5rWpwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"before\"\n        title=\"before\"\n        src=\"/static/8e63bdb493533085b8a512001696184d/37523/before.png\"\n        srcset=\"/static/8e63bdb493533085b8a512001696184d/e9ff0/before.png 180w,\n/static/8e63bdb493533085b8a512001696184d/f21e7/before.png 360w,\n/static/8e63bdb493533085b8a512001696184d/37523/before.png 720w,\n/static/8e63bdb493533085b8a512001696184d/6d2da/before.png 936w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>최적화 전 코드</p>\n</blockquote>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB30lEQVQ4y42SjW7jIBCE8/7Pd1epl9RJ6r/YgAEb22BjviqOWt1Vd9eutCBWaHZ2Zw6r6gjnM6MOiGJF31Z0G/FTILxkeCFRpqfRE9M08XuklPgch3sxVDXLrSHPS17zgq7THE8nrHVUdU1daGQ9c61ans8NUmm2Lf4V9HA/Qn3bQa+vOa0QVFVFKxRCacryhqoi11zwkkuEMsS4/pPl4f4MRUmsauq64ng8cblceckypO6Zipo2Kzidz/x4euZ8uVJVNTH+h+E0TGS55lxbbm3H6VLjnCOlDWIkrYFpnnFuZJpm5tmzbdsO9jl3QOcjz6WjUT1CSLLKUnfznjftkb3nu/Fg6CNPV8upNEilKNqenxfLr+J+G46lZZw82WuL6AaaVuziCSkp5UTRDgyDw3v/UFkaixgW+vmxj9mvGJ8YV5hCYgyJmCLKDoxzYFkW+mHYbeRCQg+BEB71XRSTF2xdhzV6V3n2gU2pPa01WGMYzcZsobdu/3OfREqFEC1xXf70IW4gDRbTa7TRrDGxaUPUGmN7us7gTKTvItY4mqZ5gEq1j38f9V3xxw4dWJ0YNbuZhRCYYWDj+/Fun4P3gb4L9HLFihUpur27kop1WT4+f5UfDO9+21L8svN3bfMG34XtVtxQneAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"after\"\n        title=\"after\"\n        src=\"/static/10cee15dfd59b81b14ed859eeecafe59/37523/after.png\"\n        srcset=\"/static/10cee15dfd59b81b14ed859eeecafe59/e9ff0/after.png 180w,\n/static/10cee15dfd59b81b14ed859eeecafe59/f21e7/after.png 360w,\n/static/10cee15dfd59b81b14ed859eeecafe59/37523/after.png 720w,\n/static/10cee15dfd59b81b14ed859eeecafe59/f3c12/after.png 764w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>최적화 후 코드</p>\n</blockquote>\n<br>\n<p>두 코드를 보았을 때, <code class=\"language-text\">선언형</code>, <code class=\"language-text\">추상화</code>에 초점을 맞춰 리팩토링을 진행하니 확실히 코드의 가독성이 좋아졌다.<br>\nNode.js의 <code class=\"language-text\">모듈 캐싱 전략</code>을 적절히 활용하여 <code class=\"language-text\">DI</code>를 적용한 것도 가독성에 한몫 했다고 보이는 것 같다.<br></p>\n<br>\n<h3 id=\"️-대기업-플랫폼을-이용한-최적화-전략-먹혔나\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EB%8C%80%EA%B8%B0%EC%97%85-%ED%94%8C%EB%9E%AB%ED%8F%BC%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%B5%9C%EC%A0%81%ED%99%94-%EC%A0%84%EB%9E%B5-%EB%A8%B9%ED%98%94%EB%82%98\" aria-label=\"️ 대기업 플랫폼을 이용한 최적화 전략 먹혔나 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>☂️ 대기업 플랫폼을 이용한 최적화 전략.. 먹혔나?</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 576px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA5UlEQVQY022Qy26CUBRF+RUFi0opcrm8H8oj0NZqKIqmjkxHHfQ7OuhPrwbS2EkHKytnsnP2VoT0GQjjDCEDvCDGCxL8MBl9N7/Hsl2slUSdLZhq85v/Q9mUNXnVkGQFQZQRpzlRskF6IdKLMC2Hqn4mXZdj+ETVb6F/LNF0Y7SifXyhxw2HtqOoHqmbLe1rT7oueNru2e078rKmP1/ojmeOpzf604W269m1B67Xd0RcoH9+M8teUKayQDclwvEwTBvTEmPFYQbXj7FsOd5DfdvxcGTAw8rB/f1+mGhhWEycHHUp+AEpW4QxiTsxvgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"paris result\"\n        title=\"paris result\"\n        src=\"/static/19b644c05c508ac558c4bbb1fbeb5ad0/533c1/paris_result.png\"\n        srcset=\"/static/19b644c05c508ac558c4bbb1fbeb5ad0/e9ff0/paris_result.png 180w,\n/static/19b644c05c508ac558c4bbb1fbeb5ad0/f21e7/paris_result.png 360w,\n/static/19b644c05c508ac558c4bbb1fbeb5ad0/533c1/paris_result.png 576w\"\n        sizes=\"(max-width: 576px) 100vw, 576px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>Paris Region 서버 Slack 응답 로그</p>\n</blockquote>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 580px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6klEQVQY023Qy1LCQBSE4byJ4giSoIaEZMhMmNwI4C0lKCVgQIuVGx/Et/6tGnXnohe9+arPcRJtUGmOyacEozGpKRnFiqKc4Qcx3uXQ9kgq+t41HXGB6Lqcnff/jVPNbixYVnOiWFlQJimTrMId+AxDSV7WNoOrgJNO16J/wA/uInoeoufiiHLJYlrTLJ8xecXLtqWe32KyisfVmodmRWoK2v07T+sNu/aNzW7P9vVAVS9oD0ea+wax+sD7/MLpDTVSKvxQEkZje3YstV2t0gyZTAijxC6PpCZRxnals98XFcix5tTXCH3HN7HbhcEayBiqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"seoul result\"\n        title=\"seoul result\"\n        src=\"/static/57a9c0e30110ec54ed9b7f0637abe342/b6272/seoul_result.png\"\n        srcset=\"/static/57a9c0e30110ec54ed9b7f0637abe342/e9ff0/seoul_result.png 180w,\n/static/57a9c0e30110ec54ed9b7f0637abe342/f21e7/seoul_result.png 360w,\n/static/57a9c0e30110ec54ed9b7f0637abe342/b6272/seoul_result.png 580w\"\n        sizes=\"(max-width: 580px) 100vw, 580px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>Seoul Region 서버 Slack 응답 로그</p>\n</blockquote>\n<br>\n<p>결과를 보니 확연한 차이가 있었다. Paris로 Region을 이전한 것, 서버 프로세스 최적화를 진행한 것 이 두개의 효율이 잘 나와 <code class=\"language-text\">700ms의 Latency</code>를 줄이게 되었다.<br></p>\n<br>\n<h2 id=\"-뱀의-머리보단-용의-꼬리가-낫다\" style=\"position:relative;\"><a href=\"#-%EB%B1%80%EC%9D%98-%EB%A8%B8%EB%A6%AC%EB%B3%B4%EB%8B%A8-%EC%9A%A9%EC%9D%98-%EA%BC%AC%EB%A6%AC%EA%B0%80-%EB%82%AB%EB%8B%A4\" aria-label=\" 뱀의 머리보단 용의 꼬리가 낫다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐍 뱀의 머리보단 용의 꼬리가 낫다</h2>\n<br>\n<p>확실히 직접 통신 비용을 줄이려는 노력을 하기보단, 이미 구축되어있는 플랫폼의 기술을 이용하는 것이 좋은 방법인 듯 하다.<br>\n이로써 최종 2,000ms -> 1,300ms로 35%의 통신 비용을 단축할 수 있었다.<br></p>\n<br>\n<p>다만 아쉬운 점은, API 서버가 너무 멀리 있어 아무리 최적화를 해도 800ms 정도 최소한의 통신 비용은 존재하는게 어쩔수 없긴 해도 아쉽긴 하다.<br></p>\n<br>\n<h3 id=\"-그런데-왜-줄이려는-시도를-하는-것인가\" style=\"position:relative;\"><a href=\"#-%EA%B7%B8%EB%9F%B0%EB%8D%B0-%EC%99%9C-%EC%A4%84%EC%9D%B4%EB%A0%A4%EB%8A%94-%EC%8B%9C%EB%8F%84%EB%A5%BC-%ED%95%98%EB%8A%94-%EA%B2%83%EC%9D%B8%EA%B0%80\" aria-label=\" 그런데 왜 줄이려는 시도를 하는 것인가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>❓ 그런데 왜 줄이려는 시도를 하는 것인가?</h3>\n<br>\n<p>제일 중요한게 <code class=\"language-text\">Why?</code> 인데 설명을 안해서 마지막에 하려한다.<br></p>\n<br>\n<p>42 교육과정에서 선착순으로 진행되는 행사의 알림을 실시간으로 해주는 서버를 운영중이라 빠른 알림이 필요했다. 하지만 2,000ms는 너무 느린 속도여서 ”<strong>조금이라도 단축할 수 있지 않을까?</strong>“라는 생각이 들었고, 이김에 과거에 작성한 쪽팔린(?) 코드를 고치는 것이 목표였다.<br></p>\n<br>\n<p>여튼 기획에 맞게 단축이 되긴 해서 다행이고, 오래전에 짠 더러운 코드를 싹다 고쳐서 묵은 때를 벗기는 느낌이 들어 굉장히 기분이 좋았다.<br></p>\n<br>\n<h2 id=\"-github-주소\" style=\"position:relative;\"><a href=\"#-github-%EC%A3%BC%EC%86%8C\" aria-label=\" github 주소 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📚 Github 주소</h2>\n<ul>\n<li><a href=\"https://github.com/nfl1ryxditimo12/42Notifier\">https://github.com/nfl1ryxditimo12/42Notifier</a></li>\n</ul>\n<br/>\n<br/>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EA%B0%9C%EC%9A%94\">🐽 개요</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%B0%A9%EB%B2%95%EC%9D%84-%EB%96%A0%EC%98%AC%EB%A0%A4-%EB%B3%B4%EC%9E%90\">🎨 최적화 방법을 떠올려 보자</a></p>\n<ul>\n<li><a href=\"#-%EB%B2%94%EC%9D%B8%EC%9D%80-api-%EC%9D%91%EB%8B%B5%EC%9D%B4-%EB%8A%A6%EC%96%B4%EC%84%9C-%EC%98%80%EB%8B%A4\">📄 범인은 API 응답이 늦어서 였다.</a></li>\n<li><a href=\"#-latency%EB%A5%BC-%EC%A4%84%EC%9D%B4%EA%B8%B0-%EC%9C%84%ED%95%9C-%EB%B0%A9%EB%B2%95\">🤟🏻 Latency를 줄이기 위한 방법</a></li>\n<li><a href=\"#%EF%B8%8F-%EB%8C%80%EA%B8%B0%EC%97%85-%ED%94%8C%EB%9E%AB%ED%8F%BC%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%B5%9C%EC%A0%81%ED%99%94-%EC%A0%84%EB%9E%B5-%EB%A8%B9%ED%98%94%EB%82%98\">☂️ 대기업 플랫폼을 이용한 최적화 전략.. 먹혔나?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%B1%80%EC%9D%98-%EB%A8%B8%EB%A6%AC%EB%B3%B4%EB%8B%A8-%EC%9A%A9%EC%9D%98-%EA%BC%AC%EB%A6%AC%EA%B0%80-%EB%82%AB%EB%8B%A4\">🐍 뱀의 머리보단 용의 꼬리가 낫다</a></p>\n<ul>\n<li><a href=\"#-%EA%B7%B8%EB%9F%B0%EB%8D%B0-%EC%99%9C-%EC%A4%84%EC%9D%B4%EB%A0%A4%EB%8A%94-%EC%8B%9C%EB%8F%84%EB%A5%BC-%ED%95%98%EB%8A%94-%EA%B2%83%EC%9D%B8%EA%B0%80\">❓ 그런데 왜 줄이려는 시도를 하는 것인가?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-github-%EC%A3%BC%EC%86%8C\">📚 Github 주소</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 08, 2022","title":"프랑스 - 한국 간 Latency 단축 전략","categories":"네트워크 회고","author":"seongsu","emoji":"1️⃣5️⃣"},"fields":{"slug":"/skill/latency-strategy/"}},"prev":{"id":"59114fc8-1a5f-5a0a-9e9b-bd4dedbe41de","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAFl6PuKZID/xAAZEAEBAAMBAAAAAAAAAAAAAAACAQADERL/2gAIAQEAAQUCSgfqWXmNWM7EZVe//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BV//EABkQAQADAQEAAAAAAAAAAAAAAAEAECECQv/aAAgBAQAGPwICY0zlPTtf/8QAGhAAAwEBAQEAAAAAAAAAAAAAAAERITFRgf/aAAgBAQABPyH7yFyGdNRYKQcx20NNfT//2gAMAwEAAgADAAAAEMsf/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QR//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EKP/xAAbEAEAAwEBAQEAAAAAAAAAAAABABEhMUFhcf/aAAgBAQABPxBmxLpOlzWlNj0/SHpQpK+XQVhvkFIoAPtZMDKUt6z/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ai\"\n        title=\"ai\"\n        src=\"/static/2c200941e383da7ff07a2a95b440dde3/80e3c/ai.jpg\"\n        srcset=\"/static/2c200941e383da7ff07a2a95b440dde3/4ec73/ai.jpg 180w,\n/static/2c200941e383da7ff07a2a95b440dde3/158ba/ai.jpg 360w,\n/static/2c200941e383da7ff07a2a95b440dde3/80e3c/ai.jpg 720w,\n/static/2c200941e383da7ff07a2a95b440dde3/4b190/ai.jpg 800w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"-자연어-처리nlp-란\" style=\"position:relative;\"><a href=\"#-%EC%9E%90%EC%97%B0%EC%96%B4-%EC%B2%98%EB%A6%ACnlp-%EB%9E%80\" aria-label=\" 자연어 처리nlp 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤖 자연어 처리(NLP) 란</h2>\n<br>\n<p>인간의 언어 현상을 컴퓨터와 같은 기계를 이용해서 묘사할 수 있도록 연구하고 이를 구현하는 인공지능의 주요 분야 중 하나다. 자연 언어 처리는 연구 대상이 언어 이기 때문에 당연하게도 언어 자체를 연구하는 언어학과 언어 현상의 내적 기재를 탐구하는 언어 인지 과학과 연관이 깊다. 구현을 위해 수학적 통계적 도구를 많이 활용하며 특히 기계학습 도구를 많이 사용하는 대표적인 분야이다. 정보검색, QA 시스템, 문서 자동 분류, 신문기사 클러스터링, 대화형 Agent 등 다양한 응용이 이루어지고 있다.</p>\n<blockquote>\n<p>[출처] <a href=\"https://ko.wikipedia.org/wiki/%EC%9E%90%EC%97%B0%EC%96%B4_%EC%B2%98%EB%A6%AC\">Wikipedia</a></p>\n</blockquote>\n<br>\n<p>쉽게 설명하자면, 인간이 일상에서 사용하는 언어를 컴퓨터에서도 자연스럽게 묘사할 수 있게 만드는 기술이다.<br></p>\n<br>\n<p>하지만 꼭 <code class=\"language-text\">자연어 처리</code>만으로 컴퓨터에서 자연어를 나타낼 수 있는것이 아니라 <code class=\"language-text\">Human Intelligence</code>를 통해서도 자연어를 구현할 수 있다.<br></p>\n<blockquote>\n<p>우리 개발자님이 마법을 부려 주실거야</p>\n</blockquote>\n<br>\n<h3 id=\"-ai-기술-없이-문장화가-가능할까\" style=\"position:relative;\"><a href=\"#-ai-%EA%B8%B0%EC%88%A0-%EC%97%86%EC%9D%B4-%EB%AC%B8%EC%9E%A5%ED%99%94%EA%B0%80-%EA%B0%80%EB%8A%A5%ED%95%A0%EA%B9%8C\" aria-label=\" ai 기술 없이 문장화가 가능할까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 AI 기술 없이 문장화가 가능할까?</h3>\n<br>\n<p>한글이 웹 상에서 보여지는 것에도 공통된 <code class=\"language-text\">Protocol</code>이 있기 때문이다.<br></p>\n<br>\n<p>이런 <code class=\"language-text\">Protocol</code>을 이용하면 한글이 저장된 방식을 이해할 수 있고, 그에 맞게 단어 간 초성, 중성, 종성을 비교 후 <code class=\"language-text\">조사</code>, <code class=\"language-text\">종결 어미</code>를 추가해 문장화를 구현할 수 있을 것이다.<br></p>\n<br>\n<h3 id=\"-표준-문자-처리-방식-unicode\" style=\"position:relative;\"><a href=\"#-%ED%91%9C%EC%A4%80-%EB%AC%B8%EC%9E%90-%EC%B2%98%EB%A6%AC-%EB%B0%A9%EC%8B%9D-unicode\" aria-label=\" 표준 문자 처리 방식 unicode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🚏 표준 문자 처리 방식, Unicode</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABrUlEQVQoz2WQbW/TMBSF82/Q1rzavk6ctybZWtI2BSGN8TJWNA2kFTE+8P+lB8VbhxAfHl37yOf46AZHcTy6mh/WcTQFDyZn1uY589j2/FwO/BpW/F6NHOX0puBBP80XzRQEn1zF9+2ea5tzU7fcrUbeG8uhG7hbrblSmq/9wKHr+Whz7scNt93Ah7zgftzyuW483zYTt8uOYFctOex3bMslb9qew35i41quViM3u4nRtVyPW39eiePdsGZqejZly5dp4uryNbu643ba8ba7IEiVwYoiUUKmtOc8EbRWGKNJtUFpRZgazmIhMSWJdryKZl9Gop70oqyJspygLTTNM32lSVIhSoTLWtGVmr5U1IX22swiVCwiTZwISglxotFSMVxssEVD4KzGWUNhDVWuEWMw2viQmfl+FglRKoSJkGlHqgrC2BDG4olTi9ja68Gp3WyOU/FhVgx9NTdUzB+ex0/t5hDJa4ytfUvfONJI3rAe95R1T1DlhvKZNBPftikMjdOeXAyL2BKl9iV05rSCl1VE2uuBk4wTSaooJKPO/2JNxlmoWcTam/5F/af9AXKcLwJl2vyUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"unicode\"\n        title=\"unicode\"\n        src=\"/static/61545a33d99d3b32a7a94e89895911e1/37523/unicode.png\"\n        srcset=\"/static/61545a33d99d3b32a7a94e89895911e1/e9ff0/unicode.png 180w,\n/static/61545a33d99d3b32a7a94e89895911e1/f21e7/unicode.png 360w,\n/static/61545a33d99d3b32a7a94e89895911e1/37523/unicode.png 720w,\n/static/61545a33d99d3b32a7a94e89895911e1/302a4/unicode.png 1080w,\n/static/61545a33d99d3b32a7a94e89895911e1/07a9c/unicode.png 1440w,\n/static/61545a33d99d3b32a7a94e89895911e1/7ca1f/unicode.png 1890w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>[출처] <a href=\"https://namu.wiki/w/%EC%9C%A0%EB%8B%88%EC%BD%94%EB%93%9C#s-4.1\">유니코드 문자 규칙</a></p>\n</blockquote>\n<br>\n<p>유니코드 컨소시엄(Unicode Consortium)에서 제정, 관리하는 <code class=\"language-text\">Unicode</code>는 세계의 모든 문자를 다루도록 설계된 표준 문자 전산 처리 방식이다.<br></p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">초창기에는 문자 코드는 ASCII의 로마자 위주 코드였고, 1바이트의 남은 공간에 각 나라가 자국 문자를 할당하였다.\n하지만 이런 상황에서 다른 국가에 이메일을 보냈더니 글자가 와장창 깨졌던 것.\n인터넷 웹페이지도 마찬가지였다.\n이에 따라 4바이트(32비트, 약 42억 자)의 넉넉한 공간에 세상의 모든 문자를 할당한 결과물이 이것이다.\n\n현재의 유니코드는 지구상에서 통용되는 대부분의 문자들을 담고 있다.\n여기에는 언어를 표기할 때 쓰는 문자는 물론, 악보 기호, 이모지, 태그, 마작이나 도미노 기호 같은 것들도 포함된다.</code></pre></div>\n<blockquote>\n<p>[출처] <a href=\"https://namu.wiki/w/%EC%9C%A0%EB%8B%88%EC%BD%94%EB%93%9C#s-1\">유니코드 개요</a></p>\n</blockquote>\n<br>\n<p>이런 방식으로 한글도 문자 전산 처리 규칙에 따라 처리되고 있으며<br>\n1991년 유니코드에 한글이 최초로 등록되었고, 이후 수정과 수정을 거쳐 현재 4,306개의 한글 문자가 등록되어 있다.<br></p>\n<br>\n<h2 id=\"-unicode를-이용한-단어간-문장화\" style=\"position:relative;\"><a href=\"#-unicode%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%8B%A8%EC%96%B4%EA%B0%84-%EB%AC%B8%EC%9E%A5%ED%99%94\" aria-label=\" unicode를 이용한 단어간 문장화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤩 Unicode를 이용한 단어간 문장화</h2>\n<br>\n<p>유니코드를 통해 한글 글자에 맞게 저해진 규칙이 있으니, 이 것을 파헤쳐 보며, 문장화를 구현해 보면 될 것이다.<br>\n그러기 위해 <code class=\"language-text\">JavaScript</code>를 이용하여 문장화를 구현할 것이고, 다행히도 <code class=\"language-text\">JavaScript String</code> 내부 함수로 <code class=\"language-text\">charCodeAt()</code>라는 문자열을 유니코드로 변환시켜주는 함수가 존재했다.<br></p>\n<br>\n<h3 id=\"1️⃣-charcodeat\" style=\"position:relative;\"><a href=\"#1%EF%B8%8F%E2%83%A3-charcodeat\" aria-label=\"1️⃣ charcodeat permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1️⃣ charCodeAt()</h3>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"가\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">charCodeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">></span> <span class=\"token number\">44032</span></code></pre></div>\n<br>\n<p>”<strong>가</strong>“에 대한 유니코드 분석을 위해 <code class=\"language-text\">charCodeAt()</code>함수에 문자열의 0번째 인덱스를 집어넣어 보니 <code class=\"language-text\">44032</code>라는 응답값이 나왔다.<br></p>\n<br>\n<p>그럼 ”<strong>ㄱ</strong>“과 ”<strong>ㅏ</strong>“가 합쳐진 값이 <code class=\"language-text\">44032</code>일까?</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ㄱ\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">charCodeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ㅏ\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">charCodeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">></span> <span class=\"token number\">12593</span>\n<span class=\"token operator\">></span> <span class=\"token number\">12623</span></code></pre></div>\n<blockquote>\n<p>엥.. 아니네?</p>\n</blockquote>\n<br>\n<p>이런 결과로 ”<strong>ㄱ</strong>”, ”<strong>ㅏ</strong>”, ”<strong>가</strong>“는 유니코드 상 다른 위치에 저장되어 있다는 것을 알 수 있고, 모음과 자음으로 모든 경우의 수로 나타낼 수 있는 <code class=\"language-text\">하나의 단어가</code> 유니코드에 총 4,306개로 저장되어 있는 것을 추측할 수 있다.<br></p>\n<br>\n<h3 id=\"2️⃣-유니코드에-초성-중성-종성이-저장된-규칙\" style=\"position:relative;\"><a href=\"#2%EF%B8%8F%E2%83%A3-%EC%9C%A0%EB%8B%88%EC%BD%94%EB%93%9C%EC%97%90-%EC%B4%88%EC%84%B1-%EC%A4%91%EC%84%B1-%EC%A2%85%EC%84%B1%EC%9D%B4-%EC%A0%80%EC%9E%A5%EB%90%9C-%EA%B7%9C%EC%B9%99\" aria-label=\"2️⃣ 유니코드에 초성 중성 종성이 저장된 규칙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2️⃣ 유니코드에 초성, 중성, 종성이 저장된 규칙</h3>\n<br>\n<p>일단 ”<strong>ㄱ</strong>“부터 저장되어있는 한국어의 모든 유니코드를 순회하며 규칙을 찾아볼 예정이다.<br></p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> start <span class=\"token operator\">=</span> <span class=\"token number\">12593</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// \"ㄱ\".charCodeAt(0)</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">,</span> idx</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> word <span class=\"token operator\">=</span> String<span class=\"token punctuation\">.</span><span class=\"token function\">fromCharCode</span><span class=\"token punctuation\">(</span>start <span class=\"token operator\">+</span> idx<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">단어 - </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>word<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, 유니코드 - </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>start<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 609px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACW0lEQVQ4y32US0tyURSG/RHNDMlrWJm3tCyvWQNxIAlqBmKBDRMvZHMnptA0NXUW+JuiP5CICHbRgfrGWl/70FH7DmzO7d3PWutde2/FfD7H4jUej2XvpFnUTSaTBQn/nyvEhI+PD7y/v2MwGODl5YWfR6ORbCIFou/D4RCvr698p/fxeDwXVIUQ5vN5BAIBnJ2d4fLyEuFwGPF4HN1uVwJWq1WcnJwgEokglUohGo0iFAqh2WwycDqd/gN+fn4iFotBqVRid3cXXq8XBoMBTqcT9XpdAuZyOayvr2N7exuHh4esJV2lUpEDv76+kEwmodPpGEJZMNjjxdPTkwS8vb1ljc1mg8/nw97eHkwmE2q12nKGiUQCGo0GdrudxZSFy+WiciRgoVBgjcVigdvtZrDRaMT9/f0ykPzSarUcVQAPDg5kwGKxiI2NDQ7q8Xgk4FLJBDw/P4dOq4XD4eDm7OzssE+/Sy6VSlCr1Qz0+/0cnAKvLFl4uL+/j2AwyEDKotVqyYDCFgLSnXRLQGrKxcUF9Ho9N+U3sN1uS8C7uztsbm6yt8fHxxzcbDbj4eFhdYYEFBlS96jkRqMhAbPZLNbW1nipkI78IwvK5fJyhuQh/SRfKDoBj46OZMDHx0duXiaTwc3NDa6vr5FOp/H8/MzA2WwmXzbCcNFlKp8gP9Hxn0u+lwXw97IhDxeBNGk2my0NiSb2sgCqVCpYrVbu4NbWlmzrCeAfQw4kD6+uriQYHQy0qE9PT9HpdPDjD1YddaJkcVcIcb/fx9vbG3q9Hg96pkHH019n4irgNwnB4JFkllwyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"korean unicode\"\n        title=\"korean unicode\"\n        src=\"/static/c21c317f672c81da43ecdb72456fee8e/d0d8c/unicode_korean.png\"\n        srcset=\"/static/c21c317f672c81da43ecdb72456fee8e/e9ff0/unicode_korean.png 180w,\n/static/c21c317f672c81da43ecdb72456fee8e/f21e7/unicode_korean.png 360w,\n/static/c21c317f672c81da43ecdb72456fee8e/d0d8c/unicode_korean.png 609w\"\n        sizes=\"(max-width: 609px) 100vw, 609px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 코드를 실행하면 자음과 모음의 유니코드를 알 수 있다.<br>\n이렇게 ”<strong>가</strong>“부터 ”<strong>힣</strong>“까지 돌려보면 초성, 중성, 종성이 몇개의 규칙에 따라 바뀌는 지 알 수 있을 것이다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 609px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 101.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACsklEQVQ4y5WUy07bQBSGeZKKBQKlydjGxrHjWy4VpSWRqgYCYtVFNxUvgwpFOGzKA5QCQVUfgvsGnoA6SCQhLJAQJn91hkywSUDtSM6czPzzzZlzzswQAHQ6HYRhiPv7e4hGNo3RnNCIMdEi6zrd/50hsUC0ZrOJRqMRgz/VXF1dcd3d3V1E8sAcot/b21ucnJzg4OAAe3t72N/f59/x8TEuLy/5Clp8dnaGw8PDmObo6Ajn5+ePHpIRBAFM08TIyAgmJiZgWRbGxsa4vbW1xYGtVgvlcplrJElCJpPhfSqVwsrKSqe76QOwXq8jl8vxSdu2kc/nwRiD53mo1Wq9Yy4sLPBxXde5njYk2/d9DgzDMA4kMQHJlhhDNpvtA5JXBKE5AqbTaVSr1X4gCUjsOM4DUJJ4HwXOz89DlmUOEUDTNAZ76LouF5OHJBbebm9vx4C0kWEYPBwE1DQNq6ur/UDyjCCUELIpnpQokRQCzlUqPBRpXYdj21BVFeOKgm9Pk0JZJm8ISNmLAn9GgOVKBa8Zg6rrMB0HsqaBKQq+Li/3Z5mOII4pbPI2euTPc3NwkkkUNA1F20ZBVZGTZax3PQyjwMe4Wb0SIvDu7m4P+GlmBvroKGzG8NYwYFOZJZODgbGy6WY8WjbtdhtfFhdRmJzE+1IJH2dn8a5YxNT0NL5vbAwoG8+Llw1jyOdyPQ/p6rXpDjcaaDWb/OaI/ubmJn71CGi7LpgkwaIYZrM8+BnXRa0LjD4WA1r8cbgIApQsC9lEAiXDwAfKdCKBomnid/fI4ikj8NOvRxMeXtTrmHRdjKdSyDsO3ngeTMYwZVn4tbMTAz7noeg58E8QQFFVvBoehqwoGNc0bqdkGT82N/8feH19DX9tDUtLS7z3fZ/bVd/H6elpL4b/BHxB9OyL/RLwL9g0qrnmVRhFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"section\"\n        title=\"section\"\n        src=\"/static/7b9df7ef2218057327ce5c20535c8d02/d0d8c/section.png\"\n        srcset=\"/static/7b9df7ef2218057327ce5c20535c8d02/e9ff0/section.png 180w,\n/static/7b9df7ef2218057327ce5c20535c8d02/f21e7/section.png 360w,\n/static/7b9df7ef2218057327ce5c20535c8d02/d0d8c/section.png 609w\"\n        sizes=\"(max-width: 609px) 100vw, 609px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>종성은 1개, 중성은 28개, 초성은 588개마다 변하는 것을 알 수 있다.<br></p>\n<br>\n<h3 id=\"3️⃣-종성에-들어오는-자음을-알-수-있는-법\" style=\"position:relative;\"><a href=\"#3%EF%B8%8F%E2%83%A3-%EC%A2%85%EC%84%B1%EC%97%90-%EB%93%A4%EC%96%B4%EC%98%A4%EB%8A%94-%EC%9E%90%EC%9D%8C%EC%9D%84-%EC%95%8C-%EC%88%98-%EC%9E%88%EB%8A%94-%EB%B2%95\" aria-label=\"3️⃣ 종성에 들어오는 자음을 알 수 있는 법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3️⃣ 종성에 들어오는 자음을 알 수 있는 법</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABXUlEQVQoz51S2W7CQAzM//8QhBsSjgQoOcQLuTgUNqgqPKC2SgKZaiyFwltVSyN71157bK/WarUwn8/R6XSwWCyg6zps20aj0YBSR1y/K1w/c/xVNNM04Xk+DMOEZdnodrtwHAeGaSLLFNL3L5w+rijLEkVRIs8LFMUv8mddltCy0wlxHGO32yEIQxyPCkEQIMsyuXOdNyRxhNXKQRRFgjRN4fu+2JsgQBiGkoNJtfv9LlSrqhL8R263m4DvtfP5jMPhgP1+L9hut1KZOkmSF5t+xpJNrS+Xy4OQzJB0x+MxRqMROE8uh+Asm82mLKnX66Hdbouf4Jmai+N4KOxUGLIyt2pZlmgGGoYhGA6HGAwGcseidVxt00f2LwlZoa48mUyECdn1+31hx2/Fh2Q9nU4fDJmUHbDDOqG0rJTCer2G67rwPE/+Yo3ZbCZJlsulMGMMt0sfY3nHWT4z/AEVBogJ0TzW6gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"syllable\"\n        title=\"syllable\"\n        src=\"/static/166bfabb12096e23bd285b2217995155/37523/syllable.png\"\n        srcset=\"/static/166bfabb12096e23bd285b2217995155/e9ff0/syllable.png 180w,\n/static/166bfabb12096e23bd285b2217995155/f21e7/syllable.png 360w,\n/static/166bfabb12096e23bd285b2217995155/37523/syllable.png 720w,\n/static/166bfabb12096e23bd285b2217995155/9cab2/syllable.png 864w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>[출처] <a href=\"https://ko.wikipedia.org/wiki/%ED%95%9C%EA%B8%80_%EC%9D%8C%EC%A0%88\">Wikipedia</a></p>\n</blockquote>\n<br>\n<p>위 사진과 같이 한글 <strong>한 단어</strong>의 종성에 들어올 수 있는 자음의 개수는 27개 이고, 자음이 들어오지 않는 단어는 1개로 같은 초성, 중성에서 종성의 경우의 수는 28이다.<br></p>\n<br>\n<p>이런 규칙을 통해 종성의 유무를 판단할 수 있고, 조사를 붙일지 말 지 결정할 수 있다.<br></p>\n<br>\n<h3 id=\"4️⃣-두-단어간-문장화\" style=\"position:relative;\"><a href=\"#4%EF%B8%8F%E2%83%A3-%EB%91%90-%EB%8B%A8%EC%96%B4%EA%B0%84-%EB%AC%B8%EC%9E%A5%ED%99%94\" aria-label=\"4️⃣ 두 단어간 문장화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4️⃣ 두 단어간 문장화</h3>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> first <span class=\"token operator\">=</span> <span class=\"token string\">\"성수\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> second <span class=\"token operator\">=</span> <span class=\"token string\">\"사랑했다\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> postposition <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>first<span class=\"token punctuation\">.</span><span class=\"token function\">charCodeAt</span><span class=\"token punctuation\">(</span>first<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">44032</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> <span class=\"token number\">28</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>first<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>postposition <span class=\"token operator\">?</span> <span class=\"token string\">\"을\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"를\"</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>second<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token operator\">></span> 성수를 사랑했다</code></pre></div>\n<blockquote>\n<p>참 감성적인 문장이 탄생했다.</p>\n</blockquote>\n<br>\n<p>앞에서 알아본 <code class=\"language-text\">음절의 규칙</code>에 따라 단어의 마지막 글자에 ”<strong>가</strong>“의 유니코드인 <code class=\"language-text\">44032</code>를 뺀뒤, 중성의 개수 28을 나눈 나머지를 계산하면, 현재 단어에 종성이 붙어있는지 확인할 수 있다.<br></p>\n<blockquote>\n<p>44032를 빼 ”<strong>가</strong>“를 0으로 지정한 이유는 28로 나눈 나머지를 확인하기 위해서이다. (사실 안빼고 계산해도 됨)</p>\n</blockquote>\n<blockquote>\n<p>0 이면 종성이 없는 것, 0 이상이면 종성이 있는 것이다.</p>\n</blockquote>\n<br>\n<p>이러한 방식을 통해 단어의 종성 유무를 판단하고, 그에 맞는 조사를 붙여주면 단어 간 문장화가 완료된다.<br></p>\n<br>\n<h2 id=\"-후기\" style=\"position:relative;\"><a href=\"#-%ED%9B%84%EA%B8%B0\" aria-label=\" 후기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🗣 후기</h2>\n<br>\n<p>알고나면 어려운 구현사항은 아니였지만, 유니코드의 한글 저장 규칙과 한글의 음절 규칙 등 방법을 알기위해 노가다가 필요했다.<br></p>\n<blockquote>\n<p>한글 규칙은 학교다닐 때 공부 열심히 했더라면 좀 더 쉽게 알았을 듯 하다.</p>\n</blockquote>\n<br>\n<p>이처럼 유니코드에 정해져 있는 한글 규칙을 잘 알아보고, 그에 맞게 활용하면 위 코드보다 더 좋은 구현을 할 수 있을 것 같다.<br></p>\n<br>\n<h2 id=\"-참고-자료\" style=\"position:relative;\"><a href=\"#-%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\" 참고 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📚 참고 자료</h2>\n<blockquote>\n<p>NLP</p>\n</blockquote>\n<ul>\n<li><a href=\"https://ko.wikipedia.org/wiki/%EC%9E%90%EC%97%B0%EC%96%B4_%EC%B2%98%EB%A6%AC\">https://ko.wikipedia.org/wiki/%EC%9E%90%EC%97%B0%EC%96%B4_%EC%B2%98%EB%A6%AC</a></li>\n</ul>\n<br>\n<blockquote>\n<p>Unicode</p>\n</blockquote>\n<ul>\n<li><a href=\"https://namu.wiki/w/%EC%9C%A0%EB%8B%88%EC%BD%94%EB%93%9C\">https://namu.wiki/w/%EC%9C%A0%EB%8B%88%EC%BD%94%EB%93%9C</a></li>\n</ul>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%9E%90%EC%97%B0%EC%96%B4-%EC%B2%98%EB%A6%ACnlp-%EB%9E%80\">🤖 자연어 처리(NLP) 란</a></p>\n<ul>\n<li><a href=\"#-ai-%EA%B8%B0%EC%88%A0-%EC%97%86%EC%9D%B4-%EB%AC%B8%EC%9E%A5%ED%99%94%EA%B0%80-%EA%B0%80%EB%8A%A5%ED%95%A0%EA%B9%8C\">🤔 AI 기술 없이 문장화가 가능할까?</a></li>\n<li><a href=\"#-%ED%91%9C%EC%A4%80-%EB%AC%B8%EC%9E%90-%EC%B2%98%EB%A6%AC-%EB%B0%A9%EC%8B%9D-unicode\">🚏 표준 문자 처리 방식, Unicode</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-unicode%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%8B%A8%EC%96%B4%EA%B0%84-%EB%AC%B8%EC%9E%A5%ED%99%94\">🤩 Unicode를 이용한 단어간 문장화</a></p>\n<ul>\n<li><a href=\"#1%EF%B8%8F%E2%83%A3-charcodeat\">1️⃣ charCodeAt()</a></li>\n<li><a href=\"#2%EF%B8%8F%E2%83%A3-%EC%9C%A0%EB%8B%88%EC%BD%94%EB%93%9C%EC%97%90-%EC%B4%88%EC%84%B1-%EC%A4%91%EC%84%B1-%EC%A2%85%EC%84%B1%EC%9D%B4-%EC%A0%80%EC%9E%A5%EB%90%9C-%EA%B7%9C%EC%B9%99\">2️⃣ 유니코드에 초성, 중성, 종성이 저장된 규칙</a></li>\n<li><a href=\"#3%EF%B8%8F%E2%83%A3-%EC%A2%85%EC%84%B1%EC%97%90-%EB%93%A4%EC%96%B4%EC%98%A4%EB%8A%94-%EC%9E%90%EC%9D%8C%EC%9D%84-%EC%95%8C-%EC%88%98-%EC%9E%88%EB%8A%94-%EB%B2%95\">3️⃣ 종성에 들어오는 자음을 알 수 있는 법</a></li>\n<li><a href=\"#4%EF%B8%8F%E2%83%A3-%EB%91%90-%EB%8B%A8%EC%96%B4%EA%B0%84-%EB%AC%B8%EC%9E%A5%ED%99%94\">4️⃣ 두 단어간 문장화</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%ED%9B%84%EA%B8%B0\">🗣 후기</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\">📚 참고 자료</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 16, 2022","title":"한국어 유니코드 분석으로 문장화 해보기","categories":"Node.js","author":"seongsu","emoji":"1️⃣7️⃣"},"fields":{"slug":"/skill/korean-word-textualize/"}},"site":{"siteMetadata":{"siteUrl":"https://seongsu.me","comments":{"utterances":{"repo":"nfl1ryxditimo12/nfl1ryxditimo12.github.io"}}}}},"pageContext":{"slug":"/skill/slack-monitering/","nextSlug":"/skill/latency-strategy/","prevSlug":"/skill/korean-word-textualize/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}