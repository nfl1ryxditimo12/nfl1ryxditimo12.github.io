{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/skill/slack-bot/",
    "result": {"data":{"cur":{"id":"698de596-f6ba-52d8-a45d-cf95844226d4","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+0lEQVQY05WQv06DcBSFeaP6OPVPog7Fh3DupJN9AYuLQ8WJlhRcTCo2GnGSNCgEE4GmlIWBWOD3GUisjXHxG+69yzn33CsJagSrogBR8U1ZlvxGCMFfVNWPTqrNXgs4nrko3gP5Z8F7EKBcKEzuJriuSxiGmKZJv39OnudkWUYURcznMXEcs0yX62VSXW6HT1wrl4wfu7wFL8idI3b3djg43Ke93UaWO/R6Z7S2Wti2je/72M825o2J4zhMp/frCxrDavbB4uQUFgarPEdVVUajIbquM7gaYBjjRqxpGp7nkaZp0y3LasyTJNlIKAT1WCGo+B+bv6sN64RfjVxpHTpdz60AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack_api.png\"\n        title=\"slack_api.png\"\n        src=\"/static/44d3f86e4c5ad7b41d7f00f4edfd1b34/37523/slack_api.png\"\n        srcset=\"/static/44d3f86e4c5ad7b41d7f00f4edfd1b34/e9ff0/slack_api.png 180w,\n/static/44d3f86e4c5ad7b41d7f00f4edfd1b34/f21e7/slack_api.png 360w,\n/static/44d3f86e4c5ad7b41d7f00f4edfd1b34/37523/slack_api.png 720w,\n/static/44d3f86e4c5ad7b41d7f00f4edfd1b34/1d69c/slack_api.png 750w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\n<p><code class=\"language-text\">Slack Api</code>를 이용하면 슬랙의 특정 채널에 자동으로 글을 올리거나, 올라온 글을 받아 오는 Bot을 만들 수 있다. 먼저, <code class=\"language-text\">Slack Api</code> 페이지에서 App을 만들고 권한 설정 작업을 시작해야 한다.<br/>\nApp 생성 및 권한 설정이 완료되었다면 Slack에 해당 App을 설치하고, 글을 등록할 채널에 생성할 App을 추가해 준다. 이후 Node.js 또는 여러 Api 서버로 글을 등록 할 수 있다.<br/>\n특정 주기마다 자동으로 글을 올리고 싶다면 각 언어, 프레임 워크 별 전용 <code class=\"language-text\">Scheduler</code>모듈을 활용하면 된다!<br/></p>\n<br/>\n<br/>\n<h2 id=\"-slack-bot-생성\" style=\"position:relative;\"><a href=\"#-slack-bot-%EC%83%9D%EC%84%B1\" aria-label=\" slack bot 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤖 Slack Bot 생성</h2>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACT0lEQVQoz1WRyU7bYBRGvQbRChIGj7F/2/EY4ymQkMYMZSgJghZIKKCoCLpggcSi2yL1Degr8KSnIq2qdnF0vtXV/e6VXLfJ9vYm73p9XMdFUzV0TZ868AOSVkIYBERhSPwH3wswVB3HtGmFLbLVlDyNKbMcqaHrOMKeDjMbJoZu/KVhNHBsizgQlIlgp+uSJoKaHaHpDmWjQ9/YIXNS9raaJHIXyTAMFEVlYX6Bxfrif9Trdeq1GitLy+iuhW43yDTBthEyNEJ2FI+1pk7mqtyduXybBEi9jR7j0ZjT01Mmkwmj0YibLzcMDgecHJ9wfXnF4e4+wjARDYvUEvRFk561SumURK0Ev5UxOOpx8blCer3T7vtdhoMh52fnbG1ucTQ8Ym93j263y1a/opeVZJpFqtrEoYnnG9S8gpViH7kYIq99olaMeFteIbXbbW5vb7kYX3B/f8/d3dfphuPxePqY2kIdQ5PRdY0lIVBiHy0L0NsRWidmpWqxuJNQP0iZH+ZImqYjr8ioiorv+URhRBhG0xwGIWEQUWQJZeqTpxZeYCE7IbLTRHEDIiuldHq07R4du0J6rffy8sLz80/KoiTPi6mjKKYofue1dk6euKzHglVX4Fghvulhmx6lGbGhtVk3O3TcPlJVVTx9f+Lx8RGv6SGEjS1shCWmdhwX13VwLZNs2WFT8fmgBpwrCR3FJo9VrJpMPW4yc9BGWl5aZnZmlrm5NyiKMq3+L5qioasaecuiWnfYr5p83Pe5PA64G0U8XLf48ZBxsucxyE1+AULeNzxxgBZmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack(1).png\"\n        title=\"slack(1).png\"\n        src=\"/static/ae747d018a708373751d7269b4db142e/37523/slack(1).png\"\n        srcset=\"/static/ae747d018a708373751d7269b4db142e/e9ff0/slack(1).png 180w,\n/static/ae747d018a708373751d7269b4db142e/f21e7/slack(1).png 360w,\n/static/ae747d018a708373751d7269b4db142e/37523/slack(1).png 720w,\n/static/ae747d018a708373751d7269b4db142e/302a4/slack(1).png 1080w,\n/static/ae747d018a708373751d7269b4db142e/07a9c/slack(1).png 1440w,\n/static/ae747d018a708373751d7269b4db142e/ee787/slack(1).png 2022w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>먼저, <a href=\"https://api.slack.com\">https://api.slack.com</a> 에 접속해 준다.</p>\n</blockquote>\n<br/>\n<p>사이트에 접속 했다면 왼쪽 아래에 <code class=\"language-text\">Create an app</code> 버튼을 눌러준다.<br/></p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABf0lEQVQ4y6VT2Y6CQBDk/z/NBB40Gk04hEQ8OAQ5lLM21WsT3GTXmJ2k6DmamqnqGaPve5zPZ0RRhDRNkcQJrtcrxnH8CORhNNq2hWVZWCwWWK1WME1Txp+2uq4xDAMMfqqqQtM0uN/vEsuyRJ7nkpRlGW63m8wxFkUh0L6uaxNCSiUoVWQnCeI4luTL5SJ2cG2y5bnOPuc4ptyJ8PF4iAc83X/a5OFms4Ft21gul1IgSqcNjJRNSQRtKItS5HOdknkgLYqcsOs6uK4L3/dxOByw2+6EPAgCmdvv97IJZVE+o9pDud/VBcgzSaZXTJJiZLnszH7xPNk7mXMYvyX99ZNC5b4QshDr9RqO44iXhGWa8PwATlSgbjqMw4Cu70UeQSJivqGOxUPP88Qzx3bEN/Vv7u3pdEIYhuLn8XiUqEpIxuJOHvJOMYFe6tNjRTlm/52HL9eGhFoEhb4QkrGqnNMxN2f+nEz9kxOyw4tN0E+NJOVdmz9LndMH8LN4JPwCD5g6/65BkWYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack(2).png\"\n        title=\"slack(2).png\"\n        src=\"/static/056c1c2b49c3315b3253ab34c654ac00/37523/slack(2).png\"\n        srcset=\"/static/056c1c2b49c3315b3253ab34c654ac00/e9ff0/slack(2).png 180w,\n/static/056c1c2b49c3315b3253ab34c654ac00/f21e7/slack(2).png 360w,\n/static/056c1c2b49c3315b3253ab34c654ac00/37523/slack(2).png 720w,\n/static/056c1c2b49c3315b3253ab34c654ac00/2bef9/slack(2).png 1024w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>밑의 From an app manifest는 신경쓰지 말자</p>\n</blockquote>\n<br/>\n<p>그럼 이렇게 <code class=\"language-text\">Modal</code>창이 뜨는데 위의 <code class=\"language-text\">From scratch</code>를 클릭하자!<br/></p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB/ElEQVQ4y6VTi27iMBDM/3/SUV1bQYtaBB+AgIB45eU8HfKAMKfZyChCQbQ6S5us7fV6Z3ZslWUJ13WRpimyLEMcxwjDEFEUyRotCAIkSSJ+0zTguF6vN+PgOn2LgYM/A0ynU7y/vWM8HmM2m7X+5xiTyQSvf1/xMnjB99c3WEBfwqIoUNc1rObSiFNV1e32/xmW1hrz+Ry2bQv0y+UiF/TZ+XyW/UcmkPlhMKHTyB257BuMJYo+M0ktJiPpSilJyKZwzj8Ts0H0eRF56h7urZAwCJtk84Cx0+kk1p0z9imHeZ5juVzC933YKxvr9Vq43Gw2WCwW2O122G63EkPZdCXSZ8IhAwmJlRoNkgrudSE94o9xRCEc8mMEzISmOZSRkVO3031z0mVkZ3FCWITsOI7ANf7hcLjZ8Xi8rdHf7/fwPV/QsGlMKBwya1m0DeGiqYAXmQrMnqnE+Ny/l5XFTVZE7jzPE58SYqW8+dm4f4LWvVjvA34zpEKKl0I21ZHPrpGvULXVB74Pz/PhhikcleAYxAii1uefWhUdqkDJAZohn6QzIX1e6DiuUKHCEEGsxVSiEWcnqCRHlLWPwPotLNHkuQauDaqyQJalyLWG1lkrm0eK7zMeIAK+oKqusVqtMBwOMRqN8PHxKZ3/cULz5PieKRf6VIh58zRW+A8nPb3pDeVACwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack(3).png\"\n        title=\"slack(3).png\"\n        src=\"/static/89efb005f41e169923adefe418bc2ee7/37523/slack(3).png\"\n        srcset=\"/static/89efb005f41e169923adefe418bc2ee7/e9ff0/slack(3).png 180w,\n/static/89efb005f41e169923adefe418bc2ee7/f21e7/slack(3).png 360w,\n/static/89efb005f41e169923adefe418bc2ee7/37523/slack(3).png 720w,\n/static/89efb005f41e169923adefe418bc2ee7/2bef9/slack(3).png 1024w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>워크스페이스가 없다면 <a href=\"https://slack.com/intl/ko-kr/help/articles/206845317-Slack-%EC%9B%8C%ED%81%AC%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%83%9D%EC%84%B1\">여기로!</a></p>\n</blockquote>\n<br/>\n<p>봇 이름을 입력해 주고 밑에 어느 워크스페이스에 생성할 지 정해준다.<br/>\n그러면 밑의 <code class=\"language-text\">Create App</code>이 활성화 되는데 눌러주자!<br/></p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 104.44444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAACOElEQVQ4y5WVO4/aQBSF/avTpt8+ZbZB2gIoUqTj1UTpki6JRBwkDLYxNuDXjME8TnRm91rDY8lmpKsRM3c+33vmzK6TZgUqpXA67HGod6i0hlIK6/Uaq9UKaZpiu92iqqqr4LrW2uTkeW7WnJ+uh19/ZgjXOeZxiqxQ0EohCAJEUYR6V+NfY7fb4XA4mHA+fP6G909f8PDpO961vuKHlyCOQnx8fESr1UKn0zHRbrdvBve63a4JduWEYWiqYVVlqVBtt0iSBIPBAKPRCMPhEL1eD/1+36zdCtnLsgzOZDKB6/7Gcp1BKW00oTbU8X/H8XiEE8cxZrMZPG/WCEvYYrFA4AcGzqBOPCBaXQb36rqGM5/P4bouptMpiqI4A1IOJjF4iON0Op1Vxd+ytt/v4fCg53nIs+fq2DLB/BDBTOb6crk0YBsioDMgD1JHQvSLB6UaGQRxncEc6cL+wBlwPB6bCpgswcqpHQdnJtuVXUYDpHkJZfCC5Ou8KPpKgBTd1u1SxwbIQwTx+dBH0jYrJlyAIsktHc+AySrBIooMlECpMFpEBiDAsizN3qVuVxXqTYaqKKEr3YjOmR7kC+IFEWhf1N2Wl36IfJNCv1QmtqEvfd83v5l46cNXK/SDAHGSNK1yZnvGm3ne2OY1Y18BWY3tQZlpGzqAe3x2TH4TUHxnG5cVsl3eNG9f2n4T0AbJzOA7ZmXyB9QG3jW2/TpsINvdbDZXGt4bV0CByv8QMTIr5MwD94J5fwHxXUoxKGPTPgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack(4).png\"\n        title=\"slack(4).png\"\n        src=\"/static/bb075e933b76a3f403a26388645e1733/37523/slack(4).png\"\n        srcset=\"/static/bb075e933b76a3f403a26388645e1733/e9ff0/slack(4).png 180w,\n/static/bb075e933b76a3f403a26388645e1733/f21e7/slack(4).png 360w,\n/static/bb075e933b76a3f403a26388645e1733/37523/slack(4).png 720w,\n/static/bb075e933b76a3f403a26388645e1733/302a4/slack(4).png 1080w,\n/static/bb075e933b76a3f403a26388645e1733/07a9c/slack(4).png 1440w,\n/static/bb075e933b76a3f403a26388645e1733/8963a/slack(4).png 1918w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>슬랙 봇을 전반적으로 설정하는 페이지이다.</p>\n</blockquote>\n<br/>\n<p>이제 왼쪽 사이드바 중하단 쯤 <code class=\"language-text\">Revert to the old design</code> 를 눌러준다<br/></p>\n<blockquote>\n<p>현재 페이지보다 예전 디자인이 설정하기 수월하다.</p>\n</blockquote>\n<p>예전 디자인 페이지로 변경이 되었다면 왼쪽 사이드바에서 <code class=\"language-text\">OAuth &amp; Permissions</code> 탭을 선택해 준다!</p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 132.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABYlAAAWJQFJUiTwAAACZklEQVRIx6WVCdOaQAyG/f//TWeqCKP2m88DTzwQYVVE03liQynSy+5M3OxB9k3eJLaKopDdbieHw0Hn+/0uj8fjLWG0rterdLtdabfb0uv1hAfeHRht8bPdblVAyByGoaxWK9U3m42s1+vn+XanehRFz70okl3iZBM7cc49EWJwuVyqkcvloq+AEuSsEXRbn89nyfNcdebrrZBLXvxw+Xa7yWQykXAWquHFYqHo/nVgnPirQWIYBIF4nif9fl913DKimOM4lv1+X8a4TkZpkEXVLYRHsiwTlzlJkkROp5OukWoWNI0WF0DA62mavlwg2KDEWBOrdVFSQGBIzL3j8ag6+3bGbGf2eKPBOpO2Nt3WMAxixDKi6r4aROFlC76iOiYSH+ISkSElPFWBIEsh7igpWIUEDqoCChAZKmYMcJfZhLV9X7pMHg6HQxmNRjIYDHTNa39DwgvLbMIweWeC+0359qfGUBr8XbFXjZb78voNANRl/Pd9X7yeJ51OR/y+L512R4PMGexaXI1treHvM3vcY8Zoix/iNp/PVajj5WJZdhlCYJ2IOreuY+GxrlQ2B4JfrdH/GT9VCvnWVHqU3K/KspEUEHLZGkC9UbDHGblosTNp+rtQg9ZJ+Ig6NYEY06mU6hkeNRoEJghwywTE9ZRpknopvtQyEkUbSY7x28Q8XU5PkqWpOJdJdr5KerlL4nJJTunTvUOsLhp51jAsFABhTxFqHn6M5YsXSOAHMhiOxB98FX/4IbNwLuPPT5lOplrf5Ol0OtU/tPF4rDoym82UgzJtXH4XlxfPzpJlcqbfnd1bLn8DvAXlF00/RYsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack(5).png\"\n        title=\"slack(5).png\"\n        src=\"/static/fb9080b818605de4447717cf5a32042e/37523/slack(5).png\"\n        srcset=\"/static/fb9080b818605de4447717cf5a32042e/e9ff0/slack(5).png 180w,\n/static/fb9080b818605de4447717cf5a32042e/f21e7/slack(5).png 360w,\n/static/fb9080b818605de4447717cf5a32042e/37523/slack(5).png 720w,\n/static/fb9080b818605de4447717cf5a32042e/302a4/slack(5).png 1080w,\n/static/fb9080b818605de4447717cf5a32042e/33d1d/slack(5).png 1150w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>슬랙봇 권한 설정</p>\n</blockquote>\n<br/>\n<p>우리는 슬랙봇을 만들 것이기 때문에 밑의 <code class=\"language-text\">User Token Scopes</code> 는 신경쓰지 않아도 된다<br/>\n위의 <code class=\"language-text\">Bot Token Scopes</code> 부분에서 <code class=\"language-text\">Add permission ~</code> 부분을 클릭해서 원하는 권한을 집어 넣어 준 뒤 <code class=\"language-text\">Add on OAuth Scope</code> 버튼을 클릭하자!</p>\n<blockquote>\n<p>나중에도 추가 가능하니 급하게 생각 안해도 된다 🙃</p>\n</blockquote>\n<br/>\n<p>눌렀을 때 상단에 초록색으로 <code class=\"language-text\">Success!</code>라고 뜨면 성공이다.<br/></p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABFklEQVQoz41Si26DMAzk/38NaayFIdoCAcLWwXiE95ubnKlrNG3VTrrYsRPnEkfb9x1EwrpuULFtX3N1zQ23mJojqzVNA13XYR4PeLEsHA/POJ9OsG0bnufBsiw4jgPjyYBpmjAMA1EU4SduRbV5npHnGdKiQtEMSPIKmWhQFAXoMLJlWUpLzD4yiFJgHEfQ3q7r0Pf9XeE0TYjCEG50hRO+48xTXHgKzjlCiruupPQvLhhjcu65nrwBxYUQ94JDP8D3fYSMIQoYrm+vCJgvF5GKtm0lySclwzBIS6Q4qVTfVFvXFXVdo6oqSenXNZZlwX+hNkajTiZJIqXHcYwgCBDzWCr6rZt/8fvKNFBRNUmqH32ZR/gERaFnyIhW1MAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack(6).png\"\n        title=\"slack(6).png\"\n        src=\"/static/b962527946c1ee5375ed0fc9be91e872/37523/slack(6).png\"\n        srcset=\"/static/b962527946c1ee5375ed0fc9be91e872/e9ff0/slack(6).png 180w,\n/static/b962527946c1ee5375ed0fc9be91e872/f21e7/slack(6).png 360w,\n/static/b962527946c1ee5375ed0fc9be91e872/37523/slack(6).png 720w,\n/static/b962527946c1ee5375ed0fc9be91e872/302a4/slack(6).png 1080w,\n/static/b962527946c1ee5375ed0fc9be91e872/e6c84/slack(6).png 1148w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>슬랙봇 권한 설정 이전에는 버튼이 비활성화 되어있다.</p>\n</blockquote>\n<br/>\n<p>이제! 슬랙 봇 설치 할 수 있는 버튼이 활성화가 되어있다<br/>\n이제 <code class=\"language-text\">Install to Workspace</code> 버튼을 눌러 설치를 해주도록 하자<br/></p>\n<blockquote>\n<p>만약 활성화가 안되어있다면 권한 설정이 안되어있는지 확인해보자</p>\n</blockquote>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABrElEQVQ4y41UzU7CQBDuE/kSPoy8gU9gjEZMvBpOXA2JCWAPGA9cJCEoEE1KIVAoLWhLf6CU0m37mV0DKdCik0x2M9355vs6s8shZlEUMY/v47H4uTTjkoJJCUuyhuyYsP3VQfEDQPohDEO2EhICIHhsGLgqNABPw9dUx+e3hNu3AkqDOkskQZCoiEujL1vA68cACJZwvRDRUoUr5BDY4lFFjKHv+5BlGcPhEDzP4yyTQfb6EspIgj4zoCgK825XxGg0Qq/XQ6fTQb/fZ/EdhhtASZIwHo/RbreRz+dxk82iWCyhXCqjWq2Cf+JRqTyj2WxCVVVWnK6GYfxPsuM40DSNJem6jul0ylbXdf+WTA+1Wi2IoghBEFCr1RgAlTaZTBIBaBOp74MyQEIIk23bNkzDxEyfwbIsJocWC6MIPiHbzsaN5sU7zQCDIGCgi8UCtmUzMLqfz+dYed4BwzA28AeAx6aeFqEmfCt4aNdQFt7hrJMHe6fL+9dsc1CZqIhcD/f1F5zcneM0d4GhqW1ZJgFzSdO+3zn68z3iYx2Q33gKgS3DtDFIu6/HHocfnd81jNpIyeUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack(7).png\"\n        title=\"slack(7).png\"\n        src=\"/static/0864b808651f9e34b608af01382e5e95/37523/slack(7).png\"\n        srcset=\"/static/0864b808651f9e34b608af01382e5e95/e9ff0/slack(7).png 180w,\n/static/0864b808651f9e34b608af01382e5e95/f21e7/slack(7).png 360w,\n/static/0864b808651f9e34b608af01382e5e95/37523/slack(7).png 720w,\n/static/0864b808651f9e34b608af01382e5e95/302a4/slack(7).png 1080w,\n/static/0864b808651f9e34b608af01382e5e95/252a4/slack(7).png 1314w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>이제 끝이다!</p>\n</blockquote>\n<br/>\n<p>이제 허용을 눌러주면 다시 <code class=\"language-text\">OAuth &amp; Permissions</code> 페이지로 넘어오게 된다.</p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABRUlEQVQoz61STY+CQAydPw8Hg64x/CS9czBBjRGRjxlgMAKKoODbtBt29eRms02aDjPl9fW14nK5wPd9hGGIIAjY0zRFkiSQUnKM4xh7b8/fSiocj0c82+Px+D6L8/mMzWaD7XbLYOv1GrvdjgtEUQTP8ziu3BXfu64LGcsBitBewEXTNMwoSzNmQ9W11i8MlVIcKU/rHLnWUEkC/xAgiiWU+nrrug6ibVsGGH6iSI9RGLEU1C6xJHY/0hwQyBRhViBITzhVNfqu49ZFWZacSKBlUYI0zfMcfzUxAMznc5imiclkgtFohOnHFLZtv/XZbIblcomqqkDysYZFUWCxWMAwDAazLIuBx+PxW6dcx3FYLga83W6gtvu+x3+YoMkMwpOWJD6tEK0GFbvf72992EMeCjG7Xq+gfazrmodCZ7p7TvytfwJ+Lt0I/NWN8wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack(8).png\"\n        title=\"slack(8).png\"\n        src=\"/static/cc91c997e2a8e9b556bcef66ebaf4d77/37523/slack(8).png\"\n        srcset=\"/static/cc91c997e2a8e9b556bcef66ebaf4d77/e9ff0/slack(8).png 180w,\n/static/cc91c997e2a8e9b556bcef66ebaf4d77/f21e7/slack(8).png 360w,\n/static/cc91c997e2a8e9b556bcef66ebaf4d77/37523/slack(8).png 720w,\n/static/cc91c997e2a8e9b556bcef66ebaf4d77/302a4/slack(8).png 1080w,\n/static/cc91c997e2a8e9b556bcef66ebaf4d77/11b93/slack(8).png 1124w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>OAuth Token은 소중하니 노출될 일이 없게 하자❗️</p>\n</blockquote>\n<br/>\n<p>이제 <code class=\"language-text\">xbob-</code> 로 시작하는 토큰을 이용해 이곳저곳에서 슬랙봇을 조종할 수 있다 😏<br/>\n저 토큰이 깃헙 코드에 올라가는 실수를 저지르지 않도록 잘 관리해주자!!<br/></p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.44444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACeElEQVQ4y42S3W7TMBiGHWDE9meni5u/Nk3SJO3arlPRMiEkrgGJA44GJxwsuxiug8vgZjhcBadQsSQfstt1IDrg4NHrxMqjN/5MXMJlmR6/F464pjZcARc1o1ALLmrlqtp1Ve17QR34Qe0eb591UpvXjGrgilJWx0F57R2PEqJ66jwKA7RtitTmyCig74c4SnNUXohuP8C+FxqUF6DqB+a901PIOCDjwqR0FILovSVKqWoQDb9J4bSO7N0+efS4WV28bD58/NRUz180YZw1g6RoBkm+Z5iVTThMGw6i4ULeciF/MDDiS+J5fpUk2UYKBwXI1j6yuzgtuldvLrvF2bMujLNukOR7otHYpBfGHQPRcSE7DrLlQiIDuCR+36uSYbwRwkHgoqM2w74fYhRnOJ7MMc2nGGflb4zGE4ziFE0rLRQ7oWkoZTVwXdPQkT0jDKIYp4sVLlcVlrMlxmnxh3AwGh8WUsoqSvkGQKIUjhGGUYwnpytMi+le8CtJPn1YaFNaARMb5bj6DPcNtVAzmZ+ZX8+nC4NeFyenGKe5EfJDDTmDjaM3GXTUpkaoP8rK2V6m8w69N3xQaFMjVMpD4PcNi9nyoOyfDe2jowrA2QzHc5TRpLP7GQbJBIsDojvyvzVklJ1zBt/1UED0GkpFGw6Ttpydtfl00ebT0x2LPcVs2cZp0TIuWgaGZn+xGWUXnEHLKEdOOeoz9PzITHg0LjHRU73LfIveG8Qpgr678h4G8E6f4ZJR/plR/oVRfsMoX2s4yDUIaXK7dtZS9gxCOmvpbBOkvAHp3ICUXxmH14QQ8tSyrIllWQvLsua7XBBC/pf5LmeEEPgJIPs+pm4UPF8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack(9).png\"\n        title=\"slack(9).png\"\n        src=\"/static/e053a386cf8f87b972240e4f2151f13a/37523/slack(9).png\"\n        srcset=\"/static/e053a386cf8f87b972240e4f2151f13a/e9ff0/slack(9).png 180w,\n/static/e053a386cf8f87b972240e4f2151f13a/f21e7/slack(9).png 360w,\n/static/e053a386cf8f87b972240e4f2151f13a/37523/slack(9).png 720w,\n/static/e053a386cf8f87b972240e4f2151f13a/302a4/slack(9).png 1080w,\n/static/e053a386cf8f87b972240e4f2151f13a/07a9c/slack(9).png 1440w,\n/static/e053a386cf8f87b972240e4f2151f13a/0e758/slack(9).png 2502w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>왼쪽 아래 <code class=\"language-text\">앱</code> 탭에 방금 만든 봇으로 들어간다</p>\n</blockquote>\n<br/>\n<p>봇 설정을 누르면 위 사진처럼 설정 창이 뜨는데<br/>\n여기서 <code class=\"language-text\">이 앱을 채널에 추가</code> 버튼을 눌러준 뒤 원하는 채널에 넣어주자<br/></p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.44444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACyklEQVQ4y41SuY7cRhQkAw/75H01r+YxnBl6diUN115BCpQpFBTLThxo9N8Kd2Gn0sAi+xnsnbVWF6CgUI8NsFBV7xmeQXhXuX8xm71DFn1LCTsSTI82t4+O7R491z/GUaIR+MHR9wL9hixyxGgBfYsQPmZR+y50i9LwHf+QJjEgCwGyCBBEIYwSSEQOcZqBH8Tg+ZFm1wvBC2LwwwRsxwdMmAYhDHwvBcacPwzf90eRZh84s2fO7E/IwlMiiulw/Wx6+vzFdPHkt6nb7ifZbafh4slUNv0kqnZKsmrClE2E8U+E8X8JswET+sYIw2gsS3nizAFK+YwsrMJYqKYfVN0Par27ULLdqKJeq3q9U7nsVFa1KhalwpQpwvjCM6YMMKVvjCgIxzLLT4xQoAgr9MsK4kTA5eF3aPcHqPsBmvUO2s2vUK930PSDnkUhQYswvojOhPGzQ0pG4YcnHktwRatwUECUNzBcPIbh8gCy20IuOyjq9Znv5jSXQLQg+1IQWWhEmJ6Yl4AdCIV4AHEmQcgOqnajf86qFvIFstNz0WxAFPX3HWKER4LpyaE2cMp0ZJEV8OrlSyjrNcRZBaJs/kda1CDarWbyPUHLQiPF9ORzBzCmCllYn8yzw6i7y+seMnnn8h5L7B92eO+QUQ7kLBjGAobHV3B1/Rz2h2uod4+gXZbTD3oxmew+d0i/6nC1skZK2ClLM+DMVsuBR0kG/XAJ2/0jkN0GCtlB2fS6z/vlLA4XQfLQ4XI2COEDwfSjZ7vAKJ/QCs2JKOZ2s59lt52bfvgG7XY/51U76/u7E5seRr4imM4YkSUy6MhRClXb66V8iw6qpoc0r4DbDtiOq8Edd4n/53I2e4zIe4zI3xiRG4zI7QJK+S1l/DOzB9/3b9y+5Y5zw23nhnH7H0zoa8MwjJVpmmvTNAfTNHdnHgzD+Fnszrw1DIP+B4nePcKYKGAqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack(10).png\"\n        title=\"slack(10).png\"\n        src=\"/static/17c9993adf4e26c31967c22ef50cf759/37523/slack(10).png\"\n        srcset=\"/static/17c9993adf4e26c31967c22ef50cf759/e9ff0/slack(10).png 180w,\n/static/17c9993adf4e26c31967c22ef50cf759/f21e7/slack(10).png 360w,\n/static/17c9993adf4e26c31967c22ef50cf759/37523/slack(10).png 720w,\n/static/17c9993adf4e26c31967c22ef50cf759/302a4/slack(10).png 1080w,\n/static/17c9993adf4e26c31967c22ef50cf759/07a9c/slack(10).png 1440w,\n/static/17c9993adf4e26c31967c22ef50cf759/0e758/slack(10).png 2502w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\n<p>그럼 채널에 방금 만든 봇이 추가가 되었다.<br/>\n이제 슬랙봇 <code class=\"language-text\">OAuth Token</code>을 활용하여 메세지 전송 등 여러 기능을 사용할 수 있다.<br/></p>\n<blockquote>\n<p>자세한 내용은 <a href=\"https://api.slack.com/docs\">여기를</a> 참고하자</p>\n</blockquote>\n<br/>\n<br/>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#-slack-bot-%EC%83%9D%EC%84%B1\">🤖 Slack Bot 생성</a></li>\n</ul>\n</div>","excerpt":"를 이용하면 슬랙의 특정 채널에 자동으로 글을 올리거나, 올라온 글을 받아 오는 Bot을 만들 수 있다. 먼저,  페이지에서 App을 만들고 권한 설정 작업을 시작해야 한다.\nApp 생성 및 권한 설정이 완료되었다면 Slack에 해당 App을 설치하고, 글을 등록할 채널에 생성할 App을 추가해 준다. 이후 Node.js 또는 여러 Api 서버로 글을 등록 할 수 있다.\n특정 주기마다 자동으로 글을 올리고 싶다면 각 언어, 프레임 워크 별 전용 모듈을 활용하면 된다! 🤖 Slack Bot 생성  먼저, https://api.slack.com 에 접속해 준다. 사이트에 접속 했다면 왼쪽 아래에  버튼을 눌러준다.  밑의 From an app manifest는 신경쓰지 말자 그럼 이렇게 창이 뜨는데 위의 를 클릭하자!  워크스페이스가 없다면 여기로! 봇 이름을 입력해 주고 밑에 어느 워크스페이스에 생성할 지 정해준다.\n그러면 밑의 이 활성화 되는데 눌러주자!  슬랙 봇을 전반적으로 설…","frontmatter":{"date":"January 03, 2022","title":"쉽고 간단한 Slack Bot 만들기","categories":"기타","author":"seongsu","emoji":"6️⃣"},"fields":{"slug":"/skill/slack-bot/"}},"next":{"id":"145981e0-eb31-51f1-8fc5-91a2cb846d73","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzElEQVQoz5XS2wqCQBAG4J43KG3bTM21NCyRInLXXSwkOlAarQUdbszueq+I6CoNhf9yvhlmmAptotxAnSkmbekUZBdU8qQrqqE1iaHFrSmTehRoJfBMNrlDnmxztDHJkvm4pd9wcPfXiYGvDmXt4pOBxqTubeid6sa+ikJz7MFSO0O0QvZC7jPFwA2VQb0o9oAWaINkezjPVxd/me7imMzdmvzbIgNjUeWun+74IzqmW/6ITuEIY0EphD8hYgcLKhHf8cpdG6B/z/PFLyB6OZkTtxmXAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jest.png\"\n        title=\"jest.png\"\n        src=\"/static/4abb9a84b4d262de8ea3c30a853308eb/37523/jest.png\"\n        srcset=\"/static/4abb9a84b4d262de8ea3c30a853308eb/e9ff0/jest.png 180w,\n/static/4abb9a84b4d262de8ea3c30a853308eb/f21e7/jest.png 360w,\n/static/4abb9a84b4d262de8ea3c30a853308eb/37523/jest.png 720w,\n/static/4abb9a84b4d262de8ea3c30a853308eb/d48f1/jest.png 796w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\n<p>개발이 어느정도 진행되고, API 서버가 정상 작동하는지 포스트맨으로 일일히 확인해봤다.<br/>\n하지만 <code class=\"language-text\">MVP</code> 단계이긴 하지만 규모가 점차 커질수록 기능이 많아져 수작업으로 테스트를 하는게 불안해지기 시작했다. 그래서 <code class=\"language-text\">Jest</code>를 이용한 단위 테스트로 TDD를 적용해 보고자 포스팅을 하게 되었다.<br/></p>\n<br/>\n<h2 id=\"-jest-란\" style=\"position:relative;\"><a href=\"#-jest-%EB%9E%80\" aria-label=\" jest 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👠 Jest 란</h2>\n<br/>\n<p><code class=\"language-text\">Jest</code>는 코드가 정상적으로 동작하는 지 확인하는 테스트 케이스를 만들어<br/>\n정해놓은 <code class=\"language-text\">Expected</code>값과 반환되는 <code class=\"language-text\">Received</code>값을 비교해 코드의 상태를 확인해주는 프레임워크 이다.<br/></p>\n<br/>\n<br/>\n<h2 id=\"-jest를-사용하는-이유\" style=\"position:relative;\"><a href=\"#-jest%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\" jest를 사용하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>❓ Jest를 사용하는 이유</h2>\n<br/>\n<p><code class=\"language-text\">lint</code>가 코드 스타일에 규칙을 정하는 것이라면 코드가 올바른 기능을 하는 지 체크 할 수 있다.<br/>\n이를 통해 보다 안정적이고 제대로 동작하는 코드를 작성할 수 있다.<br/></p>\n<br/>\n<br/>\n<h2 id=\"-jest-설정하기\" style=\"position:relative;\"><a href=\"#-jest-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\" jest 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🛠 Jest 설정하기</h2>\n<br/>\n<p>현재 개발 환경이 <code class=\"language-text\">TypeScript</code>이므로 <code class=\"language-text\">ts-jest</code>, <code class=\"language-text\">@types/~</code> 관련 모듈도 설치해 준다.<br/>\n그리고 <code class=\"language-text\">supertest</code>는 <code class=\"language-text\">request</code>통신을 만들어 주는 역할을 하니 <code class=\"language-text\">express</code> 테스트를 위해 필요하므로 같이 설치해 준다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> insatll --save-dev @types/jest @types/supertest jest ts-jest supertest\n또는\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> --dev @types/jest @types/supertest jest ts-jest supertest</code></pre></div>\n<br/>\n<p>그 뒤 script 설정과 jest 설정을 따로 해줘야 한다.<br/></p>\n<br/>\n<p><code class=\"language-text\">package.json</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=test jest --setupFiles dotenv/config --config jest.config.js --detectOpenHandles --forceExit\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>test 환경으로 핸들링 하기 위해 <code class=\"language-text\">NODE_ENV</code>를 test로 설정 한다.<br/>\nenv파일로 환경변수를 관리한다면 <code class=\"language-text\">--setupFiles dotenv/config</code> 꼭 넣어야 jest에서 환경변수를 사용할 수 있다.<br/>\n<code class=\"language-text\">Node.js</code>에서 실행이 모두 완료 되어도 비동기가 남아있는 경우 jest가 종료되지 않는데 <code class=\"language-text\">detectOpenHandles</code> 옵션으로 열려있는 핸들링 을 모두 수집하고 <code class=\"language-text\">forceExit</code> 옵션으로 테스트 후 종료시켜 준다.<br/></p>\n<br/>\n<p><code class=\"language-text\">jest.config.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    preset<span class=\"token operator\">:</span> <span class=\"token string\">\"ts-jest\"</span><span class=\"token punctuation\">,</span>\n    moduleNameMapper<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"@routes/(.*)$\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rootDir>/src/routes/$1\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"@controllers/(.*)$\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rootDir>/src/controllers/$1\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"@services/(.*)$\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rootDir>/src/services/$1\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"@repository/(.*)$\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rootDir>/src/repository/$1\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"@entities/(.*)$\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rootDir>/src/entities/$1\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"@modules/(.*)$\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"&lt;rootDir>/src/modules/$1\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p><code class=\"language-text\">TypeScript</code> 환경에서 jest를 사용한다면 preset에 <code class=\"language-text\">ts-jest</code>를 명시해줘야 한다.<br/>\n<code class=\"language-text\">moduleNameMapper</code>는 타입스크립트 환경에서 <code class=\"language-text\">Path Alias</code>를 사용하는 경우 꼭 설정해 줘야 테스트 할 때 경로를 알아서 찾는다.<br/></p>\n<br/>\n<p>이로써 <code class=\"language-text\">Jest</code> 기본 설정은 끝이다.<br/></p>\n<br/>\n<br/>\n<h2 id=\"-실제-테스트\" style=\"position:relative;\"><a href=\"#-%EC%8B%A4%EC%A0%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\" 실제 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🛫 실제 테스트</h2>\n<br/>\n<p><code class=\"language-text\">내가 지정한 경로</code></p>\n<div class=\"gatsby-highlight\" data-language=\"plain\"><pre class=\"language-plain\"><code class=\"language-plain\">├── src             # 소스 폴더\n    ├── modules         # 사용자 지정 모듈\n    ├── routes          # 요청에 따른 분리\n    ├── controllers     # API 요청/응답 실행\n    ├── services        # 데이터 가공\n    ├── repository      # DB CRUD\n    ├── entities        # Model과 동일\n    └── test            # Jest 테스팅 폴더, 이곳에 테스트 파일들이 모두 담긴다.</code></pre></div>\n<br/>\n<p>테스트를 하기위해 테스트 파일을 작성해야 하는데 아무 경로에 <code class=\"language-text\">원하는이름.test.ts</code> 이렇게 명시해주면 jest가 알아서 찾아 테스팅을 하게 된다.<br/></p>\n<blockquote>\n<p>ex) 유저 테스트를 하는 경우 user.test.ts 또는 user.spec.ts</p>\n</blockquote>\n<br/>\n<h3 id=\"-jest-기본-규칙\" style=\"position:relative;\"><a href=\"#-jest-%EA%B8%B0%EB%B3%B8-%EA%B7%9C%EC%B9%99\" aria-label=\" jest 기본 규칙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎓 Jest 기본 규칙</h3>\n<br/>\n<p><code class=\"language-text\">describe</code> : 여러개의 테스트 케이스를 묶어 가독성을 높인다.<br/>\n<code class=\"language-text\">test/it</code> : 테스트 단위<br/></p>\n<br/>\n<p><strong>Methods LIST</strong> : 전역에 쓰면 모든 테스트가 적용되고 묶은 describe 속에 넣으면 그 속에 있는 test에만 methods가 적용된다.<br/></p>\n<ul>\n<li><code class=\"language-text\">afterAll(fn, timeout)</code> : 모든 테스트가 끝나고 실행된다<br/></li>\n<li><code class=\"language-text\">afterEach(fn, timeout)</code> : 하나의 테스트가 끝날 때마다 실행된다<br/></li>\n<li><code class=\"language-text\">beforeAll(fn, timeout)</code> : 모든 테스트가 시작하기 전에 한번 실행된다.<br/></li>\n<li><code class=\"language-text\">beforeEach(fn, timeout)</code> : 하나의 테스트가 시작하기 전에 매번 실행한다<br/></li>\n</ul>\n<br/>\n<p><code class=\"language-text\">예시</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'테스트 단위'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">beforeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">/* 모든 test() 함수 실행 이전에 작동한다. */</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">afterAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">/* test() 함수가 모두 실행된 이후에 작동한다. */</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'무슨 테스트인지 여기에 작성한다.'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p><strong>describe</strong> 단위로 여러 테스트를 진행하면 관리하기 용이하다.</p>\n</blockquote>\n<br/>\n<h3 id=\"-jest를-이용한-테스트\" style=\"position:relative;\"><a href=\"#-jest%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\" jest를 이용한 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎬 Jest를 이용한 테스트</h3>\n<br/>\n<p><code class=\"language-text\">app.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>env<span class=\"token punctuation\">.</span>nodeEnv <span class=\"token operator\">!==</span> <span class=\"token string\">\"test\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">createConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"🚀 DB Connected\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p><code class=\"language-text\">app.ts</code>에서 DB 연결을 시도하면 테스팅이 끝날때 까지 <code class=\"language-text\">Typeorm connection</code> 이 끝나지 않아서 오류가 발생한다.<br/></p>\n<blockquote>\n<p>app.ts에 비동기 방식으로 짜여진 핵심 코드가 더 있다면 오류 날 확률이 생길 것이다.</p>\n</blockquote>\n<p>그래서 <code class=\"language-text\">NODE_ENV !== \"test\"</code> 인 경우만 <code class=\"language-text\">app.ts</code>에서 DB 연결을 시도하고 테스팅 환경에선 테스트 파일에서 따로 DB 연결을 시도해 준다.<br/></p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABNUlEQVQoz5VRW26DQBDbWwQp2eUVHssCG14BIjVnyF/vfxJX3nZQW6kf/bA8eAbjGVTrHHrvUWY5Vm0wJCmsc7DW4nK5wBgDbQyM1p/8Ba31Dxao1+uFYRxhiwLv04K3qkbnPfquOwz/A7UsC5I4RllVmPcdOk0RnU6IoigYns/nwH/hd1/1fY9hGNC2LRprwRN0XQfvfVib/ev1iqIo0DQN6roOLOCs1OwpCuM4hgaNaTRNE+Z5Djo1mtE0z/OANE2RJEmA1GRCMTKHabDvO7ZtC/x8PvF4PELy2+0WjJ1zIQXnsyw7zFnTNI5jKIpMwEGuKPHlZfaoEzSXD3ATAc/CWRorFhQ4ROZPWtc1JL7f7weYmmCPpxAjflhClGUJxVV4Pzmu3Ep+hNTfNVmZXFXVAT5/AAsBByjJWDRwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"import-error.png\"\n        title=\"import-error.png\"\n        src=\"/static/aba7abec903ff4bd4fbb28f97ae3c521/37523/import-error.png\"\n        srcset=\"/static/aba7abec903ff4bd4fbb28f97ae3c521/e9ff0/import-error.png 180w,\n/static/aba7abec903ff4bd4fbb28f97ae3c521/f21e7/import-error.png 360w,\n/static/aba7abec903ff4bd4fbb28f97ae3c521/37523/import-error.png 720w,\n/static/aba7abec903ff4bd4fbb28f97ae3c521/302a4/import-error.png 1080w,\n/static/aba7abec903ff4bd4fbb28f97ae3c521/07a9c/import-error.png 1440w,\n/static/aba7abec903ff4bd4fbb28f97ae3c521/913a1/import-error.png 1476w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>app.ts에서 DB 연결을 시도한 경우 import error가 뜬다.</p>\n</blockquote>\n<br/>\n<br/>\n<p><code class=\"language-text\">src/test/shop.test.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> request <span class=\"token keyword\">from</span> <span class=\"token string\">\"supertest\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createConnection <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"typeorm\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> app <span class=\"token keyword\">from</span> <span class=\"token string\">\"../app\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Api Test\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">beforeAll</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">await</span> <span class=\"token function\">createConnection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"🚀 DB Connected\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"모든 가게 리스트 갖고 와야함\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/v0/shops\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// expect에 예상 값을, toBe에 결과 값을 넣는다.</span>\n        <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>위 코드는 Jest Tester가 <code class=\"language-text\">/v0/shops</code> URL에 <code class=\"language-text\">GET</code>요청을 보낸 후 예상 값과 결과 값을 비교 해 결과를 반환해준다.<br/></p>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwUlEQVQY05WPQU7DMBBFcw3SOIlt7NpWHJMGTFVBK7FjUS6Q+5/joZh2wa5ZPM186c/Mn+p4fGdZFq7XH4IfcM+avbUFpRRa68K9X+udVRtj/ulK1DW6l9ghonygloqmlzRdS9tup6pPEZ0T2jhCfEENkUuIfLvATgjaG+JBKjV6Up6xe4sePT54Ds4zGYtUspg2JTx/fJKnGT0G5FfGBY+xlqdmVwxi5Xb9oYWH15n0loljYkpTGey77u/V1bQx4S9qG6jR8XtH3wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result.png\"\n        title=\"result.png\"\n        src=\"/static/5e11a5db92338cf33e28f9caa80f1589/37523/result.png\"\n        srcset=\"/static/5e11a5db92338cf33e28f9caa80f1589/e9ff0/result.png 180w,\n/static/5e11a5db92338cf33e28f9caa80f1589/f21e7/result.png 360w,\n/static/5e11a5db92338cf33e28f9caa80f1589/37523/result.png 720w,\n/static/5e11a5db92338cf33e28f9caa80f1589/302a4/result.png 1080w,\n/static/5e11a5db92338cf33e28f9caa80f1589/07a9c/result.png 1440w,\n/static/5e11a5db92338cf33e28f9caa80f1589/06868/result.png 1974w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\n<p>현재 프로젝트에서 위 URL로 <code class=\"language-text\">GET</code> 요청을 보내면 DB에서 모든 가게 리스트를 조회 해<br/>\n성공 시 <code class=\"language-text\">Http Status Code - 200 OK</code> 응답을 보내준다.<br/>\n위 코드에서 결과 값 200과 응답 값(예상 값)이 200으로 동일해 테스트 성공이라는 결과가 나왔다.<br/></p>\n<br/>\n<p>이런식으로 단위 테스트를 진행하면 되고 나중엔 통합 테스트, 부하 테스트를 공부한 뒤 포스팅 해야겠다.<br/></p>\n<br/>\n<br/>\n<h2 id=\"-참고-자료\" style=\"position:relative;\"><a href=\"#-%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\" 참고 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📚 참고 자료</h2>\n<br/>\n<blockquote>\n<p>Configuring Jest</p>\n</blockquote>\n<ul>\n<li><a href=\"https://jestjs.io/docs/configuration\">https://jestjs.io/docs/configuration</a></li>\n</ul>\n<br/>\n<blockquote>\n<p>TypeScript Express에서 세팅하는 JEST</p>\n</blockquote>\n<ul>\n<li><a href=\"https://velog.io/@cloudjun/Node-TypeScript-Express%EC%97%90%EC%84%9C-%EC%84%B8%ED%8C%85%ED%95%98%EB%8A%94-JEST\">https://velog.io/@cloudjun/Node-TypeScript-Express%EC%97%90%EC%84%9C-%EC%84%B8%ED%8C%85%ED%95%98%EB%8A%94-JEST</a></li>\n</ul>\n<br/>\n<blockquote>\n<p>Jest ORM Error 해결법</p>\n</blockquote>\n<ul>\n<li><a href=\"https://velog.io/@hyex/moogosejest-ReferenceError-You-are-trying-to-import-a-file-after-the-Jest-environment-has-been-torn-down\">https://velog.io/@hyex/moogosejest-ReferenceError-You-are-trying-to-import-a-file-after-the-Jest-environment-has-been-torn-down</a></li>\n</ul>\n<br/>\n<br/>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-jest-%EB%9E%80\">👠 Jest 란</a></p>\n</li>\n<li>\n<p><a href=\"#-jest%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">❓ Jest를 사용하는 이유</a></p>\n</li>\n<li>\n<p><a href=\"#-jest-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">🛠 Jest 설정하기</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%8B%A4%EC%A0%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8\">🛫 실제 테스트</a></p>\n<ul>\n<li><a href=\"#-jest-%EA%B8%B0%EB%B3%B8-%EA%B7%9C%EC%B9%99\">🎓 Jest 기본 규칙</a></li>\n<li><a href=\"#-jest%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8\">🎬 Jest를 이용한 테스트</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\">📚 참고 자료</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"January 02, 2022","title":"Jest를 이용한 Express 단위 테스트","categories":"Node.js Express","author":"seongsu","emoji":"5️⃣"},"fields":{"slug":"/skill/express-tdd/"}},"prev":{"id":"d75d0358-e120-5eda-9136-e5ca394234e5","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtUlEQVQoz61RQQ6CMBDk/x9CQMTgAYO3YjCYIIInoNCCDxjTTUqIAe2Bw2S7293pdNbquw5bwponHedTNMF8ZpFQN0ghMEhJuej7CUu9fxUqsqoscc8yqrVNg6auCbxtJxgRqsb3OOISxzhHEY5BAM91sbNtOu89D47j4OD7eBYFPf7zy1rhI89xTRIwxnAKQ4qqdktTJIzR3auqyAZjD8dhIKghFbWv87qRh5tveY14bQnfCj/fJZ+k6bwZBQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"express.png\"\n        title=\"express.png\"\n        src=\"/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/37523/express.png\"\n        srcset=\"/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/e9ff0/express.png 180w,\n/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/f21e7/express.png 360w,\n/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/37523/express.png 720w,\n/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/302a4/express.png 1080w,\n/static/dd36a740e63a97f0f6bd9b47b5ef9ccc/78797/express.png 1125w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\n<h2 id=\"️-custom-error\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-custom-error\" aria-label=\"️ custom error permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⛔️ Custom Error</h2>\n<br/>\n<p>개발을 하다 보면 자체 여러 클래스가 필요한 경우가 종종 생긴다.<br/>\n네트워크 관련 작업 중 에러가 발생했다면 <code class=\"language-text\">HttpError</code>,<br/>\n데이터베이스 관련 작업 중 에러가 발생했다면 <code class=\"language-text\">DbError</code>,<br/>\n검색 관련 작업 중 에러가 발생했다면 <code class=\"language-text\">NotFoundError</code><br/>\n등등 직접 연관된 에러를 발생시키는게 직관적이기 때문이다.<br/></p>\n<br/>\n<p>나는 API 서버를 제작 중이여서 <code class=\"language-text\">HttpResponseError</code> 위주로 작성 했다.<br/>\n직접 에러 클래스를 만든 경우, 이 에러들은 <code class=\"language-text\">statusCode</code>, <code class=\"language-text\">message</code>, <code class=\"language-text\">stack</code>처럼 여러 프로퍼티를 지원하게 할 수 있다.<br/></p>\n<blockquote>\n<p>물론 이외의 프로퍼티도 지원 하게 만들 수 있다.</p>\n</blockquote>\n<br/>\n<p><code class=\"language-text\">JavaScript</code>에서 <code class=\"language-text\">throw</code>의 인수에 아무런 제약이 없기 때문에 커스텀 에러 클래스는 반드시 <code class=\"language-text\">Error</code>를 상속할 필요가 없다.<br/>\n하지만 <code class=\"language-text\">Error</code>를 상속받아 커스텀 에러 클래스를 만들게 되면 <code class=\"language-text\">obj instanceof Error</code>를 사용해 여러 객체를 식별 할 수 있다는 장점이 있다.</p>\n<blockquote>\n<p>그래서 Error를 상속해서 커스텀 Error 클래스를 만들자</p>\n</blockquote>\n<br/>\n<h3 id=\"-custom-error-제작\" style=\"position:relative;\"><a href=\"#-custom-error-%EC%A0%9C%EC%9E%91\" aria-label=\" custom error 제작 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🛠 Custom Error 제작</h3>\n<br/>\n<p><code class=\"language-text\">modules/apiError.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ApiError</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Error</span> <span class=\"token punctuation\">{</span>\n    statusCode<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n    isFatal<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>statusCode<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> option<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> stack<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> isFatal<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>statuscode <span class=\"token operator\">=</span> statusCode<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>option<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isFatal <span class=\"token operator\">=</span> option<span class=\"token punctuation\">.</span>isFatal <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token boolean\">false</span> <span class=\"token operator\">:</span> option<span class=\"token punctuation\">.</span>isFatal<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>option<span class=\"token punctuation\">.</span>stack<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>stack <span class=\"token operator\">=</span> option<span class=\"token punctuation\">.</span>stack<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                Error<span class=\"token punctuation\">.</span><span class=\"token function\">captureStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isFatal <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n            Error<span class=\"token punctuation\">.</span><span class=\"token function\">captureStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>constructor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>Api 서버에서 사용하는 Api Custom Error이다</p>\n</blockquote>\n<br/>\n<p>인자로 <code class=\"language-text\">statusCode</code>, <code class=\"language-text\">message</code>를 받아오고 옵션으로 <code class=\"language-text\">stack</code>, <code class=\"language-text\">isFatal</code>을 받아온다<br/></p>\n<blockquote>\n<p>stack은 stackTrace의 반환값이고 isFatal은 심각한 오류일 경우 로깅 &#x26; 슬랙 알림을 위해 넣었다</p>\n</blockquote>\n<br/>\n<p><code class=\"language-text\">message</code>프로퍼티가 부모 생성자에서 설정되게 하기 위해 <code class=\"language-text\">super</code>를 호출해준다<br/>\n그리고 <code class=\"language-text\">statusCode</code> 또한 부모 생성자에 설정해준다.<br/>\n그 뒤 필요에 의해 <code class=\"language-text\">option</code>값이 들어오면 그 값에 대해서도 부모 생성자에 설정해준다.<br/></p>\n<br/>\n<br/>\n<h2 id=\"-error-middleware\" style=\"position:relative;\"><a href=\"#-error-middleware\" aria-label=\" error middleware permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🚫 Error Middleware</h2>\n<br/>\n<p><code class=\"language-text\">Express</code>로 개발을 하다 <strong><code class=\"language-text\">만약 실 서비스에서 생각지 못한 오류로 서버가 종료되면 어떡하지?</code></strong> 라는 생각이 들었던 적 있을것 이다.<br/></p>\n<br/>\n<p>이런 걱정을 할 수 밖에 없는 이유가 <code class=\"language-text\">Node.js</code> 자체가 단일 스레드 플랫폼이다 보니 오류가 날 경우 서비스가 그대로 죽어버리는 문제가 있다.<br/>\n그렇다고 모든 오류에 관해 <code class=\"language-text\">try ... catch</code>문으로 막으면 코드가 보기 좋지 않을 뿐더러 단위/통합 테스트를 빡세게 한다해도 한계가 있기 때문이다.<br/></p>\n<blockquote>\n<p>사실 Node.js는 시스템적으로 non-blocking I/O를 지원하지 않는 호출이 있는 경우, 이를 비동기 처리 하기 위해 내부의 Thread pool(libio)을 별도로 이용해 처리한다고 해서 정확히 말하면 싱글 스레드는 아니다.</p>\n</blockquote>\n<br/>\n<h3 id=\"-그래서-어떻게-해야하나\" style=\"position:relative;\"><a href=\"#-%EA%B7%B8%EB%9E%98%EC%84%9C-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EC%95%BC%ED%95%98%EB%82%98\" aria-label=\" 그래서 어떻게 해야하나 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>❓ 그래서 어떻게 해야하나</h3>\n<br/>\n<p>서비스 상 어디서 발생할 지 모르는 에러를 일일히 막는다는 것은 매우 비효율적이며 보기에도 별로 좋지 않고 그렇게 할 필요도 없다.<br/>\n왜냐하면 오류가 난 상황에서 <code class=\"language-text\">Express</code> 미들웨어를 이용하면 손쉽게 처리가 가능하기 때문이다.<br/></p>\n<h4 id=\"span-stylecolor-redmiddleware-란span\" style=\"position:relative;\"><a href=\"#span-stylecolor-redmiddleware-%EB%9E%80span\" aria-label=\"span stylecolor redmiddleware 란span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"color: red;\">Middleware 란?</span></h4>\n<p><code class=\"language-text\">Client</code>에게 요청이 오고 그 요청에 관한 응답을 보내는 중간에 거쳐가는 함수이다.<br/>\n<code class=\"language-text\">Middleware</code> 함수는 req(요청)과 res(응답), 그리고 어플리케이션 요청-응답 사이클 중간에서 필요한 처리를 해주는 함수를 뜻한다.<br/>\n모든 로직이 끝난 후 <code class=\"language-text\">next</code>를 호출하며 미들웨어가 순차적으로 처리되며 모든 미들웨어가 처리되었다면 응답 로직으로 넘어간다.<br/></p>\n<br/>\n<h3 id=\"-error-middleware-작성\" style=\"position:relative;\"><a href=\"#-error-middleware-%EC%9E%91%EC%84%B1\" aria-label=\" error middleware 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🚧 Error Middleware 작성</h3>\n<br/>\n<p><code class=\"language-text\">modules/error.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">errorConverter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>err<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> res<span class=\"token operator\">:</span> Response<span class=\"token punctuation\">,</span> next<span class=\"token operator\">:</span> NextFunction<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> error <span class=\"token operator\">=</span> err<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>err <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">ApiError</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> statusCode <span class=\"token operator\">=</span> error<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">||</span> httpStatus<span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> message <span class=\"token operator\">=</span> error<span class=\"token punctuation\">.</span>message <span class=\"token operator\">||</span> httpStatus<span class=\"token punctuation\">[</span>statusCode<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        error <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApiError</span><span class=\"token punctuation\">(</span>statusCode<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">.</span>stack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>오류가 났을 때 Custom Error로 변환시켜주는 Middleware</p>\n</blockquote>\n<br/>\n<p>일단 오류가 났다고 가정하면 위 <code class=\"language-text\">errorConverter</code> 미들웨어가 실행이 될 것이다.<br/>\n이 미들웨어는 위에 작성한 일반 <code class=\"language-text\">Error</code>를 <code class=\"language-text\">Custom Error</code>로 변환시키는 작업을 해준다.<br/>\n그 뒤 다음 미들웨어로 <code class=\"language-text\">error</code> 객체를 넘겨준다.<br/></p>\n<br/>\n<p><code class=\"language-text\">modules/error.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">errorHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>err<span class=\"token operator\">:</span> ApiError<span class=\"token punctuation\">,</span> req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> res<span class=\"token operator\">:</span> Response<span class=\"token punctuation\">,</span> next<span class=\"token operator\">:</span> NextFunction<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> statusCode<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">,</span> stack <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> err<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> response<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> code<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> stack<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        code<span class=\"token operator\">:</span> statusCode<span class=\"token punctuation\">,</span>\n        message<span class=\"token punctuation\">,</span>\n        stack<span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>env<span class=\"token punctuation\">.</span>nodeEnv <span class=\"token operator\">!==</span> <span class=\"token string\">\"production\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        response<span class=\"token punctuation\">.</span>stack <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>statusCode <span class=\"token operator\">===</span> httpStatus<span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">slack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> log<span class=\"token operator\">:</span> logger<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>stack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> statusCode<span class=\"token punctuation\">,</span> stack<span class=\"token punctuation\">,</span> message <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        logger<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span>stack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span>statusCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>Custom Error로 변환된 Error를 Client에 응답해 주는 미들웨어</p>\n</blockquote>\n<br/>\n<p>일단 <code class=\"language-text\">예상치 못한 오류</code> / <code class=\"language-text\">예상한 오류</code>로 나눠 에러 핸들링을 하였고<br/>\n예상치 못한 오류 <code class=\"language-text\">INTERNAL SERVER ERROR</code>인 경우 제일 높은 단계로 <code class=\"language-text\">logging</code>을 한 뒤 <code class=\"language-text\">Slack Web Hook</code>을 통해 <code class=\"language-text\">Slack</code>으로 오류를 전달해 주는 로직을 짜게 되었다.<br/></p>\n<blockquote>\n<p>심각한 오류가 뜨면 헐레벌떡 컴퓨터를 켜야한다</p>\n</blockquote>\n<p>그 뒤 예상한 오류들은 모두 400번대 <code class=\"language-text\">Https Status Code</code>를 갖고 있어 로깅만 해준다.<br/>\n보통 <code class=\"language-text\">Client</code>에서 잘못된 정보가 온 경우이다.<br/>\n마지막으로 현재 <code class=\"language-text\">statusCode</code>, <code class=\"language-text\">message</code>, <code class=\"language-text\">stack</code>를 응답해 준다.</p>\n<br/>\n<h3 id=\"-error-middleware-적용\" style=\"position:relative;\"><a href=\"#-error-middleware-%EC%A0%81%EC%9A%A9\" aria-label=\" error middleware 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🛤 Error Middleware 적용</h3>\n<br/>\n<p>위처럼 <code class=\"language-text\">Middleware</code>를 작성 했다고 오류가 났을 때 미들웨어가 작동되지 않는다.<br/></p>\n<blockquote>\n<p>당연한 소리지만 연결 해줘야지 🤣</p>\n</blockquote>\n<br/>\n<p><code class=\"language-text\">app.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> apiRouter <span class=\"token keyword\">from</span> <span class=\"token string\">\"@routes/index\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> errorConverter<span class=\"token punctuation\">,</span> errorHandler <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@modules/error\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token comment\">// Api Router</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>apiRouter<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">,</span> apiRouter<span class=\"token punctuation\">.</span>router<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Error Middleware</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>errorConverter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>errorHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>경로의 시작이’@’ 인 이유는 절대경로를 지정했고 <a href=\"https://seongsu.me/nodejs-typescript/\">TypeScript 설정</a>을 참조하자</p>\n</blockquote>\n<br/>\n<p>일단 <code class=\"language-text\">app.ts</code>파일에 <code class=\"language-text\">Error Middleware</code>를 적용시켜준다.<br/>\n이 때 무조건 <code class=\"language-text\">Api Router</code> 밑에 작성해 줘야 정상적으로 작동 한다.<br/></p>\n<blockquote>\n<p>이런다고 미들웨어가 작동하나??? 아니다 또 설정 해줘야 한다.</p>\n</blockquote>\n<br/>\n<p><code class=\"language-text\">modules/error.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">catchError</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>fn<span class=\"token operator\">:</span> <span class=\"token builtin\">Function</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> res<span class=\"token operator\">:</span> Response<span class=\"token punctuation\">,</span> next<span class=\"token operator\">:</span> NextFunction<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">Promise</span><span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>특정 코드에서 오류가 났을때 <code class=\"language-text\">try ... catch</code>방식으로 오류를 잡아 <code class=\"language-text\">Error Middleware</code>로 넘겨주는 함수이다.</p>\n<br/>\n<p><code class=\"language-text\">routes/index.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getInfo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@controllers/index.ts\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> path<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> router<span class=\"token operator\">:</span> Router <span class=\"token operator\">=</span> <span class=\"token function\">Router</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> getInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>밑의 <code class=\"language-text\">controllers/index.ts</code>파일이 어떻게 불러와지는지 이해를 돕는 코드</p>\n</blockquote>\n<br/>\n<p><code class=\"language-text\">controllers/index.ts</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Request<span class=\"token punctuation\">,</span> Response<span class=\"token punctuation\">,</span> NextFunction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"express\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> catchError <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@modules/error\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ApiError <span class=\"token keyword\">from</span> <span class=\"token string\">\"@modules/apiError\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> httpStatus <span class=\"token keyword\">from</span> <span class=\"token string\">\"http-status\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> getInfo <span class=\"token operator\">=</span> <span class=\"token function\">catchError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>req<span class=\"token operator\">:</span> Request<span class=\"token punctuation\">,</span> res<span class=\"token operator\">:</span> Response<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'1'</span> <span class=\"token operator\">===</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"이게 맞냐?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApiError</span><span class=\"token punctuation\">(</span>httpStatus<span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"틀렸다\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>위 처럼 변수를 받아오는 곳에 <code class=\"language-text\">catchError</code>함수로 감싸준 코드를 작성하고 <code class=\"language-text\">http://localhost:${port}/</code> URL에 <code class=\"language-text\">GET</code> 요청을 날려보자.<br/>\n이 때 문자열 ‘1’은 숫자 1이 아니므로 <code class=\"language-text\">new ApiError</code>이 <code class=\"language-text\">throw</code>될 것 이다.<br/></p>\n<br/>\n<p>그때 일반적인 상황에서 따로 <code class=\"language-text\">try ... catch</code>같은 에러 핸들링을 해주지 않았다면 서버는 즉시 종료 될 것이다.<br/>\n하지만 현재 <code class=\"language-text\">Error Middleware</code>를 적용한 경우 <code class=\"language-text\">Error</code>객체가 <code class=\"language-text\">throw</code>된다 해도 서버가 종료되지 않고 다음 미들웨어로 넘어가 오류가 응답되기 때문에 예상치 못한 오류라도 걱정하지 않고 코드를 짤 수 있게 된다.<br/></p>\n<br/>\n<p>이런 방식으로 <code class=\"language-text\">controller</code>단에 미들웨어를 놔준다면 심각한 오류를 막을 수 있고 유지보수에도 도움이 많이 된다.<br/></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-custom-error\">⛔️ Custom Error</a></p>\n<ul>\n<li><a href=\"#-custom-error-%EC%A0%9C%EC%9E%91\">🛠 Custom Error 제작</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-error-middleware\">🚫 Error Middleware</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EA%B7%B8%EB%9E%98%EC%84%9C-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EC%95%BC%ED%95%98%EB%82%98\">❓ 그래서 어떻게 해야하나</a></p>\n<ul>\n<li><a href=\"#span-stylecolor-redmiddleware-%EB%9E%80span\"><span style=\"color: red;\">Middleware 란?</span></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-error-middleware-%EC%9E%91%EC%84%B1\">🚧 Error Middleware 작성</a></p>\n</li>\n<li>\n<p><a href=\"#-error-middleware-%EC%A0%81%EC%9A%A9\">🛤 Error Middleware 적용</a></p>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n<br/>\n<br/>","frontmatter":{"date":"January 06, 2022","title":"Express error middleware & Custom error module","categories":"Node.js Express","author":"seongsu","emoji":"7️⃣"},"fields":{"slug":"/skill/express-error-middleware/"}},"site":{"siteMetadata":{"siteUrl":"https://seongsu.me","comments":{"utterances":{"repo":"nfl1ryxditimo12/nfl1ryxditimo12.github.io"}}}}},"pageContext":{"slug":"/skill/slack-bot/","nextSlug":"/skill/express-tdd/","prevSlug":"/skill/express-error-middleware/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}