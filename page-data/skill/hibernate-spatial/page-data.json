{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/skill/hibernate-spatial/",
    "result": {"data":{"cur":{"id":"c316931f-bff2-5758-8803-7f65f7df02be","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAC4iAAAuIgGq4t2SAAAB20lEQVQY0x2RzWvTYByAf/hBwGm1HR7UgQfx6kEQZSB42Gng/MBSaUy62ua7ed+k6eqavP2yw0VE6FVRUMdApiZpVoXRpEn9QA/iVY+ymwdP/gGR9fY8l+fyQPLnEUx8AowoQ5bTwO73oaytQFE1gJU1YBVt6iVcg2wZw9YrAp8/dCD0H8B40ILY70I0aEPkdyDevg+QJJv7v7xvnQa4DHnJOJgkCYi1BlXW6lShos8uV6qHuOq9DKevHM3xeubNRnPm684aFQ3tfbHfpSbD3uHI78zF293ZyXAtAyWEnr5+UU/+/exdPL8onCkomKdFVKYF9SotojYjY8QqOr6r6ku3SujxxrNVbuKT/uiddSl0iRR6ZHnsNYuha1XHXvMG3BHRE7Nl3BQ0jeS4yjVGxgwtIj4vqNdpERFGwgar6Kio6ou3eby++Xx1IRpYvcAxSeiaeuhaUjRozweOuRdegt3vdjpwzE9GA/+9klXOHr/AAy2iI7SIZhhZmysoeiovqKcYGaVzvJZat2uZ39/IgZFjnghdiwpdcmzsNVOB00iHrnUSfoxaMPas+Z231rmtl3VIkhhoQd2LAiPh6RRaVIGVMeR4DeyHNfj1kcDIMSFwTQhdazoncBpT/g85e9N6OvY2NAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hibernate logo\"\n        title=\"hibernate logo\"\n        src=\"/static/9fcaa2ae1ae6ab14b2e461d825c39d97/37523/Hibernate_logo.png\"\n        srcset=\"/static/9fcaa2ae1ae6ab14b2e461d825c39d97/e9ff0/Hibernate_logo.png 180w,\n/static/9fcaa2ae1ae6ab14b2e461d825c39d97/f21e7/Hibernate_logo.png 360w,\n/static/9fcaa2ae1ae6ab14b2e461d825c39d97/37523/Hibernate_logo.png 720w,\n/static/9fcaa2ae1ae6ab14b2e461d825c39d97/302a4/Hibernate_logo.png 1080w,\n/static/9fcaa2ae1ae6ab14b2e461d825c39d97/07a9c/Hibernate_logo.png 1440w,\n/static/9fcaa2ae1ae6ab14b2e461d825c39d97/58916/Hibernate_logo.png 2313w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"-hibernate-spatial\" style=\"position:relative;\"><a href=\"#-hibernate-spatial\" aria-label=\" hibernate spatial permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>💽 Hibernate Spatial</h2>\n<br>\n<p>Hibernate Spatial은 지리 데이터를 계산하기 위해 만들어 졌고, Hibernate 5.0 버전 부터 Hibernate 라이브러리에 공식적으로 마이그레이션이 됐다.<br></p>\n<p>현재 지원하는 데이터베이스는 <code class=\"language-text\">Oracle</code>, <code class=\"language-text\">PostgreSQL</code>, <code class=\"language-text\">MySQL</code>, <code class=\"language-text\">MSSQL</code>, <code class=\"language-text\">H2</code>이고, 각 데이터베이스에 구현 되어있는 지리 데이터처리 구현체를 추상화한 인터페이스가 <code class=\"language-text\">Hibernate Spatial</code>이다.<br></p>\n<p>Hibernate Spatial은 <a href=\"https://www.tsusiatsoftware.net/jts/main.html\">JTS</a>와 <a href=\"https://github.com/GeoLatte/geolatte-geom\">\ngeolatte-geom</a>이라는 기하학 모델을 제공한다고 한다.<br></p>\n<p>이러한 GIS(Geometry Information System)를 <code class=\"language-text\">Native Query</code>로 날리지 않고 Hibernate에 추상화된 함수를 통해 JPQL로 쉽게 짤 수 있다.<br></p>\n<br>\n<h3 id=\"-어떤-데이터베이스를-사용해야-할까\" style=\"position:relative;\"><a href=\"#-%EC%96%B4%EB%96%A4-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC-%ED%95%A0%EA%B9%8C\" aria-label=\" 어떤 데이터베이스를 사용해야 할까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>👈 어떤 데이터베이스를 사용해야 할까?</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABnElEQVQoz2WTiW7EIAxE8///2ao5IAc3JJlqht20VSNZGC+xX2bYwa471u3A4QK23T3rbCycD+Bz3zfO80TOGaUUtNa0Z/4O1mqtGEIIaLXi93NdJ5xzasBmDL6w7zt4fhxHeO8RQ9Cesa4rjuPAYKzBPE8KHtz3DTknRSn5yVOKqLWoFoLX/v076zEG5JIxcOq6WmzbpinE5sF5nhFjxHVdilQScs04z/bkuSTEHNHOprW2iuHz8wPGLNi2VY05iQTLMsO5oxOmBB8cQuxkLhzPnrlqvq8inKbp0aWLnaUXNSQRg59TKsWvIuv7LFrWuIrQWiuyZVlgjFEjNuYQrtSHMpAmpqBhPjrlDObvGgcNb+3YmE1T6iZQBmrYCU+kHEVFGuolHaVheGr8goF0JGMDGuG9UyO6/kNY/hGGFBR/CLMIVzncmxoZQu04gLSku0j4cpb3Mb5oGXK5/XKZL3YNZ0xTv4dsOo5futyczn+CqKIXhXs53F12T42yDNYaaUj9GKTthEaEvIP3dT8ukzjS2ZTQclYujUsn/AbQAqD9hs4OyQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"hibernate function\"\n        title=\"hibernate function\"\n        src=\"/static/aa68a854a10bee6dbf747f03da7df2d2/37523/hibernate-function.png\"\n        srcset=\"/static/aa68a854a10bee6dbf747f03da7df2d2/e9ff0/hibernate-function.png 180w,\n/static/aa68a854a10bee6dbf747f03da7df2d2/f21e7/hibernate-function.png 360w,\n/static/aa68a854a10bee6dbf747f03da7df2d2/37523/hibernate-function.png 720w,\n/static/aa68a854a10bee6dbf747f03da7df2d2/302a4/hibernate-function.png 1080w,\n/static/aa68a854a10bee6dbf747f03da7df2d2/07a9c/hibernate-function.png 1440w,\n/static/aa68a854a10bee6dbf747f03da7df2d2/6e52c/hibernate-function.png 1948w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p><a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#spatial-configuration\">Hibernate Spatial Function</a></p>\n</blockquote>\n<br>\n<p>Geometry 함수를 지원하는 데이터베이스는 많이 있다. 하지만 이 포스팅에서 작성할 내용인 <code class=\"language-text\">ST_Distance</code>, <code class=\"language-text\">ST_Dwithin</code>과 같은 좌표 간 거리를 간단하게 반환해주는 함수를 사용하기엔 이식성이 떨어지는 데이터베이스가 존재한다.<br></p>\n<p>원래는 MySQL을 사용하려 했지만, 위 거리계산 함수를 Hibernate에서 지원하지 않아 <code class=\"language-text\">Native Query</code>로 사용해야 돼 ORM을 사용하는 이유를 찾지 못해 PostreSQL을 사용하기로 했다.<br></p>\n<p>또한 테스트를 위해 H2 Database를 사용해야 하는데, H2GIS가 PostGIS를 기반으로 제작되어서 테스트가 용이한 이유도 있다.<br></p>\n<br>\n<h2 id=\"️-postgresql-postgis-설치\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-postgresql-postgis-%EC%84%A4%EC%B9%98\" aria-label=\"️ postgresql postgis 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⬇️ PostgreSQL, PostGIS 설치</h2>\n<br>\n<p>우선 원하는 PostgreSQL을 설치하고, PostgreSQL로 지리계산을 하려면 <code class=\"language-text\">PostGIS</code> 라이브러를 설치해야 한다.<br></p>\n<p><code class=\"language-text\">PostgreSQL 설치 방법과 버전은 너무 간단하니 패스!</code><br></p>\n<blockquote>\n<p><a href=\"https://postgis.net/tags/3/\">PostGIS Relase</a></p>\n</blockquote>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 8.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAYUlEQVQI1z2OSwqAMAxEuxS0H/EGYn+4EW1avP/BIhNqF2GSmeERZSKxTZWhGJcqu9x4O1+55+OWe82NdSgjx24jiWpfJDeBWC3+kQKKYnYwgChP+zU8dG0H/o8ANoCR+AO02DiVyhMOcgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"postgis relase\"\n        title=\"postgis relase\"\n        src=\"/static/c4551a7abb8e2fce4f936bf1a91c81b9/37523/postgis-relase.png\"\n        srcset=\"/static/c4551a7abb8e2fce4f936bf1a91c81b9/e9ff0/postgis-relase.png 180w,\n/static/c4551a7abb8e2fce4f936bf1a91c81b9/f21e7/postgis-relase.png 360w,\n/static/c4551a7abb8e2fce4f936bf1a91c81b9/37523/postgis-relase.png 720w,\n/static/c4551a7abb8e2fce4f936bf1a91c81b9/302a4/postgis-relase.png 1080w,\n/static/c4551a7abb8e2fce4f936bf1a91c81b9/07a9c/postgis-relase.png 1440w,\n/static/c4551a7abb8e2fce4f936bf1a91c81b9/68638/postgis-relase.png 1510w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>위 링크에서 릴리즈 버전을 선택할 때 지원하는 PostgreSQL 버전을 꼭 확인해야 한다!</p>\n</blockquote>\n<br>\n<p>PostgreSQL, PostGIS 설치가 모두 끝났으면, Extension 설정을 다음과 같이 해줘야 한다.<br></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> EXTENSION postgis<span class=\"token punctuation\">;</span></code></pre></div>\n<p>이제 데이터베이스에 지리데이터 계산 함수를 사용할 수 있고, 지리데이터 타입을 사용할 수 있게 된다.<br></p>\n<p>PostGIS 지리 함수에 대해선 아래 링크를 참고해보자<br></p>\n<blockquote>\n<p><a href=\"https://postgis.net/docs/manual-1.5/ch08.html\">PostGIS Special Functions Index</a></p>\n</blockquote>\n<br>\n<h2 id=\"️-hibernate-설치-및-설정\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-hibernate-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%84%A4%EC%A0%95\" aria-label=\"️ hibernate 설치 및 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✍️ Hibernate 설치 및 설정</h2>\n<br>\n<p>우선 Gradle설정을 해준다.<br></p>\n<div class=\"gatsby-highlight\" data-language=\"gradle\"><pre class=\"language-gradle\"><code class=\"language-gradle\">plugins {\n    id &#39;org.springframework.boot&#39; version &#39;2.7.5&#39;\n}\n\ndependencies {\n  implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\n  implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\n  implementation group: &#39;org.hibernate&#39;, name: &#39;hibernate-spatial&#39;\n  implementation group: &#39;org.postgresql&#39;, name: &#39;postgresql&#39;\n  runtimeOnly &#39;org.postgresql:postgresql&#39;\n}</code></pre></div>\n<p>Spring은 <code class=\"language-text\">2.7.5</code>버전을 사용할 예정이고 Hibernate는 <code class=\"language-text\">spring-boot-starter</code>에 명시된 버전을 사용할 것이다.<br></p>\n<p>그리고 <code class=\"language-text\">hibernate-spatial</code>, <code class=\"language-text\">jpa</code>, <code class=\"language-text\">postgresql</code> implementation을 추가해준다.<br></p>\n<blockquote>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/2.7.5/reference/html/dependency-versions.html#appendix.dependency-versions\">Spring boot 2.7.5 라이브러리 의존성은 여기서 확인</a></p>\n</blockquote>\n<p>Spring boot 버전 별 라이브러리 의존성은 <a href=\"https://spring.io/blog\">스프링부트 공식 페이지</a>에 잘 나와있다!<br></p>\n<br>\n<h3 id=\"️-applicationyml-설정\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-applicationyml-%EC%84%A4%EC%A0%95\" aria-label=\"️ applicationyml 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⚙️ application.yml 설정</h3>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">datasource</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> jdbc<span class=\"token punctuation\">:</span>postgresql<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>5432/test_db <span class=\"token comment\"># DB host</span>\n    <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> username <span class=\"token comment\"># DB username</span>\n    <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> password <span class=\"token comment\"># DB password</span>\n    <span class=\"token key atrule\">driver-class-name</span><span class=\"token punctuation\">:</span> org.postgresql.Driver <span class=\"token comment\"># DB driver</span>\n  <span class=\"token key atrule\">jpa</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">hibernate</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">ddl-auto</span><span class=\"token punctuation\">:</span> create <span class=\"token comment\"># 작성된 entity에 따라 스키마 자동 생성</span>\n      <span class=\"token key atrule\">use-new-id-generator-mappings</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span> <span class=\"token comment\"># pk 설정</span>\n    <span class=\"token key atrule\">properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">hibernate</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">format_sql</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">use_sql_comments</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token comment\"># 중요!!</span>\n    <span class=\"token key atrule\">database-platform</span><span class=\"token punctuation\">:</span> org.hibernate.spatial.dialect.postgis.PostgisDialect</code></pre></div>\n<br>\n<p>위에서 중요한 부분은 <code class=\"language-text\">spring.jpa.database-platform</code>이고, 이 부분은 Hibernate Spatial의 지리 함수를 썼을 때 PostGIS 함수로 매핑해주는 Dialect 설정이다.<br></p>\n<p>PostgreSQL 버전에 따라 Dialect가 다른데 이는 아래 링크에 첨부하겠다.<br></p>\n<blockquote>\n<p><a href=\"https://docs.jboss.org/hibernate/orm/5.4/javadocs/org/hibernate/spatial/dialect/postgis/package-summary.html\">Package org.hibernate.spatial.dialect.postgis</a></p>\n</blockquote>\n<br>\n<h3 id=\"-jpql로-작성한-gis-함수\" style=\"position:relative;\"><a href=\"#-jpql%EB%A1%9C-%EC%9E%91%EC%84%B1%ED%95%9C-gis-%ED%95%A8%EC%88%98\" aria-label=\" jpql로 작성한 gis 함수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔌 JPQL로 작성한 GIS 함수</h3>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>locationtech<span class=\"token punctuation\">.</span>jts<span class=\"token punctuation\">.</span>geom<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Point</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>persistence<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">,</span> unique <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span> nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"gps\"</span><span class=\"token punctuation\">,</span> nullable <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Point</span> gps<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>우선 거리 계산을 위해 <code class=\"language-text\">Test</code> 엔티티를 작성해 주고, <code class=\"language-text\">Geometry</code> 타입인 Point 타입을 이용해 컬럼을 작성해 준다.<br></p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">TestRepository</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">JpaRepository</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Test</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">/*\n        dwithin 함수는 반경(단위: m) 내에 존재하는지 boolean 값으로 응답함\n        4번째 인자는 평면에서 구할 것인지, 구에서 구할 것인지 정하는 flag로 false인 경우 구에서 거리를 계산함\n    */</span>\n    <span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"select t from Test t where dwithin(t.gps, :point, 30000, false) = true\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Test</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findTestByDistance</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"point\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Point</span> point<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>그 뒤 Repository에서 <code class=\"language-text\">JPQL</code>을 사용하여 where절에 GIS 함수인 <code class=\"language-text\">dwithin</code>을 사용해 데이터베이스에 저장된 좌표와의 거리계산을 통해 List로 응답을 받게 코드를 작성한다.<br></p>\n<blockquote>\n<p><a href=\"https://postgis.net/docs/ST_DWithin.html\">Dwithin이란? (PostGIS ST_Dwithin)</a></p>\n</blockquote>\n<br>\n<p>Hibernate에 정의된 내용에 따르면, 두 Geometry(Point)타입과 Double 형인 distance를 사용하여 두 좌표간 거리가 distance 내에 포함되는지 <code class=\"language-text\">boolean</code> 형태로 리턴해 주는 함수이다.<br></p>\n<blockquote>\n<p>distance 기준은 미터이다.</p>\n</blockquote>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAdklEQVQI142Oyw7CMBAD+/8/ilBKQvcVlTQZlCDOYGlk78Xe7b4X9iKEO2G2cHdOVVoE13XRW6P3zhjjJ9uen9xSQUQ/ZapEBK9ZNv086bUyWuMfbY+cSSmRcyaXwrxFBHNHVFGzlefXx3GgqpjZ8lrrGp988xsbSumY0vB3NQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"st_dwithin\"\n        title=\"st_dwithin\"\n        src=\"/static/a68d0b29d915d41cd0bffc681c533df6/37523/st_diwthin.png\"\n        srcset=\"/static/a68d0b29d915d41cd0bffc681c533df6/e9ff0/st_diwthin.png 180w,\n/static/a68d0b29d915d41cd0bffc681c533df6/f21e7/st_diwthin.png 360w,\n/static/a68d0b29d915d41cd0bffc681c533df6/37523/st_diwthin.png 720w,\n/static/a68d0b29d915d41cd0bffc681c533df6/302a4/st_diwthin.png 1080w,\n/static/a68d0b29d915d41cd0bffc681c533df6/07a9c/st_diwthin.png 1440w,\n/static/a68d0b29d915d41cd0bffc681c533df6/0a077/st_diwthin.png 3552w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>PostGIS description</p>\n</blockquote>\n<br>\n<p>위 레포지토리 코드를 보면, 4번째 인자로 boolean이 추가되었는데<br>\n이는 주석에 적혀있는 것처럼 <code class=\"language-text\">구</code>에서 거리 계산을 할 것인지, <code class=\"language-text\">평면</code>에서 계산할 것인지 나타내는 값으로 위도, 경도를 이용한 거리 계산이 필요하다면 <code class=\"language-text\">true</code>로 인자를 전달하면 된다.<br></p>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-hibernate-spatial\">💽 Hibernate Spatial</a></p>\n<ul>\n<li><a href=\"#-%EC%96%B4%EB%96%A4-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC-%ED%95%A0%EA%B9%8C\">👈 어떤 데이터베이스를 사용해야 할까?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EF%B8%8F-postgresql-postgis-%EC%84%A4%EC%B9%98\">⬇️ PostgreSQL, PostGIS 설치</a></p>\n</li>\n<li>\n<p><a href=\"#%EF%B8%8F-hibernate-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%84%A4%EC%A0%95\">✍️ Hibernate 설치 및 설정</a></p>\n<ul>\n<li><a href=\"#%EF%B8%8F-applicationyml-%EC%84%A4%EC%A0%95\">⚙️ application.yml 설정</a></li>\n<li><a href=\"#-jpql%EB%A1%9C-%EC%9E%91%EC%84%B1%ED%95%9C-gis-%ED%95%A8%EC%88%98\">🔌 JPQL로 작성한 GIS 함수</a></li>\n</ul>\n</li>\n</ul>\n</div>\n<br>\n<br>","excerpt":"💽 Hibernate Spatial Hibernate Spatial은 지리 데이터를 계산하기 위해 만들어 졌고, Hibernate 5.0 버전 부터 Hibernate 라이브러리에 공식적으로 마이그레이션이 됐다. 현재 지원하는 데이터베이스는 , , , , 이고, 각 데이터베이스에 구현 되어있는 지리 데이터처리 구현체를 추상화한 인터페이스가 이다. Hibernate Spatial은 JTS와 \ngeolatte-geom이라는 기하학 모델을 제공한다고 한다. 이러한 GIS(Geometry Information System)를 로 날리지 않고 Hibernate에 추상화된 함수를 통해 JPQL로 쉽게 짤 수 있다. 👈 어떤 데이터베이스를 사용해야 할까?  Hibernate Spatial Function Geometry 함수를 지원하는 데이터베이스는 많이 있다. 하지만 이 포스팅에서 작성할 내용인 , 과 같은 좌표 간 거리를 간단하게 반환해주는 함수를 사용하기엔 이식성이 떨어지는 데이터베이스가 …","frontmatter":{"date":"October 08, 2022","title":"Hibernate Spatial을 이용한 좌표간 거리계산 (feat. PostGIS, H2GIS)","categories":"Spring","author":"seongsu","emoji":"1️⃣9️⃣"},"fields":{"slug":"/skill/hibernate-spatial/"}},"next":{"id":"75c4e40a-e9f0-5a39-af16-92fffe954ad8","html":"<h2 id=\"-session-이란\" style=\"position:relative;\"><a href=\"#-session-%EC%9D%B4%EB%9E%80\" aria-label=\" session 이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🌊 Session 이란?</h2>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">반영구적이고 상호작용적인 정보 교환을 전제하는 둘 이상의 통신 장치나 컴퓨터와 사용자 간의 대화나\n송수신 연결상태를 의미하는 보안적인 다이얼로그(dialogue) 및 시간대를 가리킨다.\n따라서 세션은 연결상태를 유지하는 것보다 연결상태의 안정성을 더 중요시 하게 된다.</code></pre></div>\n<blockquote>\n<p>[출처] <a href=\"https://en.wikipedia.org/wiki/Session_(computer_science)\">Wikipedia</a></p>\n</blockquote>\n<br>\n<p>쉽게 설명하자면 웹에선 <code class=\"language-text\">Client</code>가 사이트에 접속해 어느 위치에 있는지, 어떤 상호작용을 했는지 등 <code class=\"language-text\">Client</code>의 정보를 서버에 저장해 <code class=\"language-text\">Stateful</code>한 상태를 유지하는 개념이다.<br>\n세션을 쿠키와 굉장히 헷갈려 하는데, 일단 쿠키는 <code class=\"language-text\">Client side</code>에서 관리되고, 세션은 <code class=\"language-text\">Server side</code>에서 관리된다.<br></p>\n<br>\n<p>세션은 쿠키처럼 가시적인 부분에 있는 것이 아니라 이해하기 힘든데, 서버에 파일, 메모리, DB등 어디에든 저장되어 <code class=\"language-text\">Client</code>의 상태 관리를 하는 개념이다.<br>\n추상적인 개념이지만, 사용자가 사이트에 접속해 나가기 전 까지 서비스에 따라 사용자의 데이터를 서버에서 관리하는 것이다.<br></p>\n<br>\n<h2 id=\"-session을-유지시키는-방법\" style=\"position:relative;\"><a href=\"#-session%EC%9D%84-%EC%9C%A0%EC%A7%80%EC%8B%9C%ED%82%A4%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\" session을 유지시키는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤝 Session을 유지시키는 방법</h2>\n<br>\n<p>프레임워크 내부 <code class=\"language-text\">세션 라이브러리</code>를 사용하는 방법이 제일 편하고, 사용하기 쉽지만, 이번엔 다른 방법으로 세션을 구현해 보려 한다.<br></p>\n<br>\n<h3 id=\"-세션을-구현하기-위한-다양한-방법\" style=\"position:relative;\"><a href=\"#-%EC%84%B8%EC%85%98%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EB%8B%A4%EC%96%91%ED%95%9C-%EB%B0%A9%EB%B2%95\" aria-label=\" 세션을 구현하기 위한 다양한 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>💾 세션을 구현하기 위한 다양한 방법</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACKklEQVQoz1WT62sTURDF888LfhGrlKKIiIIPKLRV1A9WsPWRllY0tYlF27R5NJu7u9m77+fdzU/uDY3th9kZuMOZM+fMtqqqQilFrZTJTa2I05xL22fi+FhuQFkuenTv9eicTtjt9Nn52afdHZi+lm4sq4osL0iynHlT0zmzWNncN3F/a5+JG1DX9TJgjhskvNw55vH2EY8+dHj6sWMwWhpAs7iz/oVbL3boDR3iJMGVkiCKEY5DkGQ4fsLppUtvYPNn5DJ0Ii5sDyfOmKUlTpQa1i29ql7xV3/MX2uGJRPiOMYWgiAIsCyLSinavSEP3h3yZPuItbcHDGwfx53hzjycmYewHapK0aJpmHoh9za+cfvVLicjB1VVJElCnuekaUpeVoxtj+7FhJEXcy48w9h1XQLfN4O92ew/Q1tG7PX6dC4EIzdcmFTXJhujmoavxwPube6x+uaAuxtto6EGDMPQAOraAOZ5wfPtH6xt7bGy/pmzS5d50yyd1GyLUjFxPPoTgZ9XCD9CRilTIZBSmhBCmOEt7XDfchjLmIHrM5Wx0UKp6yeiGNuSw98Dvp8M2e9eECaZkSPLMiONzoah/oymNkKGTD2fKMlu3JweOJ/rlc9Zfd3m2acuD98fIrzISKF7542WaCGPAZSeRxSG+FJSFsUS8CprndM8x49TMlWTFBVZUZr3oqyQUbkkYAD1hS+ivAF0vb76m67qhXH65EqOBylukBMmJf8AJew4ynevXGEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"diagram\"\n        title=\"diagram\"\n        src=\"/static/99143014b8d47b2d54c4c9a1ed2973f4/37523/diagram.png\"\n        srcset=\"/static/99143014b8d47b2d54c4c9a1ed2973f4/e9ff0/diagram.png 180w,\n/static/99143014b8d47b2d54c4c9a1ed2973f4/f21e7/diagram.png 360w,\n/static/99143014b8d47b2d54c4c9a1ed2973f4/37523/diagram.png 720w,\n/static/99143014b8d47b2d54c4c9a1ed2973f4/302a4/diagram.png 1080w,\n/static/99143014b8d47b2d54c4c9a1ed2973f4/35252/diagram.png 1204w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위와 같은 게임 데이터가 있다고 가정을 해보고 세션 설계를 진행해 보자.<br>\n일단 <code class=\"language-text\">Third-party DB</code>를 사용하는 방법, <code class=\"language-text\">서버 힙 메모리</code>를 이용하는 방법이 있다.<br></p>\n<br>\n<p>서비스 요구사항에 다르겠지만, 영속성이 보장되어야 하는 서비스의 경우 <code class=\"language-text\">Third-party DB</code>를 사용하면 좋을 것 같고, 그 중 <code class=\"language-text\">Update</code>가 빈번히 일어나는 설계가 된다면 <code class=\"language-text\">RDB</code>를 이용해 구현하면 좋을 것 같다.<br>\n이외의 상황이라면 <code class=\"language-text\">In-memory DB</code> 또는 <code class=\"language-text\">Disk-based DB</code>의 <code class=\"language-text\">noSQL</code>을 사용할 것 같다.</p>\n<blockquote>\n<p>noSQL은 데이터의 구조가 클 때, <code class=\"language-text\">Update</code>가 빈번히 일어나면 성능상 좋지 않다.</p>\n</blockquote>\n<br>\n<p>만약 영속성 보장이 필요없는 서비스거나, 빠른 개발을 목적으로 한다면 <code class=\"language-text\">서버 힙 메모리</code>에서 세션을 관리하면 좋을 듯 하다.<br></p>\n<br>\n<h2 id=\"-메모리로-세션을-유지하는-방법\" style=\"position:relative;\"><a href=\"#-%EB%A9%94%EB%AA%A8%EB%A6%AC%EB%A1%9C-%EC%84%B8%EC%85%98%EC%9D%84-%EC%9C%A0%EC%A7%80%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\" 메모리로 세션을 유지하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📱 메모리로 세션을 유지하는 방법</h2>\n<br>\n<p><code class=\"language-text\">JavaScript</code>의 자료구조를 적절히 이용하여 세션을 유지해보자.<br>\n자료구조와, <code class=\"language-text\">JavaScript</code>의 Argument 전달 전략을 적절히 섞으면, 메모리 유실 없이 <code class=\"language-text\">Client</code>의 세션을 유지시킬 수 있다. 이 때, <a href=\"https://en.wikipedia.org/wiki/Evaluation_strategy\">평가 전략</a>인 Call by sharing을 이용하고, <a href=\"https://en.wikipedia.org/wiki/Hash_table\">Hash Table</a>을 사용하는 자료구조인 <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value-zero_equality\">Map</a>을 사용할 예정이다.<br></p>\n<br>\n<h3 id=\"-call-by-sharing-이란\" style=\"position:relative;\"><a href=\"#-call-by-sharing-%EC%9D%B4%EB%9E%80\" aria-label=\" call by sharing 이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📞 Call by sharing 이란?</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB/UlEQVQoz3VSia6iUAzl/z/KUcfEgScOKgqIC3JZBNlEwQXwvLRvfMlMMk2ahh56255Tqb7dcK0qbDYb2LYNIQTu9zvK8oKqrpEXBUzTZNwwTBRFgev1ylh4PMKyLJimBdcVqOsa0ukYIfR8OHsH2+0Wu+0OZVni+XyiyHLGKE++XttIkgRt2yJLEgTCw26342aO46CqKkibuQ5L1aBNp5AVGbquw3Vd3O53BPsD9LEC7beG6XQKRVE40nQHy8bqQ8VkMoEsyzAMg4eQXCHghyGatkXTNOi6Dm+LkxP2B4dXoXzTtBxfrxeCMITjHhBFEQ8QhiFPLgnXReb6SAWtvefViBfiKo9iJHvBdKxtm/NxHDOHfhAgdgQS8UUJ5W+3G6ThYICf/QEmygfG4zGPPxqNkOc5LNPE8Eef85qmfXN5Ppf8Pez3QfW9Xg+r1QqXywUSker7Pqq64gQ5TUBO4pSXC0fqThzRBRAFi8UCv2QZK8NgYagRrS9RIT2SJinSNGUV6YHH48GRVs+yDKfTif18PjOWJCmOxyOyNGN1yektiSSfz+cIguC7mAAyKpjNZswPNSMa3pjneZioKrT5nNdXVZXPRyJlaZV/jZT8H0a2XC6hyDIc3YC1WOLgutxUev/QdS8+ifdZvOMX1v3llI7iGJ7w0D6ewJ//yD4Bp5EyPFX4jCwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"call by ..\"\n        title=\"call by ..\"\n        src=\"/static/7ca7d8abb85e50cc1b302eafa47efcee/37523/call_by.png\"\n        srcset=\"/static/7ca7d8abb85e50cc1b302eafa47efcee/e9ff0/call_by.png 180w,\n/static/7ca7d8abb85e50cc1b302eafa47efcee/f21e7/call_by.png 360w,\n/static/7ca7d8abb85e50cc1b302eafa47efcee/37523/call_by.png 720w,\n/static/7ca7d8abb85e50cc1b302eafa47efcee/302a4/call_by.png 1080w,\n/static/7ca7d8abb85e50cc1b302eafa47efcee/b1584/call_by.png 1342w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>[출처] <a href=\"https://www.educative.io/answers/what-is-call-by-sharing\">What is call by sharing?</a></p>\n</blockquote>\n<br>\n<p>자료구조를 알아보기 앞서, JavaScript의 특별한 매개변수 전달 전략에 대해 설명하려 한다.<br>\nCall by sharing이란, <code class=\"language-text\">Strict binding strategies</code>에 속해있는 Call by value와 Call by reference를 섞은<code class=\"language-text\">평가 전략</code>이라고 한다.<br>\n전달되는 인자 자체는 <code class=\"language-text\">Call by value</code>로 작동하지만, 인자 내부의 값은 <code class=\"language-text\">Call by reference</code>로 작동한다. 즉 전달되는 인자는 <code class=\"language-text\">복사</code>되어 전달되지만 인자가 가르키는 객체 내부의 주소는 공유가 되는 형식이다.<br></p>\n<br>\n<p>이러한 <code class=\"language-text\">얕은 복사</code>가 일어나는 것을 명심해서 코드를 작성해야 하고, <code class=\"language-text\">깊은 복사</code>를 원한다면, 클래스의 복사생성 전략을 사용하던지, 메모리를 새로 할당해서 직접 저장하는 방식을 택해야 한다.<br></p>\n<br>\n<h3 id=\"-map-자료구조\" style=\"position:relative;\"><a href=\"#-map-%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0\" aria-label=\" map 자료구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🗺 Map 자료구조</h3>\n<br>\n<p><code class=\"language-text\">JavaScript</code>의 Map 자료구조는 <code class=\"language-text\">Hash Table</code> 알고리즘으로 구현되어 있다.<br>\n간략히 설명해보면, key를 구현된 <code class=\"language-text\">Hash Function</code>으로 해싱을 하고, 인덱스로 활용하는 방식이다.<br>\n해싱을 진행할 때 알고리즘이 제일 중요시 되며, Result가 중복되는 Index일 수 있어, <code class=\"language-text\">Collision</code>에 대해서도 잘 대응을 해야한다.<br></p>\n<br>\n<p>해싱 알고리즘에 따라 다르지만 key 해싱이 된 후엔 평균 O(1)의 시간 복잡도를 가진다.<br></p>\n<blockquote>\n<p>해싱된 Index에 Value를 넣기만 하면 돼서 최선의 경우 O(1)이지만, 해싱된 Index의 충돌 등 최악의 경우 O(N)까지 복잡도가 커진다.</p>\n</blockquote>\n<br>\n<h3 id=\"-hash-table의-collision-관리\" style=\"position:relative;\"><a href=\"#-hash-table%EC%9D%98-collision-%EA%B4%80%EB%A6%AC\" aria-label=\" hash table의 collision 관리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 Hash Table의 Collision 관리</h3>\n<br>\n<p><code class=\"language-text\">Collision</code>을 해결하기 위한 여러 전략이 있는데 이 중 <code class=\"language-text\">Separate chaining</code>과 <code class=\"language-text\">Open Addressing</code>의 <code class=\"language-text\">Linear probing</code>에 대해서만 간단히 설명하겠다.<br></p>\n<br>\n<blockquote>\n<p>Separate chaining (분리 연결법)</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEAElEQVQ4y11UbUxbVRh+oLS04nRlMFAwDqbRqASzuKBmMWM6F7JFqQQCBUNVMuq6xI1Mevt528stFASlE5aIgFPWTaJksxspZMtW+kEZUGjZdZRGCrXAEFjCh/uMyzXXj/3YSU7Omyfved6T93neAzyyhELhw5hl2YexQCBAviEfSpfy0Sso/KIQ5hkzdD7df0h8/Bbw+SnIyuIlAOABiEPc//mbACTy+YLE7HezUWAu4LAYAFsBpANIyCnNQetGK/KIPAAVFVzCUwBeBBALuQLJaekxHGv3xdZdOlOV4lClohxAEpeYX5OP7PeyBaInRc/F8mJfBpDK4XsO74n5t/6dO/FgWQFYlse7e1fEncfqzdicHhffYwvYzw4MrZwc6zwHIFnv09vqput8hgmDxzBhcDZEGgbMYbNbN6rzaEe0jClkagTW15swM+PH7KwD8/P+pI0/9/7TuacT0850M26r3c02XW7wctDBHw4+K+uUZRY1FmVITJLMEktJpqxDllncXJwh/Vq6XdYhSwE2NnYgGs1DKPQOlpf3vdDbm0EA4hQAvhn7Pqe/t8JmO/8BAP7RvqOk8ZrxhHZYa1F71ccphjpuZIzH9eP6Zs2w5lsjY6wEbt9WYXbWhlDoFG7csGFtdRcLxHGvdE6NVFwac9T29P0s53ola5cdMU2ZPiXHSbl+XC83hUxyOkjLST9ZSfrJz0xTpjzg/v08rKwosLT0CW7dOgyW3caRrSRuSp9UKAYdjSq21vvlIGchWYes1DBheJ8MkPtJP3mA2xRDHdCP6fdrhjUSiqF2Ag8efIxw2AKGMWFpqRlz8zvDQMIbicLnT1dfvNTW0r1eNXjEzhFSDNWoH9P/pHQrTxFuwqod0Vqp65SVcBNdSpfyHB2kjwGrq2WIROoQieiwsFC7zed77SMgGa+/Krjy6+R3fWNDjLW/qxuASKKRJMk6ZeICc4FY2iIVl7eXi0ssJeLS1lJx2YmyLRJa8jinchEiERLR6OeYmyMTotFXYoHNnKrBxR8z+h0dO063db/E3xqXqvaqB8wz5im1V31N7VVzNmHoIM1ormoCmmHN73SQbuV8KEcw2IbR0SYsLn6DP5ZyOEWxPe0JuyNw1uZyLZx0dv7SYv8KPWyPoLi5WGQOm4V0kBZKW6TC8vZyIeknhbW/1YpKLCUCTpS3sLxchoWFQqytfchj2WdiuRkWC1K7rJPe7y942CZP/QDnTO2w9kz9bP1l7Yi2j/AQ/XXTdf0112v6NVc1dpVX5aEnaQq4dw+YnwfCYeDmTe5HAP5igccSMDo9dMgVcFjOX7lQxY0l4STepBjqbdWgane1szrXEDDk6ny6XMJD7Fa6lHt1o7qsvwExk9YuECz3eAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"separate_chaining\"\n        title=\"separate_chaining\"\n        src=\"/static/f818db27035ddf89cfe8e624d936c277/37523/separate_chaining.png\"\n        srcset=\"/static/f818db27035ddf89cfe8e624d936c277/e9ff0/separate_chaining.png 180w,\n/static/f818db27035ddf89cfe8e624d936c277/f21e7/separate_chaining.png 360w,\n/static/f818db27035ddf89cfe8e624d936c277/37523/separate_chaining.png 720w,\n/static/f818db27035ddf89cfe8e624d936c277/1cfc2/separate_chaining.png 900w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>동일 해싱 Index인 경우 해당 인덱스에 <code class=\"language-text\">Linked list</code> 형식으로 나열하는 충돌 관리 기법이다.<br>\nbucket에 해당 key의 <code class=\"language-text\">해싱된 Index</code>가 보장될 수 있지만, 동일 인덱스 데이터가 많아질 경우 특정 데이터를 찾을 때 성능을 보장할 수 없다.<br></p>\n<br>\n<blockquote>\n<p>Linear probing (선형 탐색법) | Open Addressing (개방 주소법)</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEqklEQVQ4y3WUbUxTVxjH/8CyZW9G59S9ufiaOTEMX7ZlH/Zhk/jBD4v7aOacmiUzZsk+OM3ckBUcRiiIQicbIqTY0gpu0QEKtJTSW25pbW+5F9pe2nvbS7tOQVFAC8wCz3JxLn7ZSf55nnNynl+e55zzHOB/hjgiwuazwe63ZzS3N2f1hfoyxREx69bftzKJCE8og4/zWdKYpO7JeBy/DMCHAN56vEB0B0d+/DojOuFDa68BwSiH4UR8AQJgPYC3AWwFsNTBOpCmNEKh0EIkcOjQ01i/fjGys1+EJGWumZrCleafM6vqyjB0u/8DO39d6+KZQn5I0AeigQt9fJ/Z4XZc6ujuaPIGvMaQEqrhw3yTzWn75BHQbgfMZqCxERAErJqZUTPJVFOpaeg5ajIHx02eTrlBqqeLooEuihfJpJjIKBvJEDaQPqhfUK1QWwzMzW1HLPYLZFkLUSxHMlmxJJXKJkA9j+dqjT1HjWbhfpPXqhilBmocMpEhZCBz1EzGiJFMERMZRSMZRAPVCXUngYcPVWA1kslSKEo5bt8+vSEczi0AXhLOFUC+eWOzw996zMX3fMMF/WVciNMKEaHEF/Cd6vX2nlJ9LsSV+EV/laXHkqeWnIPx8YNIJr+AJO1HKrUfHs+6WmCZTatBL8282Tka2Wkb9O5w9jn2dDG2z50e52eMm9lttVt3q761x7rH6XHuu9p2dRMwP/8pksl2yLIZkUgzxsZ+x8zMNgIytcBTA5fqDvc2nJ/uZn9LtMntZIl2UofcQe1SO7UNtZElaiGLYlmYX+6/fErNcBUmJnYiHt+OZDIPqdQOEC1VH4cNWBHL2XAsvHL1X826vQNHwhoqDBQ8zBfy05ohTfpE9ET6+OBxVdP5Qj4VhguPq8C9GBsLIBJhIEksJifdiMc/JuB5D7DYu2vfYedH+0aN5vzB/FgRFQU0aU1QM1scLZ4tSZbMFoWLZgvFwhlNSEMnYycLgKmpFRgbexeTk7kYGdmMdDp3bX39cn3ms2uL3YTGjtTBX+uTDy74rLIucoYqfGeogqugGqWGquVqOiucpapAFVUOVFJloPInYHb2ACRJRiTiQTDIQVH6X1WUvH7gZbo7gEDCv8vu6+zoHWCafTI3KAwLHD/M+32Sz88Osn4hLvh5hb/ByZxi9Vi/UktejqmpLXjwIAdE76ja6XYv+RZYrrZZ/5Bt0R+OxnVX2i+vbTQ3btFV697XG/RbTU2mXL1Bn9tgaNiqO6d7z9xk3lZdU/2KCvwSyWQCHOdHf/8A7t0LrhwdzVNvWQXeGBrc2+Fk5O4Bxs0qvdPuhHvcnXBPsDF2olvsnvD86ZlwJ9x32BhL13zXvlOBL4DoDRC9tqC5uddB9My/f8SSktPd39dWKzfPe66LZ+QyKvVpqZQrJV1MR5VSJZXxZaTltfMlvhIqD5YXPurlJzU/v2CtYjDL4naBHeQPXHMww12Cw+eMMXOuuGvKFXdNO6PO6a5Q13Rfom/aFXfdd0ad1Opt/eExKOM/zc+rFqPhFtyhECJ3PYuUlHc1y9nX9Ngdm1wudiPLstkMw2RbrdZsl8uVzbLsRoZhclpaWpb9A1M0KH+zDnNBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"linear_probing\"\n        title=\"linear_probing\"\n        src=\"/static/1d1cc25fcb9acca58e138d55ed410977/37523/linear_probing.png\"\n        srcset=\"/static/1d1cc25fcb9acca58e138d55ed410977/e9ff0/linear_probing.png 180w,\n/static/1d1cc25fcb9acca58e138d55ed410977/f21e7/linear_probing.png 360w,\n/static/1d1cc25fcb9acca58e138d55ed410977/37523/linear_probing.png 720w,\n/static/1d1cc25fcb9acca58e138d55ed410977/3c051/linear_probing.png 760w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>동일 해시 인덱스 삽입 시 <code class=\"language-text\">bucket의 다음 인덱스</code>에 데이터를 삽입하는 방법이다.<br>\n하지만 <code class=\"language-text\">Primary clustering에 취약</code>하다는 단점이 있다. 이 기법 역시 데이터가 많아진다면 복잡도가 높아질 수 있다.<br></p>\n<br>\n<p>위와 같이 <code class=\"language-text\">Chaining</code>과 <code class=\"language-text\">Open Address</code>기법을 이용한 <code class=\"language-text\">Hash table collision</code> 해결에 대해 알아보았다.<br>\nNode.js의 충돌 해결 기법은 위 방식에서 어떤 방식을 사용하는지 소스코드를 뜯어봐도 찾기 힘들었지만, JavaScript의 Map 자료구조가 어떤 식으로 생겼는지 알아본 계기로만 하고, 본론으로 돌아와서, 메모리에 <code class=\"language-text\">Session</code>을 구현해보자.<br></p>\n<br>\n<h2 id=\"-session-구현\" style=\"position:relative;\"><a href=\"#-session-%EA%B5%AC%ED%98%84\" aria-label=\" session 구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🧑‍💻 Session 구현</h2>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">BaseSessionStore<span class=\"token operator\">&lt;</span><span class=\"token constant\">T1</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">T2</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">protected</span> store <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map<span class=\"token operator\">&lt;</span><span class=\"token constant\">T1</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">T2</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token constant\">T1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T2</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token constant\">T1</span><span class=\"token punctuation\">,</span> value<span class=\"token operator\">:</span> <span class=\"token constant\">T2</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>JavaScript의 경우 타입이 없으니 타입 지정을 빼고 구현하면 된다.</p>\n</blockquote>\n<br>\n<p>우선, <code class=\"language-text\">BaseSessionStore</code> 클래스를 제작해 주고, <code class=\"language-text\">Generic Type</code> T1, T2를 받아와 준다.</p>\n<blockquote>\n<p><code class=\"language-text\">Generic Type</code>이란, 범용 타입이다. 변수 혹은 클래스 생성 시, 정해준 타입으로 컴파일 시 적용된다.</p>\n</blockquote>\n<br>\n<p>위와같은 보일러 클래스를 Domain 별로 사용하기 위해, 상속을 통해 Domain 별 세션 클래스를 제작할 수 있다.<br></p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">UserSessionStore</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">BaseSessionStore<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">getAllUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>위와같이 <code class=\"language-text\">BaseSessionStore</code>를 상속받아 구현 된 <code class=\"language-text\">UserSessionStore</code>가 있다.<br>\nkey는 number, value는 string으로 설정하였다.<br></p>\n<br>\n<h3 id=\"-session-store-클래스-사용\" style=\"position:relative;\"><a href=\"#-session-store-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%82%AC%EC%9A%A9\" aria-label=\" session store 클래스 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🦿 Session Store 클래스 사용</h3>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token operator\">...</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UserSessionStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">const</span> userSessionStore <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./userSessionStore.ts'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// or</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> userSessionStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./userSessionStore'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>일단 Map 자료구조를 이용한 클래스 생성은 알겠으니, 실제 프로덕트에 적용시켜 본다면 Node.js의 <code class=\"language-text\">require</code> 또는 <code class=\"language-text\">import</code>를 사용하여 캐싱된 모듈을 불러오는 식으로 생성된 클래스를 이용할 수 있다.<br></p>\n<br>\n<p>프레임워크에서 IOC를 지원한다면 <code class=\"language-text\">Dependency Injection</code>을 사용하여 클래스를 싱글톤으로 유지해 사용하는 방법이 있다.<br></p>\n<br>\n<p>두 경우 객체 내부 메모리는 공유되는 <code class=\"language-text\">Call by sharing</code> 기법이 적용되어 객체 내부 데이터를 잃지 않고 유지할 수 있다.<br>\n이러한 방법을 통해 <code class=\"language-text\">Session store</code>를 구현해 봤으며, 적절히 필요에 따라 사용하면 될 듯 하다.<br></p>\n<br>\n<h2 id=\"-참고-자료\" style=\"position:relative;\"><a href=\"#-%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\" 참고 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📚 참고 자료</h2>\n<blockquote>\n<p>Evaluation strategies</p>\n</blockquote>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Evaluation_strategy\">https://en.wikipedia.org/wiki/Evaluation_strategy</a></li>\n</ul>\n<br>\n<blockquote>\n<p>Hash Table Algorithm</p>\n</blockquote>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Hash_table\">https://en.wikipedia.org/wiki/Hash_table</a></li>\n<li><a href=\"https://nlp.chonbuk.ac.kr/AL/ch06.pdf\">https://nlp.chonbuk.ac.kr/AL/ch06.pdf</a></li>\n</ul>\n<br/>\n<br/>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-session-%EC%9D%B4%EB%9E%80\">🌊 Session 이란?</a></p>\n</li>\n<li>\n<p><a href=\"#-session%EC%9D%84-%EC%9C%A0%EC%A7%80%EC%8B%9C%ED%82%A4%EB%8A%94-%EB%B0%A9%EB%B2%95\">🤝 Session을 유지시키는 방법</a></p>\n<ul>\n<li><a href=\"#-%EC%84%B8%EC%85%98%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EB%8B%A4%EC%96%91%ED%95%9C-%EB%B0%A9%EB%B2%95\">💾 세션을 구현하기 위한 다양한 방법</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%A9%94%EB%AA%A8%EB%A6%AC%EB%A1%9C-%EC%84%B8%EC%85%98%EC%9D%84-%EC%9C%A0%EC%A7%80%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\">📱 메모리로 세션을 유지하는 방법</a></p>\n<ul>\n<li><a href=\"#-call-by-sharing-%EC%9D%B4%EB%9E%80\">📞 Call by sharing 이란?</a></li>\n<li><a href=\"#-map-%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0\">🗺 Map 자료구조</a></li>\n<li><a href=\"#-hash-table%EC%9D%98-collision-%EA%B4%80%EB%A6%AC\">🤔 Hash Table의 Collision 관리</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-session-%EA%B5%AC%ED%98%84\">🧑‍💻 Session 구현</a></p>\n<ul>\n<li><a href=\"#-session-store-%ED%81%B4%EB%9E%98%EC%8A%A4-%EC%82%AC%EC%9A%A9\">🦿 Session Store 클래스 사용</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\">📚 참고 자료</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"September 30, 2022","title":"Session이란? JavaScript로 구현하는 Session","categories":"Node.js","author":"seongsu","emoji":"1️⃣4️⃣"},"fields":{"slug":"/skill/session/"}},"prev":{"id":"98902d3c-e3ed-5e39-b45b-d44536d6e2b1","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 710px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB24rCw4Ff/8QAGBABAQEBAQAAAAAAAAAAAAAAAQARAiH/2gAIAQEAAQUC7bXZNg9v/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFRABAQAAAAAAAAAAAAAAAAAAECH/2gAIAQEABj8Ca//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhMUH/2gAIAQEAAT8hQoIH67xwQoWQNq3j/9oADAMBAAIAAwAAABAbz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABYRAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAgEBPxA1n//EAB0QAQEAAQQDAAAAAAAAAAAAAAERIQAQMUFhkfD/2gAIAQEAAT8QrkLVVkD496xlVRDtLBOguycicj3oaOTC+Djb/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"network\"\n        title=\"network\"\n        src=\"/static/408ba28e91466c8a84f92f994d4d1866/67e9d/network.jpg\"\n        srcset=\"/static/408ba28e91466c8a84f92f994d4d1866/4ec73/network.jpg 180w,\n/static/408ba28e91466c8a84f92f994d4d1866/158ba/network.jpg 360w,\n/static/408ba28e91466c8a84f92f994d4d1866/67e9d/network.jpg 710w\"\n        sizes=\"(max-width: 710px) 100vw, 710px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"-개요\" style=\"position:relative;\"><a href=\"#-%EA%B0%9C%EC%9A%94\" aria-label=\" 개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐽 개요</h2>\n<br>\n<p>프랑스에서 3초마다 데이터를 받아와 Slack으로 최신 데이터를 제공해주는 서비스를 운영중인데, 평균 2-3초의 <code class=\"language-text\">Latency</code>가 있었다.<br></p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">프랑스 API 서버 -> AWS Seoul Region -> 데이터 가공 -> Slack</code></pre></div>\n<br>\n<p>위와 같은 Flow로 데이터가 이동하였는데 아무리 프랑스에서 데이터가 전송된다 해도, 말이 평균이지 최소 2초의 지연시간은 발생하였다.<br></p>\n<blockquote>\n<p>10초가 넘어가는 경우도 가끔 있었다.</p>\n</blockquote>\n<p>이렇게 불안정한 환경으로 서버를 운영하는 것은 서비스 질적으로 최악이라 판단해서 서버 운영 1주년을 기념해 <code class=\"language-text\">서버 최적화</code>를 기획하게 되었다.<br></p>\n<br>\n<h2 id=\"-최적화-방법을-떠올려-보자\" style=\"position:relative;\"><a href=\"#-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%B0%A9%EB%B2%95%EC%9D%84-%EB%96%A0%EC%98%AC%EB%A0%A4-%EB%B3%B4%EC%9E%90\" aria-label=\" 최적화 방법을 떠올려 보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎨 최적화 방법을 떠올려 보자</h2>\n<br>\n<p>일단 데이터 Flow를 기준으로 <code class=\"language-text\">프랑스에서 데이터를 받아오는 부분</code>, <code class=\"language-text\">데이터 가공하는 부분</code>, <code class=\"language-text\">데이터를 Slack으로 전송하는 부분</code> 총 3가지를 트랜잭션으로 묶었고, 로깅을 진행했다.<br></p>\n<br>\n<h3 id=\"-범인은-api-응답이-늦어서-였다\" style=\"position:relative;\"><a href=\"#-%EB%B2%94%EC%9D%B8%EC%9D%80-api-%EC%9D%91%EB%8B%B5%EC%9D%B4-%EB%8A%A6%EC%96%B4%EC%84%9C-%EC%98%80%EB%8B%A4\" aria-label=\" 범인은 api 응답이 늦어서 였다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📄 범인은 API 응답이 늦어서 였다.</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA9ElEQVQoz5WRR47EMAwE/RvnAOec4/8fxEUR0AIz8GUOAt2kukha1jAM0nWdjOMo0zQJuigKqapK0jRVvSyL1o7jkG3b5DxP9VzXpTVy+Ou6Fqvve2nbVo0k0d/AeZ61tu+7rOuqEQ9ggORogMfiIoIJOOiyLLVblmWqMQAFAIxJAd73rTU0918nfFsZmFkZCNCmabQBa6Opw/l5ZQBMBZAGBohPJ3x7FLPy96MwkZkKABFNQ7T+QwMhaYwAmSDPc83zitSe51EIkXtEfoFhMJTl+75wgiCQMAw1Oo4jruuKbdsf+TiO/w+eJEkkiiL99jxPzx8mZQ/Vb8tf6QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"api log\"\n        title=\"api log\"\n        src=\"/static/7e7252af2f0e9110cc62feb86b188e56/37523/api_log.png\"\n        srcset=\"/static/7e7252af2f0e9110cc62feb86b188e56/e9ff0/api_log.png 180w,\n/static/7e7252af2f0e9110cc62feb86b188e56/f21e7/api_log.png 360w,\n/static/7e7252af2f0e9110cc62feb86b188e56/37523/api_log.png 720w,\n/static/7e7252af2f0e9110cc62feb86b188e56/302a4/api_log.png 1080w,\n/static/7e7252af2f0e9110cc62feb86b188e56/6be49/api_log.png 1160w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>프랑스에서 한국까지 API를 받아오는데 <code class=\"language-text\">평균 1,550ms</code> 정도를 기록했고, 데이터 가공은 <code class=\"language-text\">평균 200ms</code> 미만, slack 전송은 <code class=\"language-text\">평균 300ms</code> 정도였다.<br></p>\n<br>\n<h3 id=\"-latency를-줄이기-위한-방법\" style=\"position:relative;\"><a href=\"#-latency%EB%A5%BC-%EC%A4%84%EC%9D%B4%EA%B8%B0-%EC%9C%84%ED%95%9C-%EB%B0%A9%EB%B2%95\" aria-label=\" latency를 줄이기 위한 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤟🏻 Latency를 줄이기 위한 방법</h3>\n<br>\n<p><code class=\"language-text\">Latency</code>를 줄이겠다고 서버 데이터 가공 로직을 최적화 하는건 한계가 있을 것이다.<br>\n그래서 최적화는 그대로 하되, 데이터를 받아오는 지역 자체를 프랑스로 옮기고, 데이터가 한국으로 전달되는 부분은 Slack의 데이터 전송 기술을 믿으면 더 효율적인 최적화 방법이 될 것 같았다.<br></p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABCElEQVQoz4WSWW6EQAxE5zqITSzN3uyLuP+BPHqOPCGKlHy0ENX2c5Xh1XWd9H0v3ntZlkXKspSqqiTPc9WnaZJhGGRdVz3UtG2rOu/7vss8z6olSSIvioGN46gFwAyIjkYDjcdxyHmeH533+771Di1N0y8gB+C2beKck7qupSgK8X5QR7ihyaDm2AbYEHVokQHS7NzvyObIoMTDNQau61INThRF30BrwuETSKPdAeA8gbgDSG0cx3/v0KLZDgFQh04aIvOkBmNhGP63Q/9jh9w/VwDQvvxnh1gFaL+BAXFINIoZZkBqng7R0ahVh8QD0DSNTsmyTGHsA5cMtDtARDPdNAbCCIJA3g/FMwda6jZKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"paris latency\"\n        title=\"paris latency\"\n        src=\"/static/1c5ce77c191b02a74e3093eec0767f7d/37523/paris_log.png\"\n        srcset=\"/static/1c5ce77c191b02a74e3093eec0767f7d/e9ff0/paris_log.png 180w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/f21e7/paris_log.png 360w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/37523/paris_log.png 720w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/302a4/paris_log.png 1080w,\n/static/1c5ce77c191b02a74e3093eec0767f7d/11b93/paris_log.png 1124w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그러기 위해 일단 <code class=\"language-text\">AWS Region</code>을 Paris로 옮겼는데, 어머나.. <code class=\"language-text\">Latency</code>가 1/10 이상 줄어들었다.<br></p>\n<br>\n<p>사실 이렇게 많이 줄어들 줄 몰랐는데, 프랑스에서 한국까지 데이터가 전송되는데 많은 <code class=\"language-text\">Router</code>를 거치며 지연시간이 늘어났나 보다.<br></p>\n<br>\n<p>여기에 데이터 가공 로직까지 최적화 한다면, 유의미한 결과가 나올 것 같았다.<br>\n원래는 <code class=\"language-text\">Event</code>, <code class=\"language-text\">Exam</code>으로 나눠진 두개의 데이터를 하나의 프로세스에서 비동기로 처리하고 있었다.<br>\n이 두개를 각 프로세스에서 돌릴수 있게 <code class=\"language-text\">Interface 코드</code>를 짜고, 환경변수로 <code class=\"language-text\">Event</code>, <code class=\"language-text\">Exam</code> 프로세스를 분리했다. 그 뒤, Webpack을 이용해 <code class=\"language-text\">Interface 코드</code>를 번들링 하였고 각 프로세스를 실행시켰다.<br></p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 117.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADE0lEQVQ4y42UiY6bSBRF8/+fN6NksrQ7NjZgDJjaNyjOiHK3085MJynpSZbRu/WWe+rDmiK6jzSVxhhPXiClGe89y7IQQiiR5pllybw967rFeo/tfFhfPjaDY99pBmGo2is5ryUhr6/Jt6Q05/LtJr7+dMHKh1fl8xQ4tBN127FrNB8PosTXk0Joz5fvLX99rviyO/LpW8W3auAyObRLxJjIOb9UuEIIHmEirQjMS0bZxKAiwkYmGwkpMQhLiBExjUgpkW6hl4nuanHOlfG8CK5lRnPIWJkYxhEpBMYlnMyofkGOnnHs6SfDZGaU8VxGibP2/ZadXugqz2Ff0Z67crNREaczziaMMWgbMH7G+VhEvQ8Pi7lXuMU2fD9Ipu972vOFYZQMk+LQDPSTZpKO0/nK6Tzyz66makc+P7d8eqrZn3qM9bcKt029qhujqOsjShr6ViOkQttUhHbVhfOgEMpQN2eUCdTdxK7qmIT60fLrj+1sHowO5rjivGeeZ2II5JeB/8m5z9A6h1UJcZkxYmYcryilmIQoW3zrxV/FXTBET87vV/I7oTctr1iRGTtLTOkh+UbCemPsN5c82GZd4NRZDht6k+Z0npiXhbyuLK8I5lxMvywrc8Ev/0f8YYYbevtmou16nmpVkNviuTUoE8uWvzy3PO0bPu9OPJ/GQpQL26MxP1aYUmRUgePgCHFmUoFm9FyE5yI9xgeai0RqS9edy8IuIlD1ju5qsNa+GJybbbYN53kluaVs1llDTAvJrTiRsSoWj27eMyHjfGISmmVO77ds1Uyz9zw9f+fUtDSDRctI0GBkQEqB0O4FvcAkLetPc3xEL0McFfZYc+l7xOZB7dgdO6wPXMbbwjYy9vVI1Yz8/fXE8/FSiHGF65/Q01pxOh4Qk6arFddpqypwbK98259pe8lwVVTHulR7qAe+7s8FvQdjvwrOKWNUIvoFY+zt+Y+x+POtN99a5odf37BcSAkep2dkv2DkDT2tNdP0A72HJ39d/9+HWxWlXWPur+57VPwKwXuFMcb7H3+S8LvX5l/ZDP0FJ5rWpwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"before\"\n        title=\"before\"\n        src=\"/static/8e63bdb493533085b8a512001696184d/37523/before.png\"\n        srcset=\"/static/8e63bdb493533085b8a512001696184d/e9ff0/before.png 180w,\n/static/8e63bdb493533085b8a512001696184d/f21e7/before.png 360w,\n/static/8e63bdb493533085b8a512001696184d/37523/before.png 720w,\n/static/8e63bdb493533085b8a512001696184d/6d2da/before.png 936w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>최적화 전 코드</p>\n</blockquote>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB30lEQVQ4y42SjW7jIBCE8/7Pd1epl9RJ6r/YgAEb22BjviqOWt1Vd9eutCBWaHZ2Zw6r6gjnM6MOiGJF31Z0G/FTILxkeCFRpqfRE9M08XuklPgch3sxVDXLrSHPS17zgq7THE8nrHVUdU1daGQ9c61ans8NUmm2Lf4V9HA/Qn3bQa+vOa0QVFVFKxRCacryhqoi11zwkkuEMsS4/pPl4f4MRUmsauq64ng8cblceckypO6Zipo2Kzidz/x4euZ8uVJVNTH+h+E0TGS55lxbbm3H6VLjnCOlDWIkrYFpnnFuZJpm5tmzbdsO9jl3QOcjz6WjUT1CSLLKUnfznjftkb3nu/Fg6CNPV8upNEilKNqenxfLr+J+G46lZZw82WuL6AaaVuziCSkp5UTRDgyDw3v/UFkaixgW+vmxj9mvGJ8YV5hCYgyJmCLKDoxzYFkW+mHYbeRCQg+BEB71XRSTF2xdhzV6V3n2gU2pPa01WGMYzcZsobdu/3OfREqFEC1xXf70IW4gDRbTa7TRrDGxaUPUGmN7us7gTKTvItY4mqZ5gEq1j38f9V3xxw4dWJ0YNbuZhRCYYWDj+/Fun4P3gb4L9HLFihUpur27kop1WT4+f5UfDO9+21L8svN3bfMG34XtVtxQneAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"after\"\n        title=\"after\"\n        src=\"/static/10cee15dfd59b81b14ed859eeecafe59/37523/after.png\"\n        srcset=\"/static/10cee15dfd59b81b14ed859eeecafe59/e9ff0/after.png 180w,\n/static/10cee15dfd59b81b14ed859eeecafe59/f21e7/after.png 360w,\n/static/10cee15dfd59b81b14ed859eeecafe59/37523/after.png 720w,\n/static/10cee15dfd59b81b14ed859eeecafe59/f3c12/after.png 764w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>최적화 후 코드</p>\n</blockquote>\n<br>\n<p>두 코드를 보았을 때, <code class=\"language-text\">선언형</code>, <code class=\"language-text\">추상화</code>에 초점을 맞춰 리팩토링을 진행하니 확실히 코드의 가독성이 좋아졌다.<br>\nNode.js의 <code class=\"language-text\">모듈 캐싱 전략</code>을 적절히 활용하여 <code class=\"language-text\">DI</code>를 적용한 것도 가독성에 한몫 했다고 보이는 것 같다.<br></p>\n<br>\n<h3 id=\"️-대기업-플랫폼을-이용한-최적화-전략-먹혔나\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EB%8C%80%EA%B8%B0%EC%97%85-%ED%94%8C%EB%9E%AB%ED%8F%BC%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%B5%9C%EC%A0%81%ED%99%94-%EC%A0%84%EB%9E%B5-%EB%A8%B9%ED%98%94%EB%82%98\" aria-label=\"️ 대기업 플랫폼을 이용한 최적화 전략 먹혔나 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>☂️ 대기업 플랫폼을 이용한 최적화 전략.. 먹혔나?</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 576px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA5UlEQVQY022Qy26CUBRF+RUFi0opcrm8H8oj0NZqKIqmjkxHHfQ7OuhPrwbS2EkHKytnsnP2VoT0GQjjDCEDvCDGCxL8MBl9N7/Hsl2slUSdLZhq85v/Q9mUNXnVkGQFQZQRpzlRskF6IdKLMC2Hqn4mXZdj+ETVb6F/LNF0Y7SifXyhxw2HtqOoHqmbLe1rT7oueNru2e078rKmP1/ojmeOpzf604W269m1B67Xd0RcoH9+M8teUKayQDclwvEwTBvTEmPFYQbXj7FsOd5DfdvxcGTAw8rB/f1+mGhhWEycHHUp+AEpW4QxiTsxvgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"paris result\"\n        title=\"paris result\"\n        src=\"/static/19b644c05c508ac558c4bbb1fbeb5ad0/533c1/paris_result.png\"\n        srcset=\"/static/19b644c05c508ac558c4bbb1fbeb5ad0/e9ff0/paris_result.png 180w,\n/static/19b644c05c508ac558c4bbb1fbeb5ad0/f21e7/paris_result.png 360w,\n/static/19b644c05c508ac558c4bbb1fbeb5ad0/533c1/paris_result.png 576w\"\n        sizes=\"(max-width: 576px) 100vw, 576px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>Paris Region 서버 Slack 응답 로그</p>\n</blockquote>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 580px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6klEQVQY023Qy1LCQBSE4byJ4giSoIaEZMhMmNwI4C0lKCVgQIuVGx/Et/6tGnXnohe9+arPcRJtUGmOyacEozGpKRnFiqKc4Qcx3uXQ9kgq+t41HXGB6Lqcnff/jVPNbixYVnOiWFlQJimTrMId+AxDSV7WNoOrgJNO16J/wA/uInoeoufiiHLJYlrTLJ8xecXLtqWe32KyisfVmodmRWoK2v07T+sNu/aNzW7P9vVAVS9oD0ea+wax+sD7/MLpDTVSKvxQEkZje3YstV2t0gyZTAijxC6PpCZRxnals98XFcix5tTXCH3HN7HbhcEayBiqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"seoul result\"\n        title=\"seoul result\"\n        src=\"/static/57a9c0e30110ec54ed9b7f0637abe342/b6272/seoul_result.png\"\n        srcset=\"/static/57a9c0e30110ec54ed9b7f0637abe342/e9ff0/seoul_result.png 180w,\n/static/57a9c0e30110ec54ed9b7f0637abe342/f21e7/seoul_result.png 360w,\n/static/57a9c0e30110ec54ed9b7f0637abe342/b6272/seoul_result.png 580w\"\n        sizes=\"(max-width: 580px) 100vw, 580px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>Seoul Region 서버 Slack 응답 로그</p>\n</blockquote>\n<br>\n<p>결과를 보니 확연한 차이가 있었다. Paris로 Region을 이전한 것, 서버 프로세스 최적화를 진행한 것 이 두개의 효율이 잘 나와 <code class=\"language-text\">700ms의 Latency</code>를 줄이게 되었다.<br></p>\n<br>\n<h2 id=\"-뱀의-머리보단-용의-꼬리가-낫다\" style=\"position:relative;\"><a href=\"#-%EB%B1%80%EC%9D%98-%EB%A8%B8%EB%A6%AC%EB%B3%B4%EB%8B%A8-%EC%9A%A9%EC%9D%98-%EA%BC%AC%EB%A6%AC%EA%B0%80-%EB%82%AB%EB%8B%A4\" aria-label=\" 뱀의 머리보단 용의 꼬리가 낫다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🐍 뱀의 머리보단 용의 꼬리가 낫다</h2>\n<br>\n<p>확실히 직접 통신 비용을 줄이려는 노력을 하기보단, 이미 구축되어있는 플랫폼의 기술을 이용하는 것이 좋은 방법인 듯 하다.<br>\n이로써 최종 2,000ms -> 1,300ms로 35%의 통신 비용을 단축할 수 있었다.<br></p>\n<br>\n<p>다만 아쉬운 점은, API 서버가 너무 멀리 있어 아무리 최적화를 해도 800ms 정도 최소한의 통신 비용은 존재하는게 어쩔수 없긴 해도 아쉽긴 하다.<br></p>\n<br>\n<h3 id=\"-그런데-왜-줄이려는-시도를-하는-것인가\" style=\"position:relative;\"><a href=\"#-%EA%B7%B8%EB%9F%B0%EB%8D%B0-%EC%99%9C-%EC%A4%84%EC%9D%B4%EB%A0%A4%EB%8A%94-%EC%8B%9C%EB%8F%84%EB%A5%BC-%ED%95%98%EB%8A%94-%EA%B2%83%EC%9D%B8%EA%B0%80\" aria-label=\" 그런데 왜 줄이려는 시도를 하는 것인가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>❓ 그런데 왜 줄이려는 시도를 하는 것인가?</h3>\n<br>\n<p>제일 중요한게 <code class=\"language-text\">Why?</code> 인데 설명을 안해서 마지막에 하려한다.<br></p>\n<br>\n<p>42 교육과정에서 선착순으로 진행되는 행사의 알림을 실시간으로 해주는 서버를 운영중이라 빠른 알림이 필요했다. 하지만 2,000ms는 너무 느린 속도여서 ”<strong>조금이라도 단축할 수 있지 않을까?</strong>“라는 생각이 들었고, 이김에 과거에 작성한 쪽팔린(?) 코드를 고치는 것이 목표였다.<br></p>\n<br>\n<p>여튼 기획에 맞게 단축이 되긴 해서 다행이고, 오래전에 짠 더러운 코드를 싹다 고쳐서 묵은 때를 벗기는 느낌이 들어 굉장히 기분이 좋았다.<br></p>\n<br>\n<h2 id=\"-github-주소\" style=\"position:relative;\"><a href=\"#-github-%EC%A3%BC%EC%86%8C\" aria-label=\" github 주소 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📚 Github 주소</h2>\n<ul>\n<li><a href=\"https://github.com/nfl1ryxditimo12/42Notifier\">https://github.com/nfl1ryxditimo12/42Notifier</a></li>\n</ul>\n<br/>\n<br/>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EA%B0%9C%EC%9A%94\">🐽 개요</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%B0%A9%EB%B2%95%EC%9D%84-%EB%96%A0%EC%98%AC%EB%A0%A4-%EB%B3%B4%EC%9E%90\">🎨 최적화 방법을 떠올려 보자</a></p>\n<ul>\n<li><a href=\"#-%EB%B2%94%EC%9D%B8%EC%9D%80-api-%EC%9D%91%EB%8B%B5%EC%9D%B4-%EB%8A%A6%EC%96%B4%EC%84%9C-%EC%98%80%EB%8B%A4\">📄 범인은 API 응답이 늦어서 였다.</a></li>\n<li><a href=\"#-latency%EB%A5%BC-%EC%A4%84%EC%9D%B4%EA%B8%B0-%EC%9C%84%ED%95%9C-%EB%B0%A9%EB%B2%95\">🤟🏻 Latency를 줄이기 위한 방법</a></li>\n<li><a href=\"#%EF%B8%8F-%EB%8C%80%EA%B8%B0%EC%97%85-%ED%94%8C%EB%9E%AB%ED%8F%BC%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%B5%9C%EC%A0%81%ED%99%94-%EC%A0%84%EB%9E%B5-%EB%A8%B9%ED%98%94%EB%82%98\">☂️ 대기업 플랫폼을 이용한 최적화 전략.. 먹혔나?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%B1%80%EC%9D%98-%EB%A8%B8%EB%A6%AC%EB%B3%B4%EB%8B%A8-%EC%9A%A9%EC%9D%98-%EA%BC%AC%EB%A6%AC%EA%B0%80-%EB%82%AB%EB%8B%A4\">🐍 뱀의 머리보단 용의 꼬리가 낫다</a></p>\n<ul>\n<li><a href=\"#-%EA%B7%B8%EB%9F%B0%EB%8D%B0-%EC%99%9C-%EC%A4%84%EC%9D%B4%EB%A0%A4%EB%8A%94-%EC%8B%9C%EB%8F%84%EB%A5%BC-%ED%95%98%EB%8A%94-%EA%B2%83%EC%9D%B8%EA%B0%80\">❓ 그런데 왜 줄이려는 시도를 하는 것인가?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-github-%EC%A3%BC%EC%86%8C\">📚 Github 주소</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 08, 2022","title":"프랑스 - 한국 간 Latency 단축 전략","categories":"네트워크 회고","author":"seongsu","emoji":"1️⃣5️⃣"},"fields":{"slug":"/skill/latency-strategy/"}},"site":{"siteMetadata":{"siteUrl":"https://seongsu.me","comments":{"utterances":{"repo":"nfl1ryxditimo12/nfl1ryxditimo12.github.io"}}}}},"pageContext":{"slug":"/skill/hibernate-spatial/","nextSlug":"/skill/session/","prevSlug":"/skill/latency-strategy/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}