{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/osi-7layer/",
    "result": {"data":{"cur":{"id":"47dfa43d-925a-5b74-9de6-34fdfa81e231","html":"<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAABJ0AAASdAHeZh94AAACbUlEQVQozwFiAp39AP7///////D19N3m5enx8OPs6trk4+Dp6P////////////////b8/Nrn59/m5uHo6ODq6vn9/f///////wD7//7s3N3GYmXFdHXDeHnBcHHBcHLCYmTPfH/3+vr9///Xm5zKVljGZGXFfX3CfX7DcHHOYWPHWlvs1dYA8fb33sbBvDEdv11LvWNPvVlGwF1IvkczwUs59/z9////xGNjuRwevzAxvFFRuUhIukJCwCorsRcZ4bW0AO/y9uncy++jPOuqT+arXuiqVumqV++nQ+2rV/f6/v///9GJjMWNkdKKj9GSmdKGjNOSmM6Qk756fua6ugD19frf4MiurxK3uCiuuUOxuDewukGysw+1tzv19Pr+//+0fXOzQjqdRzSRRS6TRC6ORSysSj2jOi/Xw74A/fj6xNzTApNjHJx5M52FIpt6MJ2DB5ZrKaB4+/f4////creiSqOWJZ96IZx1M6CCD5ptPKSNOpmHud3PAP/8+cXV4gFstRh6uS2BtyJ9tyl/tgBttyqBvPz59////2ygxid+tDiJv2KavG6hvE6QvTiLwSd8srnR4wD39/PMzt1CTqhQXq5caq5VY61daa9CUKteZ7H5+fb///6Rkbt4Zqd6bq59bax1aqt8bKqCcbFxYqTGyt4A+vv3zMfVNxhyTTR/WkiEUzyBV0SCNxpyVj6F/f78////l2yzYxmYfkajfEOheT6gfkeieDmiWQ+O0sDbAPr5+NHW20NfglVtjXSHm2h9lXGEmkRfg2F4lPr5+P7//bGcxI5mrph2tZd0s5Zzs5d0s5h0tYpjqt3U5KxveRvo7vKVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"osi7layer.png\"\n        title=\"osi7layer.png\"\n        src=\"/static/703b6e89250d4a58311399140af78483/37523/osi7layer.png\"\n        srcset=\"/static/703b6e89250d4a58311399140af78483/e9ff0/osi7layer.png 180w,\n/static/703b6e89250d4a58311399140af78483/f21e7/osi7layer.png 360w,\n/static/703b6e89250d4a58311399140af78483/37523/osi7layer.png 720w,\n/static/703b6e89250d4a58311399140af78483/00b70/osi7layer.png 733w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"-osi-7계층\" style=\"position:relative;\"><a href=\"#-osi-7%EA%B3%84%EC%B8%B5\" aria-label=\" osi 7계층 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🎢 OSI 7계층</h2>\n<blockquote>\n<p>Open Systems Interconnection</p>\n</blockquote>\n<p>OSI 7계층이란 네트워크에서 통신이 일어나는 과정을 7단계로 나눈 것을 말한다.<br>\n각 계층을 분리함으로서 독립적인 역할을 할 수 있다.<br>\n추가로 역할을 분리되면서 문제 발생 시 어느 계층에서 문제가 발생하는지 파악이 가능해진다.<br></p>\n<br>\n<h3 id=\"-목적\" style=\"position:relative;\"><a href=\"#-%EB%AA%A9%EC%A0%81\" aria-label=\" 목적 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🚏 목적</h3>\n<p>OSI 7계층은 프로토콜을 기능별로 나눈 것이다.<br>\n각 계층은 하위 계층의 기능만을 이용하고, 상위 계층에게 기능을 제공한다.<br>\n<code class=\"language-text\">프로토콜 스택</code>은 이러한 계층들로 구성되는 프로토콜 시스템이 구현된 시스템을 가리키며,<br>\n이것은 하드웨어나 소프트웨어 혹은 둘의 혼합으로 구현될 수 있다.<br>\n일반적으로 하위 계층들은 하드웨어로, 상위 계층들은 소프트웨어로 구현된다.<br></p>\n<br>\n<h3 id=\"-계층-기능\" style=\"position:relative;\"><a href=\"#-%EA%B3%84%EC%B8%B5-%EA%B8%B0%EB%8A%A5\" aria-label=\" 계층 기능 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🪜 계층 기능</h3>\n<br>\n<h4 id=\"span-stylecolor-03154d1️⃣-물리-계층span-physical-layer\" style=\"position:relative;\"><a href=\"#span-stylecolor-03154d1%EF%B8%8F%E2%83%A3-%EB%AC%BC%EB%A6%AC-%EA%B3%84%EC%B8%B5span-physical-layer\" aria-label=\"span stylecolor 03154d1️⃣ 물리 계층span physical layer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"color: #03154D\"><strong>1️⃣ 물리 계층</strong></span> (Physical Layer)</h4>\n<p>OSI 모델 맨 밑의 계층으로서, 네트워크 데이터가 전송되는 물리적인 매체이다.<br>\n디지털에서 아날로그로 변환되며 또는 그 반대의 신호로 변환되어 물리적인 전송이 가능하게 한다.<br>\n또한 주소 개념이 없으며 물리적으로 연결된 노드간에 신호를 주고 받는다.<br></p>\n<br>\n<ul>\n<li>전송 단위 <code class=\"language-text\">비트(Bit)</code></li>\n</ul>\n<br>\n<blockquote>\n<p>대표적인 하드웨어 장비 <a href=\"https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%ED%97%88%EB%B8%8C\">허브</a>, <a href=\"https://ko.wikipedia.org/wiki/%EB%A6%AC%ED%94%BC%ED%84%B0\">리피터</a>, <a href=\"https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%EC%96%B4%EB%8C%91%ED%84%B0\">어댑터</a>, <a href=\"https://ko.wikipedia.org/wiki/%EB%AA%A8%EB%8E%80\">모뎀</a></p>\n</blockquote>\n<br>\n<h4 id=\"span-stylecolor-5b1a8e2️⃣-데이터-링크-계층span-datalink-layer\" style=\"position:relative;\"><a href=\"#span-stylecolor-5b1a8e2%EF%B8%8F%E2%83%A3-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%A7%81%ED%81%AC-%EA%B3%84%EC%B8%B5span-datalink-layer\" aria-label=\"span stylecolor 5b1a8e2️⃣ 데이터 링크 계층span datalink layer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"color: #5B1A8E\"><strong>2️⃣ 데이터 링크 계층</strong></span> (DataLink Layer)</h4>\n<p>Point to Point 간 신뢰성 있는 전송을 보장하기 위한 계층이다.<br>\n네트워크 위의 개체들 간 데이터를 전달하고, 물리 계층에서 발생할 수 있는 오류를 찾아내고, 수정하는데 필요한 기능적, 절차적 수단을 제공한다.<br>\n주소 값은 물리적으로 할당 받게 되는데, 네트워크 카드의 MAC 주소를 받아 목적지를 찾아간다.<br></p>\n<br>\n<ul>\n<li>전송 단위 <code class=\"language-text\">프레임(Frame)</code></li>\n</ul>\n<br>\n<blockquote>\n<p>대표적인 하드웨어 장비 <a href=\"https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%EB%B8%8C%EB%A6%AC%EC%A7%80\">브릿지</a>, <a href=\"http://wiki.hash.kr/index.php/L2_%EC%8A%A4%EC%9C%84%EC%B9%98\">L2 switch</a>, <a href=\"https://ko.wikipedia.org/wiki/%EC%9D%B4%EB%8D%94%EB%84%B7\">이더넷</a> 등</p>\n</blockquote>\n<br>\n<h4 id=\"span-stylecolor-0b5bb53️⃣-네트워크-계층span-network-layer\" style=\"position:relative;\"><a href=\"#span-stylecolor-0b5bb53%EF%B8%8F%E2%83%A3-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EA%B3%84%EC%B8%B5span-network-layer\" aria-label=\"span stylecolor 0b5bb53️⃣ 네트워크 계층span network layer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"color: #0B5BB5\"><strong>3️⃣ 네트워크 계층</strong></span> (Network Layer)</h4>\n<p>여러개의 노드를 거칠때마다 경로를 찾아주는 역할을 하는 계층이다.<br>\n다양한 길이의 데이터를 네트워크를 통해 전달하고, 그 과정에서 전송 계층(4계층)이 요구하는 품질을 제공하기 위한 기능적, 절차적 수단을 제공한다.<br>\n수많은 네트워크들의 연결로 이뤄지는 네트워크 속에서 어딘가에 있는 목적지로 데이터를 전송하기 위해, 라우터 기능으로 IP 주소를 이용해 길을 찾고 포워딩을 하여 다음 라우터에 데이터를 넘겨준다.<br></p>\n<br>\n<p><a href=\"https://velog.io/@hidaehyunlee/IP-address%EB%9E%80\">IP 주소에 관한 쉬운 설명</a></p>\n<br>\n<ul>\n<li>전송 단위 <code class=\"language-text\">패킷(Packet)</code></li>\n</ul>\n<br>\n<blockquote>\n<p>대표적인 하드웨어 장비 <a href=\"http://wiki.hash.kr/index.php/L3_%EC%8A%A4%EC%9C%84%EC%B9%98\">L3 Switch</a>, <a href=\"https://ko.wikipedia.org/wiki/%EB%9D%BC%EC%9A%B0%ED%84%B0\">라우터</a></p>\n</blockquote>\n<br>\n<h4 id=\"span-stylecolor-17a5424️⃣-전송-계층span-transport-layer\" style=\"position:relative;\"><a href=\"#span-stylecolor-17a5424%EF%B8%8F%E2%83%A3-%EC%A0%84%EC%86%A1-%EA%B3%84%EC%B8%B5span-transport-layer\" aria-label=\"span stylecolor 17a5424️⃣ 전송 계층span transport layer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"color: #17A542\"><strong>4️⃣ 전송 계층</strong></span> (Transport Layer)</h4>\n<p>통신을 활성화하기 위한 계층이다.<br>\n보통 TCP 프로토콜을 이용하며, 포트를 열어서 응용프로그램들이 전송을 할 수 있게 한다.<br>\n전송 계층은 양 끝단의 사용자들이 신뢰성 있는 데이터를 주고 받을 수 있도록 해 주어, 상위 계층에서 데이터 전달의 유효성이나 효율성을 생각하지 않도록 해준다.<br>\n이 계층까지는 물리적인 계층에 속하며 TCP/UDP 프로토콜을 사용한다.<br></p>\n<br>\n<p><a href=\"https://velog.io/@hidaehyunlee/TCP-%EC%99%80-UDP-%EC%9D%98-%EC%B0%A8%EC%9D%B4\">TCP와 UDP의 차이점</a></p>\n<br>\n<ul>\n<li>전송 단위 <code class=\"language-text\">세그먼트(Segment)</code></li>\n</ul>\n<br>\n<blockquote>\n<p>대표적인 하드웨어 장비 <a href=\"http://wiki.hash.kr/index.php/L4_%EC%8A%A4%EC%9C%84%EC%B9%98\">L4 switch</a></p>\n</blockquote>\n<br>\n<h4 id=\"span-stylecolor-fcb40b5️⃣-세션-계층span-session-layer\" style=\"position:relative;\"><a href=\"#span-stylecolor-fcb40b5%EF%B8%8F%E2%83%A3-%EC%84%B8%EC%85%98-%EA%B3%84%EC%B8%B5span-session-layer\" aria-label=\"span stylecolor fcb40b5️⃣ 세션 계층span session layer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"color: #FCB40B\"><strong>5️⃣ 세션 계층</strong></span> (Session Layer)</h4>\n<p>데이터 통신을 위한 논리적인 연결을 담당하는 계층이다.<br>\n반이중 방식(Half Duplex), 전이중 방식(Full Duplex)등의 통신과 함꼐, 체크포인팅과 유휴, 종료, 다시 시작 과정 등을 수행한다.<br>\n이 계층은 TCP/IP 세션을 만들고 없애는 책임을 진다.<br></p>\n<br>\n<p><a href=\"https://ko.wikipedia.org/wiki/%EC%9D%B4%EC%A4%91%ED%86%B5%EC%8B%A0\">이중 통신 이란?</a><br>\n<a href=\"https://88240.tistory.com/190\">Session 이란?</a></p>\n<br>\n<ul>\n<li>전송 단위 <code class=\"language-text\">데이터(Data) 또는 메세지(Message)</code></li>\n</ul>\n<br>\n<h4 id=\"span-stylecolor-f483386️⃣-표현-계층span-presentation-layer\" style=\"position:relative;\"><a href=\"#span-stylecolor-f483386%EF%B8%8F%E2%83%A3-%ED%91%9C%ED%98%84-%EA%B3%84%EC%B8%B5span-presentation-layer\" aria-label=\"span stylecolor f483386️⃣ 표현 계층span presentation layer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"color: #F48338\"><strong>6️⃣ 표현 계층</strong></span> (Presentation Layer)</h4>\n<p>응용 계층으로부터 전달받은 데이터를 읽을 수 있는 형식으로 변환해주는 계층이다.<br>\n표현 계층은 응용 계층의 부담을 덜어주는 역할이 되기도 한다.<br>\n응용 계층으로부터 전송받거나 전달해야하는 데이터의 인코딩과 디코딩이 이 계층에서 이뤄지며 데이터를 안전하게 사용하기 위한 암호화와 복호화도 이 계층에서 진행된다.<br>\n예를들어 유니코드로 인코딩 되어있는 문서를 ASCII코드로 변환해 준다.<br></p>\n<br>\n<ul>\n<li>전송 단위 <code class=\"language-text\">데이터(Data)</code></li>\n</ul>\n<br>\n<h4 id=\"span-stylecolor-b100077️⃣-응용-계층span-application-layer\" style=\"position:relative;\"><a href=\"#span-stylecolor-b100077%EF%B8%8F%E2%83%A3-%EC%9D%91%EC%9A%A9-%EA%B3%84%EC%B8%B5span-application-layer\" aria-label=\"span stylecolor b100077️⃣ 응용 계층span application layer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"color: #B10007\"><strong>7️⃣ 응용 계층</strong></span> (Application Layer)</h4>\n<p>응용 프로세스와 직접 관계하여 일반적인 응용 서비스를 수행하는 계층이다.<br>\n사용자와 직접 맞닿아 있는 계층이며 최종 목적지로서 HTTP, FTP, SMTP, POP3, IMAP, Telnet 등과 같은 프로토콜이 있다.<br>\n해당 통신 패킷들은 방금 나열한 프로토콜에 의해 모두 처리되며 우리가 사용하는 브라우저나, 메일 프로그램은 프로토콜을 보다 쉽게 사용하게 해주는 응용프로그램이다.<br>\n한마디로 모든 통신의 양 끝단은 HTTP와 같은 프로토콜이지 응용프로그램이 아니다.<br></p>\n<br>\n<ul>\n<li>전송 단위 <code class=\"language-text\">데이터(Data)</code></li>\n</ul>\n<br>\n<h2 id=\"-tcpip\" style=\"position:relative;\"><a href=\"#-tcpip\" aria-label=\" tcpip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🌏 TCP/IP</h2>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 320px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 146.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAH2ElEQVRIx7VWaVBU2Rn9aNZuRZ3RmajDGMOogzsKsg20At3Q23uPZpOdBmSRpVntfW8aRLQVWZpmUZGtAWVrlqY3FkGUKJM4zqg1Y1kVJ5WaVCap/Mqv5KUeoj8yqfzLV3Xve3Xr3nO/U/ec+11giiYZHPlcYkR+W3ZEfmt2GE+fG5JxOZ8tnUliiia5O3998iMA2E5ydacAgAv8jyi50gTAkk7HYOp57iFqhuRAeKrULyrn0v5AtJYlnU5AlDYks/NHVxzHYRNwB5lC3uZ78DP39yCOZ0aYf94Jqz/cAqPZ4AL0qiEfhnD8q9hL99kMwWgcorBxGMJxNkMwdo5ePfwFsciDsnVz+adERwIAAnwLALj+jC/AX/ElWHtzB1rH2gCYgtEQRDaTxtUupsXXLmXHqedzEusfpqHyuTSWaJxFLTC4nivpBSQrBXD8e2gc6t5jWrx1YsBhCG4x1UWNP74dYnlmCuh3GP3r7rb4Akc6ncLVLlaEpterAxIkl4NTtdqTnHI9IpupRJXW0uiyHq+z/PubGQpc7lrbY82PO9LahrQ84/063o1e5YWrt6X5E4+MKX0O43ngSGeQ+NoHhcGpGnFAgkQRlnlFeJxRXIcprIWY0pYbWdzlEXZxCAC8AUhlLmMPjdHLr7rjc0oQUVYRW5zHx4TctMha++/a4qd+2x0HMdVDe1micRqmtCViKkc2prLzuLVLSWyxmRlbM3KQP4qDX0g0yNVMwHEx9DjuHBhb7ab2zDTGtAwqMfOaMdrkaKLde2A82zFl8AeWeCITkc3oMLVDG7fZMJW9FpHN6tjiyRJaRb/bbr+wDcJupA3ZuL87lJ0fefsEbvskqNQDtq+TcLwPhpc6ABC5pZKrma8/yanoPc0V3jmFXeo5Si8YQhWWy5jKrgjNuuIFAJ4kN49thGx89u/x5qZSPQgpEYHjb4nMXb75YydpeLGdRBxKHKay10QWd2qjS2/X0cru1IXnXm9A5BYBRzqduWWnz04iI5I7ZUN7Mn0ljC00wMufTfDiL4Pw/Kf+jfbwVQcMOlsB6NVDh5jiycw47WI5qnZKMM2ChFu3UsGSTOXE1Iz4f36S/sEJuYVUMJpbfzOy1MaYedKZOLVmzJhd70qfXe9KGl02MDunWo4CSzKlQhTW/pjq4bsM4VgPvcrUR6sc6OPILb0syVSzzwnaDgDwIlM8CTGTh+ablXPr7cMj89cGx5ebBofsV4dNtsYhy1PDwOiywQgc+awGVTsGApOVU4HJSnNgssJ8nM23c+SWfo58rvVz/1gC0NPdw40MQKKYH7WoHrww9quv509qmwom1Pr8ySp5qtX5rLXHst7eASyxOZItm62Irbmnia0ZucaSmBtjqod1bOl0DVs6zdng6rp949N4IxnGVztptq87hffmm3Qmu/76+HLLNZNd32D9ukM0sdqZDAzxRCSismkx3WIzplvsQjXO7jjdUiuqna9nSswZIzgOOz47sgEYFEkGbhXnAE/FZonaE7jy7oRkiZF7XtadyM3XcdiJNexgYMtn9fRq01NqoWHlXEnnMq1qYIFa1L5y9mLHE7Z8ZvbLKN4ugrInxYPQHqXkMiu+RBdewc0/KU4oOiVMKj4tYGcdU+ZKgior9JxSQNS2+rMXjatnUjVLwem6JWqRwR6cUbcUlKZ9zFbMjvlF5+18B0hcX7so/EY656I6gB/F9a1npB6sRXh+yjDGvqbki4cFglZGHsQK7h/jKK1CVONsRtWOHkRl60U18wZU41QyxONR+04zPsjGx9cbSvVZu6tucoPEHdxwoQGNFLShUdIubkRlExqaq473A7ZsRo6qHA5EaXuAKG1riMq+hiitK6ja6WBLp5u37tpHUN7u4urh7eEJFMIh/8DVoJ9kgG6ABnWDNKg30UBipEJJAxMgqvS2OThd9+fQrMZXX/H0L8OyG19RC9q+C0iS/ymy9NbTsincK6XpJXy8dy/hFC80P/RQpjAcy5GFFxaoI/g1zfTcmhZGakkDnVFUzz5I3DbayJJbq/TKwTVaed96VFnPeqzg/ho1v3Utmn+3Q7iCu8l+eOfb7GKAiuuxBmFb1OtcWdD3yaUn3qaU+/8hSxj4RtAa+Yqvj3ESlEMxtfMGppmfxtSOR5jauYapnXOYZr6dI7ewSkZxSJLJNosTDvyr1IEiTcCblPJj3yYWH3mRXnX8u1zpqW/yZP4vy69FrBFOWUGVVpwlnvgnSzyJs0QTOFM08S9EYcURueVHepXJ63BMxQbc6RCAQu25Ck7OkQUO78gqO/vw88xLp1dzpGcWIhDf5UxhmB4QpfX3mNqJh2TU4xEXmvGICzfx4LRanNgEVdn/FnvpHpnwiueWHURRIv69Dp459SvOhbAv0gXnfMv02N7q9rRPFKNXybW3DwGRoRBVWp8wRePfIoq51xy55TVLPPkCVdrWWRLzTXeyN1GXKa7unmQAF3IUdzcp52ojyPtyIFdFB+mdFNDeKwC+UQWX+/xcAFFYgNf1FkqncM+83r9vSWhY28a79RO5bAIHVGkFtnR6g64LyfWDHhm86F8U+Xg+E44xCgHOnFe9n7kHAOIA4BgA7CYGQjLqXZmi8U1At//ECACAswAQDgCsX+zg5rnFm+TqdtTV3Wu359aPye/Hk6+tQ3he8397eRCW3A8AewkTwf8r/g3CeTRUGXEEtAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tcp_ip.png\"\n        title=\"tcp_ip.png\"\n        src=\"/static/f29d72d9b2b34941e325394cf7ed4980/72799/tcp_ip.png\"\n        srcset=\"/static/f29d72d9b2b34941e325394cf7ed4980/e9ff0/tcp_ip.png 180w,\n/static/f29d72d9b2b34941e325394cf7ed4980/72799/tcp_ip.png 320w\"\n        sizes=\"(max-width: 320px) 100vw, 320px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<p>위에서 서술한 OSI 참조 모델은 말그대로 참조 모델일 뿐 실제 사용되는 인터넷 프로토콜은 을 7계층 구조를 완전히 따르지는 않는다. 인터넷 프로토콜 스택(Internet Protocol Stack)은 현재 대부분 TCP/IP를 따른다.<br></p>\n<br>\n<p>TCP/IP는 인터넷 프로토콜 중 가장 중요한 역할을 하는 TCP와 IP의 합성어로 데이터의 흐름 관리, 정확성 확인, 패킷의 목적지 보장을 담당한다. 데이터의 정확성 확인은 TCP가, 패킷을 목적지까지 전송하는 일은 IP가 담당한다.<br></p>\n<br>\n<blockquote>\n<p><code class=\"language-text\">TCP/IP의 4계층</code><br>\nTCP/IP는 OSI 참조 모델과 달리 표현계층, 세션계층을 응용계층에 다 포함시키고 있지만,<br>\n사실상 TCP/IP Model의 Application 계층 하나에서 Application, Presentatiom, Session 계층의 구현을 다 하고 있다고 이해하는 게 올바르다.<br></p>\n</blockquote>\n<br>\n<p>아이러니 하게도 TCP/IP 4계층은 토대는 OSI 7계층보다 먼저 나왔고<br>\n비공식 표준이지만 OSI 7계층보다 훨씬 많이 이용된다.<br></p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-osi-7%EA%B3%84%EC%B8%B5\">🎢 OSI 7계층</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EB%AA%A9%EC%A0%81\">🚏 목적</a></p>\n</li>\n<li>\n<p><a href=\"#-%EA%B3%84%EC%B8%B5-%EA%B8%B0%EB%8A%A5\">🪜 계층 기능</a></p>\n<ul>\n<li><a href=\"#span-stylecolor-03154d1%EF%B8%8F%E2%83%A3-%EB%AC%BC%EB%A6%AC-%EA%B3%84%EC%B8%B5span-physical-layer\"><span style=\"color: #03154D\"><strong>1️⃣ 물리 계층</strong></span> (Physical Layer)</a></li>\n<li><a href=\"#span-stylecolor-5b1a8e2%EF%B8%8F%E2%83%A3-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%A7%81%ED%81%AC-%EA%B3%84%EC%B8%B5span-datalink-layer\"><span style=\"color: #5B1A8E\"><strong>2️⃣ 데이터 링크 계층</strong></span> (DataLink Layer)</a></li>\n<li><a href=\"#span-stylecolor-0b5bb53%EF%B8%8F%E2%83%A3-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EA%B3%84%EC%B8%B5span-network-layer\"><span style=\"color: #0B5BB5\"><strong>3️⃣ 네트워크 계층</strong></span> (Network Layer)</a></li>\n<li><a href=\"#span-stylecolor-17a5424%EF%B8%8F%E2%83%A3-%EC%A0%84%EC%86%A1-%EA%B3%84%EC%B8%B5span-transport-layer\"><span style=\"color: #17A542\"><strong>4️⃣ 전송 계층</strong></span> (Transport Layer)</a></li>\n<li><a href=\"#span-stylecolor-fcb40b5%EF%B8%8F%E2%83%A3-%EC%84%B8%EC%85%98-%EA%B3%84%EC%B8%B5span-session-layer\"><span style=\"color: #FCB40B\"><strong>5️⃣ 세션 계층</strong></span> (Session Layer)</a></li>\n<li><a href=\"#span-stylecolor-f483386%EF%B8%8F%E2%83%A3-%ED%91%9C%ED%98%84-%EA%B3%84%EC%B8%B5span-presentation-layer\"><span style=\"color: #F48338\"><strong>6️⃣ 표현 계층</strong></span> (Presentation Layer)</a></li>\n<li><a href=\"#span-stylecolor-b100077%EF%B8%8F%E2%83%A3-%EC%9D%91%EC%9A%A9-%EA%B3%84%EC%B8%B5span-application-layer\"><span style=\"color: #B10007\"><strong>7️⃣ 응용 계층</strong></span> (Application Layer)</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-tcpip\">🌏 TCP/IP</a></p>\n</li>\n</ul>\n</div>","excerpt":"🎢 OSI 7계층 Open Systems Interconnection OSI 7계층이란 네트워크에서 통신이 일어나는 과정을 7단계로 나눈 것을 말한다.\n각 계층을 분리함으로서 독립적인 역할을 할 수 있다.\n추가로 역할을 분리되면서 문제 발생 시 어느 계층에서 문제가 발생하는지 파악이 가능해진다. 🚏 목적 OSI 7계층은 프로토콜을 기능별로 나눈 것이다.\n각 계층은 하위 계층의 기능만을 이용하고, 상위 계층에게 기능을 제공한다.\n은 이러한 계층들로 구성되는 프로토콜 시스템이 구현된 시스템을 가리키며,\n이것은 하드웨어나 소프트웨어 혹은 둘의 혼합으로 구현될 수 있다.\n일반적으로 하위 계층들은 하드웨어로, 상위 계층들은 소프트웨어로 구현된다. 🪜 계층 기능 1️⃣ 물리 계층 (Physical Layer) OSI 모델 맨 밑의 계층으로서, 네트워크 데이터가 전송되는 물리적인 매체이다.\n디지털에서 아날로그로 변환되며 또는 그 반대의 신호로 변환되어 물리적인 전송이 가능하게 한다.\n또한 주소 개…","frontmatter":{"date":"February 18, 2022","title":"OSI 7계층 & TCP 4계층","categories":"기타","author":"seongsu","emoji":"1️⃣1️⃣"},"fields":{"slug":"/osi-7layer/"}},"next":{"id":"24ee1439-a6bd-5d83-a1aa-ea2f6f8a6358","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIklEQVQoz5WST0/CQBDF+9U9EWMgGEhM/ATejCetXLl556DZGv4WUiBuaCnddudn2gUsiRGcZHY3b2fevJldj9JEqg2rIf6gbrJ5LxekHveHeSKCFHmVIP4dol7YZBb9tXYk6hl5vXf3RY61tvIqr+aunuBVh3xP2Glj1YhVkrAIQ7ZlcDBCOrdnlR1IvSN7WbVxhSwj5qsV08mExBiKRQjNBlEU0e/36fV6+L6P1rryOI5PFR5ll0D7BjsPWccxyyhis9tRhFNoXZNZIZzN+AwCBoMBSZKQpinGmN9aNo6w20SUYq414+GQrMSUQrqtQ2OXtSy2cODbAxI8YQSydOsig0eH/+dRTornula1VK+58Mc4hRxnWJtlDftpZ6/kDPM3H6637KPjZfIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"typeorm.png\"\n        title=\"typeorm.png\"\n        src=\"/static/e4b90acf02bd52801818ca0004fdd1f1/37523/typeorm.png\"\n        srcset=\"/static/e4b90acf02bd52801818ca0004fdd1f1/e9ff0/typeorm.png 180w,\n/static/e4b90acf02bd52801818ca0004fdd1f1/f21e7/typeorm.png 360w,\n/static/e4b90acf02bd52801818ca0004fdd1f1/37523/typeorm.png 720w,\n/static/e4b90acf02bd52801818ca0004fdd1f1/00d43/typeorm.png 1000w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br/>\n<h2 id=\"ullia-hrefhttpsseongsumetypeorm-virtual-column-1-target_blanktypeorm-virtual-column-설정-1aliul\" style=\"position:relative;\"><a href=\"#ullia-hrefhttpsseongsumetypeorm-virtual-column-1-target_blanktypeorm-virtual-column-%EC%84%A4%EC%A0%95-1aliul\" aria-label=\"ullia hrefhttpsseongsumetypeorm virtual column 1 target_blanktypeorm virtual column 설정 1aliul permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><ul><li><a href=\"https://seongsu.me/typeorm-virtual-column-1\" target=\"_blank\">Typeorm Virtual Column 설정 (1)</a></li></ul></h2>\n<br/>\n<br/>\n<p>이전 포스팅에서 <code class=\"language-text\">getMany()</code>함수와 <code class=\"language-text\">getRawMany()</code>함수의 차이점을 알아보게 되었는데<br/>\n이번 포스팅에선 가상컬럼을 사용하며 join시 위 함수의 문제와 해결법을 포스팅 해보려 한다.<br/></p>\n<br/>\n<h2 id=\"-custom-virtual-column을-사용해야-하는-이유\" style=\"position:relative;\"><a href=\"#-custom-virtual-column%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC-%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\" custom virtual column을 사용해야 하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>😵‍💫 Custom Virtual Column을 사용해야 하는 이유</h2>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// station id 1 주변 맛집</span>\n<span class=\"token punctuation\">[</span>\n    Shops <span class=\"token punctuation\">{</span>\n        id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        stationId<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"동찬이네\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    Shops <span class=\"token punctuation\">{</span>\n        id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        stationId<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"사왕이네\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    Shops <span class=\"token punctuation\">{</span>\n        id<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n        stationId<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"승한이네\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">// station id 2 주변 맛집</span>\n<span class=\"token punctuation\">[</span>\n    Shops <span class=\"token punctuation\">{</span>\n        id<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n        stationId<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"크래프트 한스\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    Shops <span class=\"token punctuation\">{</span>\n        id<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n        stationId<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"큰통치킨\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    Shops <span class=\"token punctuation\">{</span>\n        id<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n        stationId<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"BBQ\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<br/>\n<p>예를들어 위처럼 버스 정류소와 주변 맛집이 정류소 pk를 통해 foreign key로 연결이 되어있다 가정해 보자.<br/></p>\n<br/>\n<p>이렇게 정류소와 주변 맛집의 관계가 맺어져 있는 상황에서 현재 거리 기준 2km 이내 정류소 주변 맛집을 조회하는 쿼리를 실행하면 어떻게 될까?<br/></p>\n<br/>\n<h3 id=\"span-stylecolor-redgetrawmany의-문제span\" style=\"position:relative;\"><a href=\"#span-stylecolor-redgetrawmany%EC%9D%98-%EB%AC%B8%EC%A0%9Cspan\" aria-label=\"span stylecolor redgetrawmany의 문제span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"color: red\">getRawMany()의 문제</span></h3>\n<p>지금 보니 <code class=\"language-text\">getRawMany()</code>함수를 사용하니 가상 컬럼 효과를 낸 것 같은데 해결된거 아니냐? 할 수 있다.<br/>\n그런데 문제는 지금부터이다. 여기서 <code class=\"language-text\">inner join</code> 또는 <code class=\"language-text\">left join</code>을 할 경우<br/></p>\n<br/>\n<p><code class=\"language-text\">getRawMany()함수로 join &amp; 가상컬럼</code></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token punctuation\">[</span>\n    Stations <span class=\"token punctuation\">{</span>\n        stations_id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        stations_station<span class=\"token operator\">:</span> <span class=\"token string\">\"동대문역 2번출구 정류소\"</span><span class=\"token punctuation\">,</span>\n        stations_latitude<span class=\"token operator\">:</span> <span class=\"token number\">37.57198805</span><span class=\"token punctuation\">,</span>\n        stations_longitude<span class=\"token operator\">:</span> <span class=\"token number\">127.0117451</span><span class=\"token punctuation\">,</span>\n        shops_id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        shops_stationId<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        shops_shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"동찬이네\"</span><span class=\"token punctuation\">,</span>\n        distance<span class=\"token operator\">:</span> <span class=\"token number\">0.4228400907307967</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    Stations <span class=\"token punctuation\">{</span>\n        stations_id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        stations_station<span class=\"token operator\">:</span> <span class=\"token string\">\"동대문역 2번출구 정류소\"</span><span class=\"token punctuation\">,</span>\n        stations_latitude<span class=\"token operator\">:</span> <span class=\"token number\">37.57198805</span><span class=\"token punctuation\">,</span>\n        stations_longitude<span class=\"token operator\">:</span> <span class=\"token number\">127.0117451</span><span class=\"token punctuation\">,</span>\n        shops_id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        shops_stationId<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        shops_shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"사왕이네\"</span><span class=\"token punctuation\">,</span>\n        distance<span class=\"token operator\">:</span> <span class=\"token number\">0.4228400907307967</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token operator\">...</span>\n\n    Stations <span class=\"token punctuation\">{</span>\n        stations_id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        stations_station<span class=\"token operator\">:</span> <span class=\"token string\">\"원남동 사거리 정류소\"</span><span class=\"token punctuation\">,</span>\n        stations_latitude<span class=\"token operator\">:</span> <span class=\"token number\">37.57578617</span><span class=\"token punctuation\">,</span>\n        stations_longitude<span class=\"token operator\">:</span> <span class=\"token number\">126.998124</span><span class=\"token punctuation\">,</span>\n        shops_id<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n        shops_stationId<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        shops_shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"큰통치킨\"</span><span class=\"token punctuation\">,</span>\n        distance<span class=\"token operator\">:</span> <span class=\"token number\">1.5482886513847316</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    Stations <span class=\"token punctuation\">{</span>\n        stations_id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        stations_station<span class=\"token operator\">:</span> <span class=\"token string\">\"원남동 사거리 정류소\"</span><span class=\"token punctuation\">,</span>\n        stations_latitude<span class=\"token operator\">:</span> <span class=\"token number\">37.57578617</span><span class=\"token punctuation\">,</span>\n        stations_longitude<span class=\"token operator\">:</span> <span class=\"token number\">126.998124</span><span class=\"token punctuation\">,</span>\n        shops_id<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n        shops_stationId<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        shops_shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"BBQ\"</span>\n        distance<span class=\"token operator\">:</span> <span class=\"token number\">1.5482886513847316</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<br/>\n<p>위처럼 <code class=\"language-text\">distance</code>를 추가해 조회 할 경우<br/>\n원래 대로면 부모 객체 안에 join된 객체들이 배열을 이뤄 지정한 key의 배열로 저장이 되어야 한다.<br/>\n하지만 <code class=\"language-text\">getRawMany()</code>를 사용하면 부모객체와의 의존성이 모두 사라지며 join된 객체 하나하나가 독립적으로 조회된다.<br/>\n여기서 Typeorm 원시 쿼리 조회의 문제가 나온다.<br/></p>\n<br/>\n<h3 id=\"span-stylecolor-redgetmany의-문제span\" style=\"position:relative;\"><a href=\"#span-stylecolor-redgetmany%EC%9D%98-%EB%AC%B8%EC%A0%9Cspan\" aria-label=\"span stylecolor redgetmany의 문제span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"color: red\">getMany()의 문제</span></h3>\n<br/>\n<p>그럼 <code class=\"language-text\">getMany()</code>함수를 사용하면 되는것 아니냐?<br/>\n<a href=\"http://localhost:8000/typeorm-virtual-column-1/#code-classlanguage-textgetmany-%EC%82%AC%EC%9A%A9-%EC%8B%9Ccode\">이전 포스팅</a>에서 봤던 것 처럼 <code class=\"language-text\">distance</code>를 출력하고 싶은데 안나오는 문제가 있어 자세히 알아볼 필요가 없다.<br/></p>\n<br/>\n<h2 id=\"-custom-virtual-column을-사용해-보자\" style=\"position:relative;\"><a href=\"#-custom-virtual-column%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4-%EB%B3%B4%EC%9E%90\" aria-label=\" custom virtual column을 사용해 보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤩 Custom Virtual Column을 사용해 보자</h2>\n<br/>\n<p>우리가 만들 가상 컬럼은 위 문제를 완벽히 해결해 줄 것이다.<br/></p>\n<blockquote>\n<p>물론 짜기 나름이다 🤪</p>\n</blockquote>\n<br/>\n<p>Custom Virtual Column을 어떻게 사용하냐면<br/>\n첫째로 데코레이터 설정, 가상 컬럼 설정, 그 뒤 <code class=\"language-text\">getMany()</code>, <code class=\"language-text\">getRawMany()</code>를 대체할 함수 제작이다.<br/>\n그럼 <code class=\"language-text\">addSelect()</code>함수가 호출 될 때 alias 된 컬럼명으로 데코레이터가 등록된 컬럼이 적용될 것이다.<br/></p>\n<br/>\n<ul>\n<li>\n<p><a href=\"https://typescript-kr.github.io/pages/decorators.html\">https://typescript-kr.github.io/pages/decorators.html</a><br/></p>\n<p>먼저 위 링크에서 데코레이터 &#x26; 메타데이터에 관해 알아보자<br/></p>\n</li>\n</ul>\n<br/>\n<p>그 뒤 <code class=\"language-text\">reflect-metadata</code>설치가 완료 되었고 <code class=\"language-text\">tsconfig.json</code>에 메타데이터 설정이 완료 되었다면 데코레이터를 만들어 주자.</p>\n<br/>\n<h3 id=\"code-classlanguage-textmodulesdecoratortscode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textmodulesdecoratortscode\" aria-label=\"code classlanguage textmodulesdecoratortscode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">@modules/decorator.ts</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"reflect-metadata\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">COLUMN_KEY</span> <span class=\"token operator\">=</span> <span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"VIRTUAL_COLUMN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">VirtualColumn</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> PropertyDecorator <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> propertyKey<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> metaInfo <span class=\"token operator\">=</span> Reflect<span class=\"token punctuation\">.</span><span class=\"token function\">getMetadata</span><span class=\"token punctuation\">(</span><span class=\"token constant\">COLUMN_KEY</span><span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n        metaInfo<span class=\"token punctuation\">[</span>propertyKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> name <span class=\"token operator\">??</span> propertyKey<span class=\"token punctuation\">;</span>\n\n        Reflect<span class=\"token punctuation\">.</span><span class=\"token function\">defineMetadata</span><span class=\"token punctuation\">(</span><span class=\"token constant\">COLUMN_KEY</span><span class=\"token punctuation\">,</span> metaInfo<span class=\"token punctuation\">,</span> target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>데코레이터 함수 작성이 완료되었으면 Entity에 바로 적용하자!<br/></p>\n<br/>\n<h3 id=\"code-classlanguage-textentitiesstationstscode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textentitiesstationstscode\" aria-label=\"code classlanguage textentitiesstationstscode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">@entities/stations.ts</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Entity<span class=\"token punctuation\">,</span> PrimaryGeneratedColumn<span class=\"token punctuation\">,</span> Column <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"typeorm\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> VirtualColumn <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@modules/decorator.ts\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Entity</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"stations\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Stations</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">PrimaryGeneratedColumn</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    id<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Column</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"varchar\"</span><span class=\"token punctuation\">)</span>\n    station<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Column</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"double\"</span><span class=\"token punctuation\">)</span>\n    latitude<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Column</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">\"double\"</span><span class=\"token punctuation\">)</span>\n    longitude<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 데코레이터는 distance라는 이름을 가진 컬럼으로 인식하게 된다.</span>\n    <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">VirtualColumn</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    distance<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<p>이제 Express 서버가 실행되며 Typeorm이 연결될 때 VirtualColumn()도 같이 적용된다.<br/>\n그 뒤 우리가 원하는 결과를 얻기 위해 <code class=\"language-text\">getRawMany()</code>함수를 커스텀 해보자.<br/></p>\n<br/>\n<h3 id=\"code-classlanguage-textmodulesquerybuildertscode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textmodulesquerybuildertscode\" aria-label=\"code classlanguage textmodulesquerybuildertscode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">@modules/queryBuilder.ts</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> SelectQueryBuilder <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"typeorm\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"reflect-metadata\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">module</span> <span class=\"token string\">\"typeorm\"</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">interface</span> <span class=\"token class-name\">SelectQueryBuilder<span class=\"token operator\">&lt;</span>Entity<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">getAroundShop</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token operator\">:</span> SelectQueryBuilder<span class=\"token operator\">&lt;</span>Entity<span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>Entity<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">COLUMN_KEY</span> <span class=\"token operator\">=</span> <span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"VIRTUAL_COLUMN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nSelectQueryBuilder<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">getAroundShop</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 먼저 원시 데이터 조회 결과를 얻어온다</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> entities<span class=\"token punctuation\">,</span> raw <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getRawAndEntities</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> flag <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> idx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> items <span class=\"token operator\">=</span> entities<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>entitiy<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 원시 결과에서 필요없는 데이터를 쳐내기 위해 반복문을 돌려준다.</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>flag <span class=\"token operator\">===</span> raw<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"staions_id\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            idx<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 앞전에 작성한 데코레이터를 COLUMN_KEY로 인식하게 한다.</span>\n        <span class=\"token keyword\">const</span> metaInfo <span class=\"token operator\">=</span> Reflect<span class=\"token punctuation\">.</span><span class=\"token function\">getMetadata</span><span class=\"token punctuation\">(</span><span class=\"token constant\">COLUMN_KEY</span><span class=\"token punctuation\">,</span> entitiy<span class=\"token punctuation\">)</span> <span class=\"token operator\">??</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> item <span class=\"token operator\">=</span> raw<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>propertyKey<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">]</span> <span class=\"token keyword\">of</span> Object<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">entries</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>metaInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            entitiy<span class=\"token punctuation\">[</span>propertyKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> item<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        flag <span class=\"token operator\">=</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">\"stations_id\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> entitiy<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// distance를 포함한 데이터를 반환해준다.</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>items<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>이렇게 되면 기존 Typeorm의 <code class=\"language-text\">getRawMany()</code>의 기능과 거의 비슷하게 만든 <code class=\"language-text\">getAroundShop()</code>함수가 만들어 졌다.<br/>\n이렇게 되면 원래 원했던 부모 객체 안에 join된 객체들이 배열을 이뤄 반환이 될 것이다.<br/></p>\n<br/>\n<h3 id=\"code-classlanguage-textgetaroundshop-사용-시code\" style=\"position:relative;\"><a href=\"#code-classlanguage-textgetaroundshop-%EC%82%AC%EC%9A%A9-%EC%8B%9Ccode\" aria-label=\"code classlanguage textgetaroundshop 사용 시code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">getAroundShop() 사용 시</code></h3>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getRepository <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"typeorm\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getAroundShop <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@modules/queryBuilder\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Stations <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@entities/stations\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Shops <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@entities/shops\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n    lat: 37.57418192,\n    lon: 127.015664,\n    radius(기준 km): 2\n*/</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">aroundStation</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>lat<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> lon<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> radius<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getRepository</span><span class=\"token punctuation\">(</span>Stations<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">createQueryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"stations\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">addSelect</span><span class=\"token punctuation\">(</span>\n                <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">6371 * acos(cos(radians(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>lat<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)) * cos(radians(latitude)) * cos(radians(longitude) - radians(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>lon<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)) + sin(radians(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>lat<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)) * sin(radians(latitude)))</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">\"distance\"</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoinAndSelect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"stations.shops\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"shops\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">having</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">distance &lt;= </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>radius<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"distance\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ASC\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">getAroundShop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">aroundStation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>Entity join하는 방법은 <a href=\"https://typeorm.io\">Typeorm 공식문서</a>를 참조하자!</p>\n</blockquote>\n<br/>\n<h2 id=\"-가상-컬럼을-통한-데이터-조회\" style=\"position:relative;\"><a href=\"#-%EA%B0%80%EC%83%81-%EC%BB%AC%EB%9F%BC%EC%9D%84-%ED%86%B5%ED%95%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A1%B0%ED%9A%8C\" aria-label=\" 가상 컬럼을 통한 데이터 조회 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🥳 가상 컬럼을 통한 데이터 조회</h2>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token punctuation\">[</span>\n    Stations <span class=\"token punctuation\">{</span>\n        id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        station<span class=\"token operator\">:</span> <span class=\"token string\">\"동대문역 2번출구 정류소\"</span><span class=\"token punctuation\">,</span>\n        latitude<span class=\"token operator\">:</span> <span class=\"token number\">37.57198805</span><span class=\"token punctuation\">,</span>\n        longitude<span class=\"token operator\">:</span> <span class=\"token number\">127.0117451</span><span class=\"token punctuation\">,</span>\n        shops<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span>\n                id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                stationId<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"동찬이네\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span>\n                id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n                stationId<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"사왕이네\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span>\n                id<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n                stationId<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n                shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"승한이네\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        distance<span class=\"token operator\">:</span> <span class=\"token number\">0.4228400907307967</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    Stations <span class=\"token punctuation\">{</span>\n        id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        station<span class=\"token operator\">:</span> <span class=\"token string\">\"원남동 사거리 정류소\"</span><span class=\"token punctuation\">,</span>\n        latitude<span class=\"token operator\">:</span> <span class=\"token number\">37.57578617</span><span class=\"token punctuation\">,</span>\n        longitude<span class=\"token operator\">:</span> <span class=\"token number\">126.998124</span><span class=\"token punctuation\">,</span>\n        shops<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span>\n                id<span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n                stationId<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n                shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"크래프트 한스\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span>\n                id<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n                stationId<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n                shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"큰통치킨\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span>\n                id<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n                stationId<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n                shopName<span class=\"token operator\">:</span> <span class=\"token string\">\"BBQ\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        distance<span class=\"token operator\">:</span> <span class=\"token number\">1.5482886513847316</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<br/>\n<p>이로써 테이블에 존재하지 않는 특정 데이터를 포함해 조회하는 로직을 완성할 수 있게 되었다.<br/>\n이게 특별한 기능은 아닌것 같은데 Typeorm에서 정식으로 지원해 주지 않는 바람에 몇일 개고생을 해서 찾고 구현을 하게 되었다.<br/>\n후…😑 왜 이렇게 필요하고 이게 안돼? 라는 기능이 공식 지원이 안돼 개고생을 해야하는지 모르겠지만… 어쨋든 결과가 좋았으니 된것 같다…😅<br/></p>\n<blockquote>\n<p>0.2.37 버전에서 지원 해준다 했으면서 아직도 안해주네…</p>\n</blockquote>\n<br/>\n<h2 id=\"-참고-자료\" style=\"position:relative;\"><a href=\"#-%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\" 참고 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📚 참고 자료</h2>\n<ul>\n<li>Virtual Column solutions for TypeORM</li>\n</ul>\n<blockquote>\n<p><a href=\"https://pietrzakadrian.com/blog/virtual-column-solutions-for-typeorm\">https://pietrzakadrian.com/blog/virtual-column-solutions-for-typeorm</a></p>\n</blockquote>\n<br/>\n<br/>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#ullia-hrefhttpsseongsumetypeorm-virtual-column-1-target_blanktypeorm-virtual-column-%EC%84%A4%EC%A0%95-1aliul\"><ul><li><a href=\"https://seongsu.me/typeorm-virtual-column-1\" target=\"_blank\">Typeorm Virtual Column 설정 (1)</a></li></ul></a></p>\n</li>\n<li>\n<p><a href=\"#-custom-virtual-column%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC-%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">😵‍💫 Custom Virtual Column을 사용해야 하는 이유</a></p>\n<ul>\n<li><a href=\"#span-stylecolor-redgetrawmany%EC%9D%98-%EB%AC%B8%EC%A0%9Cspan\"><span style=\"color: red\">getRawMany()의 문제</span></a></li>\n<li><a href=\"#span-stylecolor-redgetmany%EC%9D%98-%EB%AC%B8%EC%A0%9Cspan\"><span style=\"color: red\">getMany()의 문제</span></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-custom-virtual-column%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4-%EB%B3%B4%EC%9E%90\">🤩 Custom Virtual Column을 사용해 보자</a></p>\n<ul>\n<li><a href=\"#modulesdecoratorts\"><code class=\"language-text\">@modules/decorator.ts</code></a></li>\n<li><a href=\"#entitiesstationsts\"><code class=\"language-text\">@entities/stations.ts</code></a></li>\n<li><a href=\"#modulesquerybuilderts\"><code class=\"language-text\">@modules/queryBuilder.ts</code></a></li>\n<li><a href=\"#getaroundshop-%EC%82%AC%EC%9A%A9-%EC%8B%9C\"><code class=\"language-text\">getAroundShop() 사용 시</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EA%B0%80%EC%83%81-%EC%BB%AC%EB%9F%BC%EC%9D%84-%ED%86%B5%ED%95%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A1%B0%ED%9A%8C\">🥳 가상 컬럼을 통한 데이터 조회</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\">📚 참고 자료</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"January 17, 2022","title":"Typeorm Virtual Column 설정 (2)","categories":"Node.js Express","author":"seongsu","emoji":"🔟"},"fields":{"slug":"/typeorm-virtual-column-2/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://seongsu.me","comments":{"utterances":{"repo":"nfl1ryxditimo12/nfl1ryxditimo12.github.io"}}}}},"pageContext":{"slug":"/osi-7layer/","nextSlug":"/typeorm-virtual-column-2/","prevSlug":""}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}